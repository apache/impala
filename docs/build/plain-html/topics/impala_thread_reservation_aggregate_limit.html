<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta name="copyright" content="(C) Copyright 2024" />
<meta name="DC.rights.owner" content="(C) Copyright 2024" />
<meta name="DC.Type" content="concept" />
<meta name="DC.Title" content="THREAD_RESERVATION_AGGREGATE_LIMIT Query Option (Impala 3.1 or higher only)" />
<meta name="DC.Relation" scheme="URI" content="../topics/impala_set.html" />
<meta name="prodname" content="Impala" />
<meta name="version" content="Impala 3.4.x" />
<meta name="DC.Format" content="XHTML" />
<meta name="DC.Identifier" content="thread_reservation_aggregate_limit" />
<link rel="stylesheet" type="text/css" href="../commonltr.css" />
<title>THREAD_RESERVATION_AGGREGATE_LIMIT Query Option (Impala 3.1 or higher only)</title>
</head>
<body id="thread_reservation_aggregate_limit">


  <h1 class="title topictitle1" id="ariaid-title1">THREAD_RESERVATION_AGGREGATE_LIMIT Query Option (<span class="keyword">Impala 3.1</span> or higher only)</h1>


  

  

  <div class="body conbody">

    <p class="p">
      The <code class="ph codeph">THREAD_RESERVATION_AGGREGATE_LIMIT</code> query option limits the number of
      reserved threads for a query across all nodes on which it is executing. The option is
      intended to prevent execution of complex queries that can consume excessive CPU or
      operating system resources on a cluster. Queries that have more threads than this
      threshold are rejected by Impalaâ€™s admission controller before they start executing.
    </p>


    <p class="p">
      For example, an Impala administrator could set a default value of
      <code class="ph codeph">THREAD_RESERVATION_AGGREGATE_LIMIT=2000</code> for a resource pool on a 100 node
      where they expect only relatively simple queries with less than 20 threads per node to
      run. This will reject queries that require more than 2000 reserved threads across all
      nodes, for example a query with 21 fragments running on all 100 nodes of the cluster.
    </p>


    <p class="p">
      You can override the default value per-query or per-session, in the same way as other
      query options, if you do not want the default
      <code class="ph codeph">THREAD_RESERVATION_AGGREGATE_LIMIT</code> value to apply to a specific query or
      session.
    </p>


    <p class="p">
      <strong class="ph b">Syntax:</strong> <code class="ph codeph">SET THREAD_RESERVATION_AGGREGATE_LIMIT=number;</code>
    </p>


    <p class="p">
      <strong class="ph b">Type:</strong> numeric
    </p>


    <p class="p">
      <strong class="ph b">Default:</strong> 0 (no limit)
    </p>


    <p class="p">
      <strong class="ph b">Added in:</strong> <span class="keyword">Impala 3.1</span>
    </p>


  </div>


<div class="related-links">
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a class="link" href="../topics/impala_set.html">SET Statement</a></div>
</div>
</div></body>
</html>