<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta name="copyright" content="(C) Copyright 2025" />
<meta name="DC.rights.owner" content="(C) Copyright 2025" />
<meta name="DC.Type" content="concept" />
<meta name="DC.Title" content="REPLICA_PREFERENCE Query Option (Impala 2.7 or higher only)" />
<meta name="DC.Relation" scheme="URI" content="../topics/impala_set.html" />
<meta name="prodname" content="Impala" />
<meta name="prodname" content="Impala" />
<meta name="version" content="Impala 3.4.x" />
<meta name="version" content="Impala 3.4.x" />
<meta name="DC.Format" content="XHTML" />
<meta name="DC.Identifier" content="replica_preference" />
<link rel="stylesheet" type="text/css" href="../commonltr.css" />
<title>REPLICA_PREFERENCE Query Option (Impala 2.7 or higher only)</title>
</head>
<body id="replica_preference">


  <h1 class="title topictitle1" id="ariaid-title1">REPLICA_PREFERENCE Query Option (<span class="keyword">Impala 2.7</span> or higher only)</h1>


  

  

  <div class="body conbody">

    <p class="p">
      
    </p>


    <p class="p">
      The <code class="ph codeph">REPLICA_PREFERENCE</code> query option lets you distribute the work more
      evenly if hotspots and bottlenecks persist. It causes the access cost of all replicas of a
      data block to be considered equal to or worse than the configured value. This allows
      Impala to schedule reads to suboptimal replicas (e.g. local in the presence of cached
      ones) in order to distribute the work across more executor nodes.
    </p>


    <p class="p">
      Allowed values are: <code class="ph codeph">CACHE_LOCAL</code> (<code class="ph codeph">0</code>),
      <code class="ph codeph">DISK_LOCAL</code> (<code class="ph codeph">2</code>), <code class="ph codeph">REMOTE</code>
      (<code class="ph codeph">4</code>)
    </p>


    <p class="p">
      <strong class="ph b">Type:</strong> Enum
    </p>


    <p class="p">
      <strong class="ph b">Default:</strong> <code class="ph codeph">CACHE_LOCAL (0)</code>
    </p>


    <p class="p">
        <strong class="ph b">Added in:</strong> <span class="keyword">Impala 2.7.0</span>
      </p>


    <p class="p">
      <strong class="ph b">Usage Notes:</strong>
    </p>


    <p class="p">
      By default Impala selects the best replica it can find in terms of access cost. The
      preferred order is cached, local, and remote. With <code class="ph codeph">REPLICA_PREFERENCE</code>,
      the preference of all replicas are capped at the selected value. For example, when
      <code class="ph codeph">REPLICA_PREFERENCE</code> is set to <code class="ph codeph">DISK_LOCAL</code>, cached and
      local replicas are treated with the equal preference. When set to
      <code class="ph codeph">REMOTE</code>, all three types of replicas, cached, local, remote, are treated
      with equal preference.
    </p>


    <p class="p">
        <strong class="ph b">Related information:</strong>
      </p>


    <p class="p">
      <a class="xref" href="impala_perf_hdfs_caching.html#hdfs_caching">Using HDFS Caching with Impala (Impala 2.1 or higher only)</a>,
      <a class="xref" href="impala_schedule_random_replica.html#schedule_random_replica">SCHEDULE_RANDOM_REPLICA Query Option (Impala 2.5 or higher only)</a>
    </p>


  </div>


<div class="related-links">
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a class="link" href="../topics/impala_set.html">SET Statement</a></div>
</div>
</div></body>
</html>