<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta name="copyright" content="(C) Copyright 2024" />
<meta name="DC.rights.owner" content="(C) Copyright 2024" />
<meta name="DC.Type" content="concept" />
<meta name="DC.Title" content="SCRATCH_LIMIT Query Option" />
<meta name="DC.Relation" scheme="URI" content="../topics/impala_set.html" />
<meta name="prodname" content="Impala" />
<meta name="prodname" content="Impala" />
<meta name="version" content="Impala 3.4.x" />
<meta name="version" content="Impala 3.4.x" />
<meta name="DC.Format" content="XHTML" />
<meta name="DC.Identifier" content="scratch_limit" />
<link rel="stylesheet" type="text/css" href="../commonltr.css" />
<title>SCRATCH_LIMIT Query Option</title>
</head>
<body id="scratch_limit">


  <h1 class="title topictitle1" id="ariaid-title1">SCRATCH_LIMIT Query Option</h1>

  
  

  <div class="body conbody">

    <p class="p">
      
      Specifies the maximum amount of disk storage, in bytes, that any Impala query can consume
      on any host using the <span class="q">"spill to disk"</span> mechanism that handles queries that exceed
      the memory limit.
    </p>


    <p class="p">
        <strong class="ph b">Syntax:</strong>
      </p>


    <p class="p">
      Specify the size in bytes, or with a trailing <code class="ph codeph">m</code> or <code class="ph codeph">g</code> character to indicate
      megabytes or gigabytes. For example:
    </p>



<pre class="pre codeblock"><code>-- 128 megabytes.
set SCRATCH_LIMIT=134217728

-- 512 megabytes.
set SCRATCH_LIMIT=512m;

-- 1 gigabyte.
set SCRATCH_LIMIT=1g;
</code></pre>

    <p class="p">
        <strong class="ph b">Usage notes:</strong>
      </p>


    <p class="p">
      A value of zero turns off the spill to disk feature for queries
      in the current session, causing them to fail immediately if they
      exceed the memory limit.
    </p>


    <p class="p">
      The amount of memory used per host for a query is limited by the
      <code class="ph codeph">MEM_LIMIT</code> query option.
    </p>


    <p class="p">
      The more Impala daemon hosts in the cluster, the less memory is used on each host,
      and therefore also less scratch space is required for queries that
      exceed the memory limit.
    </p>


    <p class="p">
      <strong class="ph b">Type:</strong> numeric, with optional unit specifier
    </p>


    <p class="p">
      <strong class="ph b">Default:</strong> -1 (amount of spill space is unlimited)
    </p>


    <p class="p">
        <strong class="ph b">Related information:</strong>
      </p>


    <p class="p">
      <a class="xref" href="impala_scalability.html#spill_to_disk">SQL Operations that Spill to Disk</a>,
      <a class="xref" href="impala_mem_limit.html#mem_limit">MEM_LIMIT Query Option</a>
    </p>


  </div>

<div class="related-links">
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a class="link" href="../topics/impala_set.html">SET Statement</a></div>
</div>
</div></body>
</html>