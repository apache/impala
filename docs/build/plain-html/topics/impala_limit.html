<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta name="copyright" content="(C) Copyright 2024" />
<meta name="DC.rights.owner" content="(C) Copyright 2024" />
<meta name="DC.Type" content="concept" />
<meta name="DC.Title" content="LIMIT Clause" />
<meta name="DC.Relation" scheme="URI" content="../topics/impala_select.html" />
<meta name="prodname" content="Impala" />
<meta name="prodname" content="Impala" />
<meta name="version" content="Impala 3.4.x" />
<meta name="version" content="Impala 3.4.x" />
<meta name="DC.Format" content="XHTML" />
<meta name="DC.Identifier" content="limit" />
<link rel="stylesheet" type="text/css" href="../commonltr.css" />
<title>LIMIT Clause</title>
</head>
<body id="limit">


  <h1 class="title topictitle1" id="ariaid-title1">LIMIT Clause</h1>

  

  <div class="body conbody">

    <p class="p">
      The <code class="ph codeph">LIMIT</code> clause in a <code class="ph codeph">SELECT</code> query sets a maximum number of rows for the
      result set. Pre-selecting the maximum size of the result set helps Impala to optimize memory usage while
      processing a distributed query.
    </p>


    <p class="p">
        <strong class="ph b">Syntax:</strong>
      </p>


<pre class="pre codeblock"><code>LIMIT <var class="keyword varname">constant_integer_expression</var></code></pre>

    <p class="p">
      The argument to the <code class="ph codeph">LIMIT</code> clause must evaluate to a constant value. It can be a numeric
      literal, or another kind of numeric expression involving operators, casts, and function return values. You
      cannot refer to a column or use a subquery.
    </p>


    <p class="p">
        <strong class="ph b">Usage notes:</strong>
      </p>


    <p class="p">
      This clause is useful in contexts such as:
    </p>


    <ul class="ul">
      <li class="li">
        To return exactly N items from a top-N query, such as the 10 highest-rated items in a shopping category or
        the 50 hostnames that refer the most traffic to a web site.
      </li>


      <li class="li">
        To demonstrate some sample values from a table or a particular query. (To display some arbitrary items, use
        a query with no <code class="ph codeph">ORDER BY</code> clause. An <code class="ph codeph">ORDER BY</code> clause causes additional
        memory and/or disk usage during the query.)
      </li>


      <li class="li">
        To keep queries from returning huge result sets by accident if a table is larger than expected, or a
        <code class="ph codeph">WHERE</code> clause matches more rows than expected.
      </li>

    </ul>


    <p class="p">
      Originally, the value for the <code class="ph codeph">LIMIT</code> clause had to be a numeric literal. In Impala 1.2.1 and
      higher, it can be a numeric expression.
    </p>


    <p class="p">
        Prior to Impala 1.4.0, Impala required any query including an
        <code class="ph codeph"><a class="xref" href="../shared/../topics/impala_order_by.html#order_by">ORDER BY</a></code>
        clause to also use a
        <code class="ph codeph"><a class="xref" href="../shared/../topics/impala_limit.html#limit">LIMIT</a></code> clause. In
        Impala 1.4.0 and higher, the <code class="ph codeph">LIMIT</code> clause is optional for <code class="ph codeph">ORDER
        BY</code> queries. In cases where sorting a huge result set requires enough memory to
        exceed the Impala memory limit for a particular executor Impala daemon, Impala
        automatically uses a temporary disk work area to perform the sort operation.
      </p>


    <p class="p">
      See <a class="xref" href="impala_order_by.html#order_by">ORDER BY Clause</a> for details.
    </p>


    <p class="p">
        In Impala 1.2.1 and higher, you can combine a <code class="ph codeph">LIMIT</code> clause with an
        <code class="ph codeph">OFFSET</code> clause to produce a small result set that is different from a
        top-N query, for example, to return items 11 through 20. This technique can be used to
        simulate <span class="q">"paged"</span> results. Because Impala queries typically involve substantial
        amounts of I/O, use this technique only for compatibility in cases where you cannot
        rewrite the application logic. For best performance and scalability, wherever practical,
        query as many items as you expect to need, cache them on the application side, and
        display small groups of results to users using application logic.
      </p>


    <p class="p">
        <strong class="ph b">Restrictions:</strong>
      </p>


    <p class="p">
        Correlated subqueries used in <code class="ph codeph">EXISTS</code> and <code class="ph codeph">IN</code> operators
        cannot include a <code class="ph codeph">LIMIT</code> clause.
      </p>


    <p class="p">
        <strong class="ph b">Examples:</strong>
      </p>


    <p class="p">
      The following example shows how the <code class="ph codeph">LIMIT</code> clause caps the size of the result set, with the
      limit being applied after any other clauses such as <code class="ph codeph">WHERE</code>.
    </p>


<pre class="pre codeblock"><code>[localhost:21000] &gt; create database limits;
[localhost:21000] &gt; use limits;
[localhost:21000] &gt; create table numbers (x int);
[localhost:21000] &gt; insert into numbers values (1), (3), (4), (5), (2);
Inserted 5 rows in 1.34s
[localhost:21000] &gt; select x from numbers limit 100;
+---+
| x |
+---+
| 1 |
| 3 |
| 4 |
| 5 |
| 2 |
+---+
Returned 5 row(s) in 0.26s
[localhost:21000] &gt; select x from numbers limit 3;
+---+
| x |
+---+
| 1 |
| 3 |
| 4 |
+---+
Returned 3 row(s) in 0.27s
[localhost:21000] &gt; select x from numbers where x &gt; 2 limit 2;
+---+
| x |
+---+
| 3 |
| 4 |
+---+
Returned 2 row(s) in 0.27s</code></pre>

    <p class="p">
      For top-N and bottom-N queries, you use the <code class="ph codeph">ORDER BY</code> and <code class="ph codeph">LIMIT</code> clauses
      together:
    </p>


<pre class="pre codeblock"><code>[localhost:21000] &gt; select x as "Top 3" from numbers order by x desc limit 3;
+-------+
| top 3 |
+-------+
| 5     |
| 4     |
| 3     |
+-------+
[localhost:21000] &gt; select x as "Bottom 3" from numbers order by x limit 3;
+----------+
| bottom 3 |
+----------+
| 1        |
| 2        |
| 3        |
+----------+
</code></pre>

    <p class="p">
      You can use constant values besides integer literals as the <code class="ph codeph">LIMIT</code> argument:
    </p>


<pre class="pre codeblock"><code>-- Other expressions that yield constant integer values work too.
SELECT x FROM t1 LIMIT 1e6;                        -- Limit is one million.
SELECT x FROM t1 LIMIT length('hello world');      -- Limit is 11.
SELECT x FROM t1 LIMIT 2+2;                        -- Limit is 4.
SELECT x FROM t1 LIMIT cast(truncate(9.9) AS INT); -- Limit is 9.
</code></pre>
  </div>

<div class="related-links">
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a class="link" href="../topics/impala_select.html">SELECT Statement</a></div>
</div>
</div></body>
</html>