<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta name="copyright" content="(C) Copyright 2025" />
<meta name="DC.rights.owner" content="(C) Copyright 2025" />
<meta name="DC.Type" content="concept" />
<meta name="DC.Title" content="Fixed Issues in Apache Impala" />
<meta name="DC.Relation" scheme="URI" content="../topics/impala_release_notes.html" />
<meta name="prodname" content="Impala" />
<meta name="prodname" content="Impala" />
<meta name="version" content="Impala 3.4.x" />
<meta name="version" content="Impala 3.4.x" />
<meta name="DC.Format" content="XHTML" />
<meta name="DC.Identifier" content="fixed_issues" />
<link rel="stylesheet" type="text/css" href="../commonltr.css" />
<title>Fixed Issues in Apache Impala</title>
</head>
<body id="fixed_issues">


  <h1 class="title topictitle1" id="ariaid-title1"><span class="ph">Fixed Issues in Apache Impala</span></h1>

  

  <div class="body conbody">

    <p class="p">
      The following sections describe the major issues fixed in each Impala release.
    </p>


    <p class="p">
      For known issues that are currently unresolved, see <a class="xref" href="impala_known_issues.html#known_issues">Known Issues and Workarounds in Impala</a>.
    </p>


    <p class="p toc inpage"></p>

  </div>

  <div class="related-links">
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a class="link" href="../topics/impala_release_notes.html">Impala Release Notes</a></div>
</div>
</div><div class="topic concept nested1" aria-labelledby="ariaid-title2" id="fixed_issues_4_0_0">
    <h2 class="title topictitle2" id="ariaid-title2">Issues Fixed in <span class="keyword">Impala 4.0</span></h2>

    <div class="body conbody">
      <p class="p"> For the full list of issues closed in this release, including bug
        fixes, see the <a class="xref" href="https://impala.apache.org/docs/changelog-4.0.html" target="_blank">changelog for <span class="keyword">Impala 4.0</span></a>. </p>

    </div>

  </div>

  <div class="topic concept nested1" aria-labelledby="ariaid-title3" id="fixed_issues_3_4_0">
    <h2 class="title topictitle2" id="ariaid-title3">Issues Fixed in <span class="keyword">Impala 3.4</span></h2>

    <div class="body conbody">
      <p class="p"> For the full list of issues closed in this release, including bug
        fixes, see the <a class="xref" href="https://impala.apache.org/docs/changelog-3.4.html" target="_blank">changelog for <span class="keyword">Impala 3.4</span></a>. </p>

    </div>

  </div>

  <div class="topic concept nested1" aria-labelledby="ariaid-title4" id="fixed_issues_3_3_0">
    <h2 class="title topictitle2" id="ariaid-title4">Issues Fixed in <span class="keyword">Impala 3.3</span></h2>

    <div class="body conbody">
      <p class="p"> For the full list of issues closed in this release, including bug
        fixes, see the <a class="xref" href="https://impala.apache.org/docs/changelog-3.3.html" target="_blank">changelog for <span class="keyword">Impala 3.3</span></a>. </p>

    </div>

  </div>

  <div class="topic concept nested1" aria-labelledby="ariaid-title5" id="fixed_issues_3_2_0">
    <h2 class="title topictitle2" id="ariaid-title5">Issues Fixed in <span class="keyword">Impala 3.2</span></h2>

    <div class="body conbody">
      <p class="p"> For the full list of issues closed in this release, including bug
        fixes, see the <a class="xref" href="https://impala.apache.org/docs/changelog-3.2.html" target="_blank">changelog for <span class="keyword">Impala 3.2</span></a>. </p>

      <p class="p">The following is a list of noteworthy issues fixed in <span class="keyword">Impala 3.2</span>: </p>

      <ul class="ul">
        <li class="li"><a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-341" target="_blank">IMPALA-341</a> - Remote profiles
          are no longer ignored by the coordinator for the queries with the
            <code class="ph codeph">LIMIT</code> clause.</li>

        <li class="li"><a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-941" target="_blank">IMPALA-941</a>- Impala supports
          fully qualified table names that start with a number.</li>

        <li class="li"><a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-1048" target="_blank">IMPALA-1048</a> - The query
          execution summary now includes the total time taken and memory
          consumed by the data sink at the root of each query fragment.</li>

        <li class="li"><a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-3323" target="_blank">IMPALA-3323</a> - Fixed the issue
          where valid impala-shell options, such as
            <code class="ph codeph">--ldap_password_cmd</code>, were unrecognized when the
            <code class="ph codeph">--config_file</code> option was specified.</li>

        <li class="li"><a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-5397" target="_blank">IMPALA-5397</a> - If a query has a
          dedicated coordinator, its end time is now set when the query releases
          its admission control resources. With no dedicated coordinator, the
          end time is set on un-registration.</li>

        <li class="li"><a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-5474" target="_blank">IMPALA-5474</a> - Fixed an issue
          where adding a trivial subquery to a query with an error turns the
          error into a warning.</li>

        <li class="li"><a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-6521" target="_blank">IMPALA-6521</a> - When set,
          experimental flags are now shown in /varz in web UI and log
          files.</li>

        <li class="li"><a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-6900" target="_blank">IMPALA-6900</a> -
            <code class="ph codeph">INVALIDATE METADATA</code> operation is no longer ignored
          when HMS is empty.</li>

        <li class="li"><a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-7446" target="_blank">IMPALA-7446</a> - Impala enables
          buffer pool garbage collection when near process memory limit to
          prevent queries from spilling to disk earlier than necessary.</li>

        <li class="li"><a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-7659" target="_blank">IMPALA-7659</a> - In
            <code class="ph codeph">COMPUTE STATS</code>, Impala counts the number of
            <code class="ph codeph">NULL</code> values in a table</li>

        <li class="li"><a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-7857" target="_blank">IMPALA-7857</a> - Logs more
          information about StateStore failure detection.</li>

        <li class="li"><a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-7928" target="_blank">IMPALA-7928</a> - To increase the
          efficiency of the HDFS file handle cache, remote reads for a
          particular file are scheduled to a consistent set of executor nodes. </li>

        <li class="li"><a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-7929" target="_blank">IMPALA-7929</a> - Impala query on
          tables created via Hive and mapped to HBase failed with an internal
          exception because the qualifier of the HBase key column is null in the
          mapped table. Impala relaxed the requirement and allows a
            <code class="ph codeph">NULL</code> qualifier.</li>

        <li class="li"><a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-7960" target="_blank">IMPALA-7960</a> - Impala now
          returns a correct result when comparing <code class="ph codeph">TIMESTAMP</code> to
          a string literal in a binary predicate where the
            <code class="ph codeph">TIMESTAMP</code> is casted to <code class="ph codeph">VARCHAR</code> of
          smaller length.</li>

        <li class="li"><a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-7961" target="_blank">IMPALA-7961</a> - Fixed an issue
          where queries running with the <code class="ph codeph">SYNC_DDL</code> query option
          can fail when the Catalog Server is under a heavy load with concurrent
          catalog operations of long-running DDLs.</li>

        <li class="li"><a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-8026" target="_blank">IMPALA-8026</a> - Impala query
          profile now reports correct row counts for all nested loop join
          modes.</li>

        <li class="li"><a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-8061" target="_blank">IMPALA-8061</a> - Impala correctly
            initializes<code class="ph codeph"> S3_ACCESS_VALIDATED</code> variable to zero
          when <code class="ph codeph">TARGET_FILESYSTEM=s3</code>.</li>

        <li class="li"><a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-8154" target="_blank">IMPALA-8154</a> - Disabled the
            Kerberos<code class="ph codeph"> auth_to_local</code> setting to prevent
          connection issues between <code class="ph codeph">impalads</code>.</li>

        <li class="li"><a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-8188" target="_blank">IMPALA-8188</a> - Impala now
          correctly detects an NVME device name and handles it.</li>

        <li class="li"><a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-8245" target="_blank">IMPALA-8245</a> - Added hostname
          to the timeout error message to enable the user to easily identify the
          host which has reached a bad connection state with the HDFS
          NameNode.</li>

        <li class="li"><a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-8254" target="_blank">IMPALA-8254</a> - <code class="ph codeph">COMPUTE
            STATS</code> failed if <code class="ph codeph">COMPRESSION_CODEC</code> is
          set.</li>

      </ul>

    </div>

  </div>

  
  <div class="topic concept nested1" aria-labelledby="ariaid-title6" id="fixed_issues_3_1_0">
    <h2 class="title topictitle2" id="ariaid-title6">Issues Fixed in <span class="keyword">Impala 3.1</span></h2>

    <div class="body conbody">
      <p class="p"> For the full list of issues closed in this release, including bug
        fixes, see the <a class="xref" href="https://impala.apache.org/docs/changelog-3.1.html" target="_blank">changelog for <span class="keyword">Impala 3.1</span></a>. </p>

    </div>

  </div>

  
  <div class="topic concept nested1" aria-labelledby="ariaid-title7" id="fixed_issues_3_0_0">
    <h2 class="title topictitle2" id="ariaid-title7">Issues Fixed in <span class="keyword">Impala 3.0</span></h2>

    <div class="body conbody">
      <p class="p"> For the full list of issues closed in this release, including bug
        fixes, see the <a class="xref" href="https://impala.apache.org/docs/changelog-3.0.html" target="_blank">changelog for <span class="keyword">Impala 3.0</span></a>. </p>

    </div>

  </div>




  <div class="topic concept nested1" aria-labelledby="ariaid-title8" id="fixed_issues_2_12_0">

    <h2 class="title topictitle2" id="ariaid-title8">Issues Fixed in <span class="keyword">Impala 2.12</span></h2>


    <div class="body conbody">

      <p class="p">
        For the full list of issues closed in this release, including bug fixes,
        see the <a class="xref" href="https://impala.apache.org/docs/changelog-2.12.html" target="_blank">changelog for <span class="keyword">Impala 2.12</span></a>.
      </p>


    </div>

  </div>




  <div class="topic concept nested1" aria-labelledby="ariaid-title9" id="fixed_issues_2_11_0">

    <h2 class="title topictitle2" id="ariaid-title9">Issues Fixed in <span class="keyword">Impala 2.11</span></h2>


    <div class="body conbody">

      <p class="p">
        For the full list of issues closed in this release, including bug fixes,
        see the <a class="xref" href="https://impala.apache.org/docs/changelog-2.11.html" target="_blank">changelog for <span class="keyword">Impala 2.11</span></a>.
      </p>


    </div>

  </div>




  <div class="topic concept nested1" aria-labelledby="ariaid-title10" id="fixed_issues_2100">

    <h2 class="title topictitle2" id="ariaid-title10">Issues Fixed in <span class="keyword">Impala 2.10</span></h2>


    <div class="body conbody">

      <p class="p">
        For the full list of issues closed in this release, including bug fixes,
        see the <a class="xref" href="https://impala.apache.org/docs/changelog-2.10.html" target="_blank">changelog for <span class="keyword">Impala 2.10</span></a>.
      </p>


    </div>

  </div>




  <div class="topic concept nested1" aria-labelledby="ariaid-title11" id="fixed_issues_290">

    <h2 class="title topictitle2" id="ariaid-title11">Issues Fixed in <span class="keyword">Impala 2.9.0</span></h2>


    <div class="body conbody">

      <p class="p">
        For the full list of issues closed in this release, including bug fixes,
        see the <a class="xref" href="https://impala.apache.org/docs/changelog-2.9.html" target="_blank">changelog for <span class="keyword">Impala 2.9</span></a>.
      </p>


    </div>

  </div>




  <div class="topic concept nested1" aria-labelledby="ariaid-title12" id="fixed_issues_280">

    <h2 class="title topictitle2" id="ariaid-title12">Issues Fixed in <span class="keyword">Impala 2.8.0</span></h2>


    <div class="body conbody">

      <p class="p">
        For the full list of Impala fixed issues in <span class="keyword">Impala 2.8</span>, see
        <a class="xref" href="https://issues.apache.org/jira/issues/?jql=type%20%3D%20bug%20and%20project%20%3D%20IMPALA%20AND%20resolution%20%3D%20fixed%20AND%20affectedVersion%20!%3D%20%22Impala%202.8.0%22%20AND%20fixVersion%20%3D%20%22Impala%202.8.0%22%20and%20not%20labels%20%3D%20broken-build%20order%20by%20priority%20desc" target="_blank">this report in the Impala JIRA tracker</a>.
      </p>


    </div>

  </div>




  <div class="topic concept nested1" aria-labelledby="ariaid-title13" id="fixed_issues_270">

    <h2 class="title topictitle2" id="ariaid-title13">Issues Fixed in <span class="keyword">Impala 2.7.0</span></h2>


    <div class="body conbody">

      <p class="p">

        For the full list of Impala fixed issues in Impala 2.7.0, see
        <a class="xref" href="https://issues.apache.org/jira/issues/?jql=%20type%20%3D%20bug%20and%20project%20%3D%20IMPALA%20AND%20resolution%20%3D%20fixed%20AND%20affectedVersion%20!%3D%20%22Impala%202.7.0%22%20AND%20fixVersion%20%3D%20%22Impala%202.7.0%22%20and%20not%20labels%20%3D%20broken-build%20order%20by%20priority%20desc" target="_blank">this report in the Impala JIRA tracker</a>.
      </p>


    </div>

  </div>




  <div class="topic concept nested1" aria-labelledby="ariaid-title14" id="fixed_issues_263">
    <h2 class="title topictitle2" id="ariaid-title14">Issues Fixed in <span class="keyword">Impala 2.6.3</span></h2>

    <div class="body conbody">
      <p class="p"></p>

    </div>

  </div>


  <div class="topic concept nested1" aria-labelledby="ariaid-title15" id="fixed_issues_262">
    <h2 class="title topictitle2" id="ariaid-title15">Issues Fixed in <span class="keyword">Impala 2.6.2</span></h2>

    <div class="body conbody">
      <p class="p"></p>

    </div>

  </div>


  <div class="topic concept nested1" aria-labelledby="ariaid-title16" id="fixed_issues_260">

    <h2 class="title topictitle2" id="ariaid-title16">Issues Fixed in <span class="keyword">Impala 2.6.0</span></h2>


    <div class="body conbody">

      <p class="p">
        The following list contains the most critical fixed issues
        (<code class="ph codeph">priority='Blocker'</code>) from the JIRA system.
        For the full list of fixed issues in <span class="keyword">Impala 2.6.0</span>, see
        <a class="xref" href="https://issues.apache.org/jira/issues/?jql=%20type%20%3D%20bug%20and%20project%20%3D%20IMPALA%20AND%20resolution%20%3D%20fixed%20AND%20affectedVersion%20!%3D%20%22Impala%202.6.0%22%20AND%20fixVersion%20%3D%20%22Impala%202.6.0%22%20and%20not%20labels%20%3D%20broken-build%20order%20by%20priority%20desc" target="_blank">this report in the Impala JIRA tracker</a>.
      </p>


    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title17" id="IMPALA-3385">
      <h3 class="title topictitle3" id="ariaid-title17">RuntimeState::error_log_ crashes</h3>

      <div class="body conbody">
      <p class="p">
        A crash could occur, with stack trace pointing to <code class="ph codeph">impala::RuntimeState::ErrorLog</code>.
      </p>

      <p class="p"><strong class="ph b">Bug:</strong> <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-3385" target="_blank">IMPALA-3385</a></p>

      <p class="p"><strong class="ph b">Severity:</strong> High</p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title18" id="IMPALA-3378">
      <h3 class="title topictitle3" id="ariaid-title18">HiveUdfCall::Open() produces unsynchronized access to JniUtil::global_refs_ vector</h3>

      <div class="body conbody">
      <p class="p">
        A crash could occur because of contention between multiple calls to Java UDFs.
      </p>

      <p class="p"><strong class="ph b">Bug:</strong> <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-3378" target="_blank">IMPALA-3378</a></p>

      <p class="p"><strong class="ph b">Severity:</strong> High</p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title19" id="IMPALA-3379">
      <h3 class="title topictitle3" id="ariaid-title19">HBaseTableWriter::CreatePutList() produces unsynchronized access to JniUtil::global_refs_ vector</h3>

      <div class="body conbody">
      <p class="p">
        A crash could occur because of contention between multiple concurrent statements writing to HBase.
      </p>

      <p class="p"><strong class="ph b">Bug:</strong> <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-3379" target="_blank">IMPALA-3379</a></p>

      <p class="p"><strong class="ph b">Severity:</strong> High</p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title20" id="IMPALA-3317">
      <h3 class="title topictitle3" id="ariaid-title20">Stress test failure: sorter.cc:745] Check failed: i == 0 (1 vs. 0) </h3>

      <div class="body conbody">
      <p class="p">
        A crash or wrong results could occur if the spill-to-disk mechanism encountered a zero-length string at
        the very end of a data block.
      </p>

      <p class="p"><strong class="ph b">Bug:</strong> <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-3317" target="_blank">IMPALA-3317</a></p>

      <p class="p"><strong class="ph b">Severity:</strong> High</p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title21" id="IMPALA-3311">
      <h3 class="title topictitle3" id="ariaid-title21">String data coming out of agg can be corrupted by blocking operators</h3>

      <div class="body conbody">
      <p class="p">
        If a query plan contains an aggregation node producing string values anywhere within a subplan
        (that is,if in the SQL statement, the aggregate function appears within an inline view over a collection column),
        the results of the aggregation may be incorrect.
      </p>

      <p class="p"><strong class="ph b">Bug:</strong> <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-3311" target="_blank">IMPALA-3311</a></p>

      <p class="p"><strong class="ph b">Severity:</strong> High</p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title22" id="IMPALA-3269">
      <h3 class="title topictitle3" id="ariaid-title22">CTAS with subquery throws AuthzException</h3>

      <div class="body conbody">
      <p class="p">
        A <code class="ph codeph">CREATE TABLE AS SELECT</code> operation could fail with an authorization error,
        due to a slight difference in the privilege checking for the CTAS operation.
      </p>

      <p class="p"><strong class="ph b">Bug:</strong> <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-3269" target="_blank">IMPALA-3269</a></p>

      <p class="p"><strong class="ph b">Severity:</strong> High</p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title23" id="IMPALA-3237">
      <h3 class="title topictitle3" id="ariaid-title23">Crash on inserting into table with binary and parquet</h3>

      <div class="body conbody">
      <p class="p">
        Impala incorrectly allowed <code class="ph codeph">BINARY</code> to be specified as a column type,
        resulting in a crash during a write to a Parquet table with a column of that type.
      </p>

      <p class="p"><strong class="ph b">Bug:</strong> <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-3237" target="_blank">IMPALA-3237</a></p>

      <p class="p"><strong class="ph b">Severity:</strong> High</p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title24" id="IMPALA-3105">
      <h3 class="title topictitle3" id="ariaid-title24">RowBatch::MaxTupleBufferSize() calculation incorrect, may lead to memory corruption</h3>

      <div class="body conbody">
      <p class="p">
        A crash could occur while querying tables with very large rows, for example wide tables with many
        columns or very large string values. This problem was identified in Impala 2.3, but had low
        reproducibility in subsequent releases. The fix ensures the memory allocation size is correct.
      </p>

      <p class="p"><strong class="ph b">Bug:</strong> <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-3105" target="_blank">IMPALA-3105</a></p>

      <p class="p"><strong class="ph b">Severity:</strong> High</p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title25" id="IMPALA-3494">
      <h3 class="title topictitle3" id="ariaid-title25">Thrift buffer overflows when serialize more than 3355443200 bytes in impala</h3>

      <div class="body conbody">
      <p class="p">
        A very large memory allocation within the <span class="keyword cmdname">catalogd</span> daemon could exceed an internal Thrift limit,
        causing a crash.
      </p>

      <p class="p"><strong class="ph b">Bug:</strong> <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-3494" target="_blank">IMPALA-3494</a></p>

      <p class="p"><strong class="ph b">Severity:</strong> High</p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title26" id="IMPALA-3314">
      <h3 class="title topictitle3" id="ariaid-title26">Altering table partition's storage format is not working and crashing the daemon</h3>

      <div class="body conbody">
      <p class="p">
        If a partitioned table used a file format other than Avro, and the file format of an individual partition
        was changed to Avro, subsequent queries could encounter a crash.
      </p>

      <p class="p"><strong class="ph b">Bug:</strong> <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-3314" target="_blank">IMPALA-3314</a></p>

      <p class="p"><strong class="ph b">Severity:</strong> High</p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title27" id="IMPALA-3798">
      <h3 class="title topictitle3" id="ariaid-title27">Race condition may cause scanners to spin with runtime filters on Avro or Sequence files</h3>

      <div class="body conbody">
      <p class="p">
        A timing problem during runtime filter processing could cause queries against Avro or SequenceFile tables
        to hang.
      </p>

      <p class="p"><strong class="ph b">Bug:</strong> <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-3798" target="_blank">IMPALA-3798</a></p>

      <p class="p"><strong class="ph b">Severity:</strong> High</p>

      </div>

    </div>


  </div>



  <div class="topic concept nested1" aria-labelledby="ariaid-title28" id="fixed_issues_254">
    <h2 class="title topictitle2" id="ariaid-title28">Issues Fixed in <span class="keyword">Impala 2.5.4</span></h2>

    <div class="body conbody">
      <p class="p"></p>

    </div>

  </div>


  <div class="topic concept nested1" aria-labelledby="ariaid-title29" id="fixed_issues_252">
    <h2 class="title topictitle2" id="ariaid-title29">Issues Fixed in <span class="keyword">Impala 2.5.2</span></h2>

    <div class="body conbody">
      <p class="p"></p>

    </div>

  </div>


  <div class="topic concept nested1" aria-labelledby="ariaid-title30" id="fixed_issues_251">

    <h2 class="title topictitle2" id="ariaid-title30">Issues Fixed in <span class="keyword">Impala 2.5.1</span></h2>


    <div class="body conbody">
      <p class="p"></p>

    </div>


  </div>


  <div class="topic concept nested1" aria-labelledby="ariaid-title31" id="fixed_issues_250">

    <h2 class="title topictitle2" id="ariaid-title31">Issues Fixed in <span class="keyword">Impala 2.5.0</span></h2>


    <div class="body conbody">

      <p class="p">
        The following list contains the most critical issues (<code class="ph codeph">priority='Blocker'</code>) from the JIRA system.
        For the full list of fixed issues in <span class="keyword">Impala 2.5</span>, see
        <a class="xref" href="https://issues.apache.org/jira/issues/?jql=%20type%20%3D%20bug%20and%20project%20%3D%20IMPALA%20AND%20resolution%20%3D%20fixed%20AND%20affectedVersion%20!%3D%20%22Impala%202.5.0%22%20AND%20fixVersion%20%3D%20%22Impala%202.5.0%22%20and%20not%20labels%20%3D%20broken-build%20order%20by%20priority%20desc" target="_blank">this report in the Impala JIRA tracker</a>.
      </p>


    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title32" id="IMPALA-2683">
      <h3 class="title topictitle3" id="ariaid-title32">Stress test hit assert in LLVM: external function could not be resolved</h3>

      <div class="body conbody">
<p class="p"><strong class="ph b">Bug:</strong> <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-2683" target="_blank">IMPALA-2683</a></p>

<p class="p">The stress test was running a build with the TPC-H, TPC-DS, and TPC-H nested queries with scale factor 3.</p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title33" id="IMPALA-2365">
      <h3 class="title topictitle3" id="ariaid-title33">Impalad is crashing if udf jar is not available in hdfs location for first time</h3>

      <div class="body conbody">
        <p class="p"><strong class="ph b">Bug:</strong> <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-2365" target="_blank">IMPALA-2365</a></p>

        <p class="p">
          If a UDF JAR was not available in the HDFS location specified in the <code class="ph codeph">CREATE FUNCTION</code> statement,
          the <span class="keyword cmdname">impalad</span> daemon could crash.
        </p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title34" id="IMPALA-2535-570">
      <h3 class="title topictitle3" id="ariaid-title34">PAGG hits mem_limit when switching to I/O buffers</h3>

      <div class="body conbody">
      <p class="p"><strong class="ph b">Bug:</strong> <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-2535" target="_blank">IMPALA-2535</a></p>

      <p class="p">
        A join query could fail with an out-of-memory error despite the apparent presence of sufficient memory.
        The cause was the internal ordering of operations that could cause a later phase of the query to
        allocate memory required by an earlier phase of the query. The workaround was to either increase
        or decrease the <code class="ph codeph">MEM_LIMIT</code> query option, because the issue would only occur for a specific
        combination of memory limit and data volume.
      </p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title35" id="IMPALA-2643-570">
      <h3 class="title topictitle3" id="ariaid-title35">Prevent migrating incorrectly inferred identity predicates into inline views</h3>

      <div class="body conbody">
      <p class="p"><strong class="ph b">Bug:</strong> <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-2643" target="_blank">IMPALA-2643</a></p>

      <p class="p">
        Referring to the same column twice in a view definition could cause the view to omit
        rows where that column contained a <code class="ph codeph">NULL</code> value. This could cause
        incorrect results due to an inaccurate <code class="ph codeph">COUNT(*)</code> value or rows missing
        from the result set.
      </p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title36" id="IMPALA-1459-570">
      <h3 class="title topictitle3" id="ariaid-title36">Fix migration/assignment of On-clause predicates inside inline views</h3>

      <div class="body conbody">
      <p class="p"><strong class="ph b">Bug:</strong> <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-1459" target="_blank">IMPALA-1459</a></p>

      <p class="p">
        Some combinations of <code class="ph codeph">ON</code> clauses in join queries could result in comparisons
        being applied at the wrong stage of query processing, leading to incorrect results.
        Wrong predicate assignment could happen under the following conditions:
      </p>

      <ul class="ul">
        <li class="li">
          The query includes an inline view that contains an outer join.
        </li>

        <li class="li">
          That inline view is joined with another table in the enclosing query block.
        </li>

        <li class="li">
          That join has an <code class="ph codeph">ON</code> clause containing a predicate that
          only references columns originating from the outer-joined tables inside the inline view.
        </li>

      </ul>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title37" id="IMPALA-2093">
      <h3 class="title topictitle3" id="ariaid-title37">Wrong plan of NOT IN aggregate subquery when a constant is used in subquery predicate</h3>

      <div class="body conbody">
        <p class="p"><strong class="ph b">Bug:</strong> <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-2093" target="_blank">IMPALA-2093</a></p>

        <p class="p">
          <code class="ph codeph">IN</code> subqueries might return wrong results if the left-hand side of the <code class="ph codeph">IN</code> is a constant.
          For example:
        </p>

<pre class="pre codeblock"><code>
select * from alltypestiny t1
  where 10 not in (select sum(int_col) from alltypestiny);
</code></pre>
      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title38" id="IMPALA-2940">
      <h3 class="title topictitle3" id="ariaid-title38">Parquet DictDecoders accumulate throughout query</h3>

      <div class="body conbody">
        <p class="p"><strong class="ph b">Bug:</strong> <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-2940" target="_blank">IMPALA-2940</a></p>

        <p class="p">
          Parquet dictionary decoders can accumulate throughout query execution, leading to excessive memory usage. One decoder is created per-column per-split.
        </p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title39" id="IMPALA-3056">
      <h3 class="title topictitle3" id="ariaid-title39">Planner doesn't set the has_local_target field correctly</h3>

      <div class="body conbody">
<p class="p"><strong class="ph b">Bug:</strong> <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-3056" target="_blank">IMPALA-3056</a></p>


      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title40" id="IMPALA-2742">
      <h3 class="title topictitle3" id="ariaid-title40">MemPool allocation growth behavior</h3>

      <div class="body conbody">
        <p class="p"><strong class="ph b">Bug:</strong> <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-2742" target="_blank">IMPALA-2742</a></p>

        <p class="p">
          Currently, the MemPool would always double the size of the last allocation.
          This can lead to bad behavior if the MemPool transferred the ownership of all its data
          except the last chunk. In the next allocation, the next allocated chunk would double
          the size of this large chunk, which can be undesirable.
        </p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title41" id="IMPALA-3035">
      <h3 class="title topictitle3" id="ariaid-title41">Drop partition operations don't follow the catalog's locking protocol</h3>

      <div class="body conbody">
        <p class="p"><strong class="ph b">Bug:</strong> <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-3035" target="_blank">IMPALA-3035</a></p>

        <p class="p">
          The <code class="ph codeph">CatalogOpExecutor.alterTableDropPartition()</code> function violates
          the locking protocol used in the catalog that requires <code class="ph codeph">catalogLock_</code>
          to be acquired before any table-level lock. That may cause deadlocks when <code class="ph codeph">ALTER TABLE DROP PARTITION</code>
          is executed concurrently with other DDL operations.
        </p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title42" id="IMPALA-2215">
      <h3 class="title topictitle3" id="ariaid-title42">HAVING clause without aggregation not applied properly</h3>

      <div class="body conbody">
        <p class="p"><strong class="ph b">Bug:</strong> <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-2215" target="_blank">IMPALA-2215</a></p>

        <p class="p">
          A query with a <code class="ph codeph">HAVING</code> clause but no <code class="ph codeph">GROUP BY</code> clause was not being rejected,
          despite being invalid syntax. For example:
        </p>


<pre class="pre codeblock"><code>
select case when 1=1 then 'didit' end as c1 from (select 1 as one) a having 1!=1;
</code></pre>
      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title43" id="IMPALA-2914">
      <h3 class="title topictitle3" id="ariaid-title43">Hit DCHECK Check failed: HasDateOrTime()</h3>

      <div class="body conbody">
        <p class="p"><strong class="ph b">Bug:</strong> <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-2914" target="_blank">IMPALA-2914</a></p>

        <p class="p">
          <code class="ph codeph">TimestampValue::ToTimestampVal()</code> requires a valid <code class="ph codeph">TimestampValue</code> as input.
          This requirement was not enforced in some places, leading to serious errors.
        </p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title44" id="IMPALA-2986">
      <h3 class="title topictitle3" id="ariaid-title44">Aggregation spill loop gives up too early leading to mem limit exceeded errors</h3>

      <div class="body conbody">
        <p class="p"><strong class="ph b">Bug:</strong> <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-2986" target="_blank">IMPALA-2986</a></p>

        <p class="p">
          An aggregation query could fail with an out-of-memory error, despite sufficient memory being reported as available.
        </p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title45" id="IMPALA-2592">
      <h3 class="title topictitle3" id="ariaid-title45">DataStreamSender::Channel::CloseInternal() does not close the channel on an error.</h3>

      <div class="body conbody">
        <p class="p"><strong class="ph b">Bug:</strong> <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-2592" target="_blank">IMPALA-2592</a></p>

        <p class="p">
          Some queries do not close an internal communication channel on an error.
          This will cause the node on the other side of the channel to wait indefinitely, causing the query to hang.
          For example, this issue could happen on a Kerberos-enabled system if the credential cache was outdated.
          Although the affected query hangs, the <span class="keyword cmdname">impalad</span> daemons continue processing other queries.
        </p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title46" id="IMPALA-2184">
      <h3 class="title topictitle3" id="ariaid-title46">Codegen does not catch exceptions in FROM_UNIXTIME()</h3>

      <div class="body conbody">
        <p class="p"><strong class="ph b">Bug:</strong> <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-2184" target="_blank">IMPALA-2184</a></p>

        <p class="p">
          Querying for the min or max value of a timestamp cast from a bigint via <code class="ph codeph">from_unixtime()</code>
          fails silently and crashes instances of <span class="keyword cmdname">impalad</span> when the input includes a value outside of the valid range.
        </p>


        <p class="p"><strong class="ph b">Workaround:</strong> Disable native code generation with:</p>

<pre class="pre codeblock"><code>
SET disable_codegen=true;
</code></pre>
      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title47" id="IMPALA-2788">
      <h3 class="title topictitle3" id="ariaid-title47">Impala returns wrong result for function 'conv(bigint, from_base, to_base)'</h3>

      <div class="body conbody">
        <p class="p"><strong class="ph b">Bug:</strong> <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-2788" target="_blank">IMPALA-2788</a></p>

        <p class="p">
          Impala returns wrong result for function <code class="ph codeph">conv()</code>.
          Function <code class="ph codeph">conv(bigint, from_base, to_base)</code> returns an correct result,
          while <code class="ph codeph">conv(string, from_base, to_base)</code> returns the correct value.
          For example:
        </p>


<pre class="pre codeblock"><code>

select 2061013007, conv(2061013007, 16, 10), conv('2061013007', 16, 10);
+------------+--------------------------+----------------------------+
| 2061013007 | conv(2061013007, 16, 10) | conv('2061013007', 16, 10) |
+------------+--------------------------+----------------------------+
| 2061013007 | 1627467783               | 139066421255               |
+------------+--------------------------+----------------------------+
Fetched 1 row(s) in 0.65s

select 2061013007, conv(cast(2061013007 as bigint), 16, 10), conv('2061013007', 16, 10);
+------------+------------------------------------------+----------------------------+
| 2061013007 | conv(cast(2061013007 as bigint), 16, 10) | conv('2061013007', 16, 10) |
+------------+------------------------------------------+----------------------------+
| 2061013007 | 1627467783                               | 139066421255               |
+------------+------------------------------------------+----------------------------+

select 2061013007, conv(cast(2061013007 as string), 16, 10), conv('2061013007', 16, 10);
+------------+------------------------------------------+----------------------------+
| 2061013007 | conv(cast(2061013007 as string), 16, 10) | conv('2061013007', 16, 10) |
+------------+------------------------------------------+----------------------------+
| 2061013007 | 139066421255                             | 139066421255               |
+------------+------------------------------------------+----------------------------+

select 2061013007, conv(cast(cast(2061013007 as decimal(20,0)) as bigint), 16, 10), conv('2061013007', 16, 10);
+------------+-----------------------------------------------------------------+----------------------------+
| 2061013007 | conv(cast(cast(2061013007 as decimal(20,0)) as bigint), 16, 10) | conv('2061013007', 16, 10) |
+------------+-----------------------------------------------------------------+----------------------------+
| 2061013007 | 1627467783                                                      | 139066421255               |
+------------+-----------------------------------------------------------------+----------------------------+

</code></pre>

        <p class="p"><strong class="ph b">Workaround:</strong>
          Cast the value to string and use <code class="ph codeph">conv(string, from_base, to_base)</code> for conversion.
        </p>

      </div>

    </div>




  </div>




  <div class="topic concept nested1" aria-labelledby="ariaid-title48" id="fixed_issues_241">

    <h2 class="title topictitle2" id="ariaid-title48">Issues Fixed in <span class="keyword">Impala 2.4.1</span></h2>


    <div class="body conbody">
      <p class="p">
      </p>

    </div>


  </div>


  <div class="topic concept nested1" aria-labelledby="ariaid-title49" id="fixed_issues_240">

    <h2 class="title topictitle2" id="ariaid-title49">Issues Fixed in <span class="keyword">Impala 2.4.0</span></h2>


    <div class="body conbody">

      <p class="p">
        The set of fixes for Impala in <span class="keyword">Impala 2.4.0</span> is the same as
        in <span class="keyword">Impala 2.3.2</span>.
        
      </p>


    </div>


  </div>




  <div class="topic concept nested1" aria-labelledby="ariaid-title50" id="fixed_issues_234">

    <h2 class="title topictitle2" id="ariaid-title50">Issues Fixed in <span class="keyword">Impala 2.3.4</span></h2>


    <div class="body conbody">
      <p class="p"></p>

    </div>


  </div>


  <div class="topic concept nested1" aria-labelledby="ariaid-title51" id="fixed_issues_232">

    <h2 class="title topictitle2" id="ariaid-title51">Issues Fixed in <span class="keyword">Impala 2.3.2</span></h2>


    <div class="body conbody">

      <p class="p">
        This section lists the most serious or frequently encountered customer
        issues fixed in <span class="keyword">Impala 2.3.2</span>.
      </p>


    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title52" id="IMPALA-2829">
      <h3 class="title topictitle3" id="ariaid-title52">SEGV in AnalyticEvalNode touching NULL input_stream_</h3>

      <div class="body conbody">
      <p class="p">
        A query involving an analytic function could encounter a serious error.
        This issue was encountered infrequently, depending upon specific combinations
        of queries and data.
      </p>

      <p class="p"><strong class="ph b">Bug:</strong> <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-2829" target="_blank">IMPALA-2829</a></p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title53" id="IMPALA-2722">
      <h3 class="title topictitle3" id="ariaid-title53">Free local allocations per row batch in non-partitioned AGG and HJ</h3>

      <div class="body conbody">
      <p class="p">
        An outer join query could fail unexpectedly with an out-of-memory error
        when the <span class="q">"spill to disk"</span> mechanism was turned off.
      </p>

      <p class="p"><strong class="ph b">Bug:</strong> <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-2722" target="_blank">IMPALA-2722</a></p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title54" id="IMPALA-2612">
      
      <h3 class="title topictitle3" id="ariaid-title54">Free local allocations once for every row batch when building hash tables</h3>

      <div class="body conbody">
      <p class="p">
        A join query could encounter a serious error due to an internal failure to allocate memory, which
        resulted in dereferencing a <code class="ph codeph">NULL</code> pointer.
      </p>

      <p class="p"><strong class="ph b">Bug:</strong> <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-2612" target="_blank">IMPALA-2612</a></p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title55" id="IMPALA-2643">
      <h3 class="title topictitle3" id="ariaid-title55">Prevent migrating incorrectly inferred identity predicates into inline views</h3>

      <div class="body conbody">
      <p class="p">
        Referring to the same column twice in a view definition could cause the view to omit
        rows where that column contained a <code class="ph codeph">NULL</code> value. This could cause
        incorrect results due to an inaccurate <code class="ph codeph">COUNT(*)</code> value or rows missing
        from the result set.
      </p>

      <p class="p"><strong class="ph b">Bug:</strong> <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-2643" target="_blank">IMPALA-2643</a></p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title56" id="IMPALA-2695">
      <h3 class="title topictitle3" id="ariaid-title56">Fix GRANTs on URIs with uppercase letters</h3>

      <div class="body conbody">
      <p class="p">
        A <code class="ph codeph">GRANT</code> statement for a URI could be ineffective if the URI
        contained uppercase letters, for example in an uppercase directory name.
        Subsequent statements, such as <code class="ph codeph">CREATE EXTERNAL TABLE</code>
        with a <code class="ph codeph">LOCATION</code> clause, could fail with an authorization exception.
      </p>

      <p class="p"><strong class="ph b">Bug:</strong> <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-2695" target="_blank">IMPALA-2695</a></p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="IMPALA-2664-552__IMPALA-2648-552" id="IMPALA-2664-552">
      <h3 class="title topictitle3" id="IMPALA-2664-552__IMPALA-2648-552">Avoid sending large partition stats objects over thrift</h3>

      <div class="body conbody">
      <p class="p">
        The <span class="keyword cmdname">catalogd</span> daemon could encounter a serious error
        when loading the incremental statistics metadata for tables with large
        numbers of partitions and columns. The problem occurred when the
        internal representation of metadata for the table exceeded 2
        GB, for example in a table with 20K partitions and 77 columns. The fix causes a
        <code class="ph codeph">COMPUTE INCREMENTAL STATS</code> operation to fail if it
        would produce metadata that exceeded the maximum size.
      </p>

      <p class="p"><strong class="ph b">Bug:</strong> <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-2664" target="_blank">IMPALA-2664</a>,
        <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-2648" target="_blank">IMPALA-2648</a></p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title58" id="IMPALA-2226">
      <h3 class="title topictitle3" id="ariaid-title58">Throw AnalysisError if table properties are too large (for the Hive metastore)</h3>

      <div class="body conbody">
      <p class="p">
        <code class="ph codeph">CREATE TABLE</code> or <code class="ph codeph">ALTER TABLE</code> statements could fail with
        metastore database errors due to length limits on the <code class="ph codeph">SERDEPROPERTIES</code> and <code class="ph codeph">TBLPROPERTIES</code> clauses.
        (The limit on key size is 256, while the limit on value size is 4000.) The fix makes Impala handle these error conditions
        more cleanly, by detecting too-long values rather than passing them to the metastore database.
      </p>

      <p class="p"><strong class="ph b">Bug:</strong> <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-2226" target="_blank">IMPALA-2226</a></p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title59" id="IMPALA-2273-552">
      <h3 class="title topictitle3" id="ariaid-title59">Make MAX_PAGE_HEADER_SIZE configurable</h3>

      <div class="body conbody">
      <p class="p">
        Impala could fail to access Parquet data files with page headers larger than 8 MB, which could
        occur, for example, if the minimum or maximum values for a column were long strings. The
        fix adds a configuration setting <code class="ph codeph">--max_page_header_size</code>, which you can use to
        increase the Impala size limit to a value higher than 8 MB.
      </p>

      <p class="p"><strong class="ph b">Bug:</strong> <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-2273" target="_blank">IMPALA-2273</a></p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title60" id="IMPALA-2473">
      <h3 class="title topictitle3" id="ariaid-title60">reduce scanner memory usage</h3>

      <div class="body conbody">
      <p class="p">
        Queries on Parquet tables could consume excessive memory (potentially multiple gigabytes) due to producing
        large intermediate data values while evaluating groups of rows. The workaround was to reduce the size of
        the <code class="ph codeph">NUM_SCANNER_THREADS</code> query option, the <code class="ph codeph">BATCH_SIZE</code> query option,
        or both.
      </p>

      <p class="p"><strong class="ph b">Bug:</strong> <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-2473" target="_blank">IMPALA-2473</a></p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title61" id="IMPALA-2113">
      <h3 class="title topictitle3" id="ariaid-title61">Handle error when distinct and aggregates are used with a having clause</h3>

      <div class="body conbody">
      <p class="p">
        A query that included a <code class="ph codeph">DISTINCT</code> operator and a <code class="ph codeph">HAVING</code> clause, but no
        aggregate functions or <code class="ph codeph">GROUP BY</code>, would fail with an uninformative error message.
      </p>

      <p class="p"><strong class="ph b">Bug:</strong> <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-2113" target="_blank">IMPALA-2113</a></p>

      
      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title62" id="IMPALA-2225">
      <h3 class="title topictitle3" id="ariaid-title62">Handle error when star based select item and aggregate are incorrectly used</h3>

      <div class="body conbody">
      <p class="p">
        A query that included <code class="ph codeph">*</code> in the <code class="ph codeph">SELECT</code> list, in addition to an
        aggregate function call, would fail with an uninformative message if the query had no
        <code class="ph codeph">GROUP BY</code> clause.
      </p>

      <p class="p"><strong class="ph b">Bug:</strong> <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-2225" target="_blank">IMPALA-2225</a></p>

      
      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title63" id="IMPALA-2731-552">
      <h3 class="title topictitle3" id="ariaid-title63">Refactor MemPool usage in HBase scan node</h3>

      <div class="body conbody">
      <p class="p">
        Queries involving HBase tables used substantially more memory than in earlier Impala versions.
        The problem occurred starting in Impala 2.2.8, as a result of the changes for IMPALA-2284.
        The fix for this issue involves removing a separate memory work area for HBase queries
        and reusing other memory that was already allocated.
      </p>

      <p class="p"><strong class="ph b">Bug:</strong> <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-2731" target="_blank">IMPALA-2731</a></p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title64" id="IMPALA-1459-552">
      <h3 class="title topictitle3" id="ariaid-title64">Fix migration/assignment of On-clause predicates inside inline views</h3>

      <div class="body conbody">
      <p class="p">
        Some combinations of <code class="ph codeph">ON</code> clauses in join queries could result in comparisons
        being applied at the wrong stage of query processing, leading to incorrect results.
        Wrong predicate assignment could happen under the following conditions:
      </p>

      <ul class="ul">
        <li class="li">
          The query includes an inline view that contains an outer join.
        </li>

        <li class="li">
          That inline view is joined with another table in the enclosing query block.
        </li>

        <li class="li">
          That join has an <code class="ph codeph">ON</code> clause containing a predicate that
          only references columns originating from the outer-joined tables inside the inline view.
        </li>

      </ul>

      <p class="p"><strong class="ph b">Bug:</strong> <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-1459" target="_blank">IMPALA-1459</a></p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title65" id="IMPALA-2558">
      <h3 class="title topictitle3" id="ariaid-title65">DCHECK in parquet scanner after block read error</h3>

      <div class="body conbody">
      <p class="p">
        A debug build of Impala could encounter a serious error after encountering some kinds of I/O
        errors for Parquet files. This issue only occurred in debug builds, not release builds.
      </p>

      <p class="p"><strong class="ph b">Bug:</strong> <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-2558" target="_blank">IMPALA-2558</a></p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title66" id="IMPALA-2535">
      <h3 class="title topictitle3" id="ariaid-title66">PAGG hits mem_limit when switching to I/O buffers</h3>

      <div class="body conbody">
      <p class="p">
        A join query could fail with an out-of-memory error despite the apparent presence of sufficient memory.
        The cause was the internal ordering of operations that could cause a later phase of the query to
        allocate memory required by an earlier phase of the query. The workaround was to either increase
        or decrease the <code class="ph codeph">MEM_LIMIT</code> query option, because the issue would only occur for a specific
        combination of memory limit and data volume.
      </p>

      <p class="p"><strong class="ph b">Bug:</strong> <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-2535" target="_blank">IMPALA-2535</a></p>

      </div>

    </div>


    
    
    <div class="topic concept nested2" aria-labelledby="ariaid-title67" id="IMPALA-2559">
      <h3 class="title topictitle3" id="ariaid-title67">Fix check failed: sorter_runs_.back()-&gt;is_pinned_</h3>

      <div class="body conbody">
      <p class="p">
        A query could fail with an internal error while calculating the memory limit.
        This was an infrequent condition uncovered during stress testing.
      </p>

      <p class="p"><strong class="ph b">Bug:</strong> <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-2559" target="_blank">IMPALA-2559</a></p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title68" id="IMPALA-2614">
      <h3 class="title topictitle3" id="ariaid-title68">Don't ignore Status returned by DataStreamRecvr::CreateMerger()</h3>

      <div class="body conbody">
      <p class="p">
        A query could fail with an internal error while calculating the memory limit.
        This was an infrequent condition uncovered during stress testing.
      </p>

      <p class="p"><strong class="ph b">Bug:</strong> <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-2614" target="_blank">IMPALA-2614</a>,
      <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-2559" target="_blank">IMPALA-2559</a></p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title69" id="IMPALA-2591">
      <h3 class="title topictitle3" id="ariaid-title69">DataStreamSender::Send() does not return an error status if SendBatch() failed</h3>

      <div class="body conbody">
      
      <p class="p">
      </p>

      <p class="p"><strong class="ph b">Bug:</strong> <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-2591" target="_blank">IMPALA-2591</a></p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title70" id="IMPALA-2598">
      <h3 class="title topictitle3" id="ariaid-title70">Re-enable SSL and Kerberos on server-server</h3>

      <div class="body conbody">
      <p class="p">
        These fixes lift the restriction on using SSL encryption and Kerberos authentication together
        for internal communication between Impala components.
      </p>

      <p class="p"><strong class="ph b">Bug:</strong> <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-2598" target="_blank">IMPALA-2598</a>,
      <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-2747" target="_blank">IMPALA-2747</a></p>

      </div>

    </div>




  </div>


  <div class="topic concept nested1" aria-labelledby="ariaid-title71" id="fixed_issues_231">

    <h2 class="title topictitle2" id="ariaid-title71">Issues Fixed in <span class="keyword">Impala 2.3.1</span></h2>


    <div class="body conbody">

      <p class="p">
        The version of Impala that is included with <span class="keyword">Impala 2.3.1</span> is identical
        to <span class="keyword">Impala 2.3.0</span>. There are no new bug fixes, new features, or
        incompatible changes.
      </p>


    </div>


  </div>


  <div class="topic concept nested1" aria-labelledby="ariaid-title72" id="fixed_issues_230">

    <h2 class="title topictitle2" id="ariaid-title72">Issues Fixed in <span class="keyword">Impala 2.3.0</span></h2>


    <div class="body conbody">
      <p class="p"> This section lists the most serious or frequently encountered customer
        issues fixed in <span class="keyword">Impala 2.3</span>. Any issues already fixed in
        <span class="keyword">Impala 2.2</span> maintenance releases (up through <span class="keyword">Impala 2.2.8</span>) are also included.
        Those issues are listed under the respective <span class="keyword">Impala 2.2</span> sections and are
        not repeated here.
      </p>




    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title73" id="serious_230">
      <h3 class="title topictitle3" id="ariaid-title73">Fixes for Serious Errors</h3>

      <div class="body conbody">
      <p class="p">
        A number of issues were resolved that could result in serious errors
        when encountered. The most critical or commonly encountered are
        listed here.
      </p>

      <p class="p"><strong class="ph b">Bugs:</strong>



      <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-2168" target="_blank">IMPALA-2168</a>,
      <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-2378" target="_blank">IMPALA-2378</a>,
      <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-2369" target="_blank">IMPALA-2369</a>,
      <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-2357" target="_blank">IMPALA-2357</a>,
      <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-2319" target="_blank">IMPALA-2319</a>,
      <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-2314" target="_blank">IMPALA-2314</a>,
      <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-2016" target="_blank">IMPALA-2016</a>
      </p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title74" id="correctness_230">
      <h3 class="title topictitle3" id="ariaid-title74">Fixes for Correctness Errors</h3>

      <div class="body conbody">
      <p class="p">
        A number of issues were resolved that could result in wrong results
        when encountered. The most critical or commonly encountered are
        listed here.
      </p>

      <p class="p"><strong class="ph b">Bugs:</strong>



      <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-2192" target="_blank">IMPALA-2192</a>,
      <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-2440" target="_blank">IMPALA-2440</a>,
      <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-2090" target="_blank">IMPALA-2090</a>,
      <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-2086" target="_blank">IMPALA-2086</a>,
      <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-1947" target="_blank">IMPALA-1947</a>,
      <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-1917" target="_blank">IMPALA-1917</a>
      </p>

      </div>

    </div>


  </div>




  <div class="topic concept nested1" aria-labelledby="ariaid-title75" id="fixed_issues_2210">

    <h2 class="title topictitle2" id="ariaid-title75">Issues Fixed in <span class="keyword">Impala 2.2.10</span></h2>


    <div class="body conbody">
      <p class="p"></p>

    </div>


  </div>


  <div class="topic concept nested1" aria-labelledby="ariaid-title76" id="fixed_issues_229">

    <h2 class="title topictitle2" id="ariaid-title76">Issues Fixed in <span class="keyword">Impala 2.2.9</span></h2>


    <div class="body conbody">

      <p class="p">
        This section lists the most frequently encountered customer issues fixed in <span class="keyword">Impala 2.2.9</span>.
      </p>


    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title77" id="IMPALA-1917">
      
      <h3 class="title topictitle3" id="ariaid-title77">Query return empty result if it contains NullLiteral in inlineview</h3>

      <div class="body conbody">
      <p class="p">
        If an inline view in a <code class="ph codeph">FROM</code> clause contained a <code class="ph codeph">NULL</code> literal,
        the result set was empty.
      </p>

      <p class="p"><strong class="ph b">Bug:</strong> <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-1917" target="_blank">IMPALA-1917</a></p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title78" id="IMPALA-2731">
      
      <h3 class="title topictitle3" id="ariaid-title78">HBase scan node uses 2-4x memory after upgrade to Impala 2.2.8</h3>

      <div class="body conbody">
      <p class="p">
        Queries involving HBase tables used substantially more memory than in earlier Impala versions.
        The problem occurred starting in Impala 2.2.8, as a result of the changes for IMPALA-2284.
        The fix for this issue involves removing a separate memory work area for HBase queries
        and reusing other memory that was already allocated.
      </p>

      <p class="p"><strong class="ph b">Bug:</strong> <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-2731" target="_blank">IMPALA-2731</a></p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title79" id="IMPALA-1459">
      <h3 class="title topictitle3" id="ariaid-title79">Fix migration/assignment of On-clause predicates inside inline views</h3>

      <div class="body conbody">
      
      <p class="p">
        Some combinations of <code class="ph codeph">ON</code> clauses in join queries could result in comparisons
        being applied at the wrong stage of query processing, leading to incorrect results.
        Wrong predicate assignment could happen under the following conditions:
      </p>

      <ul class="ul">
        <li class="li">
          The query includes an inline view that contains an outer join.
        </li>

        <li class="li">
          That inline view is joined with another table in the enclosing query block.
        </li>

        <li class="li">
          That join has an <code class="ph codeph">ON</code> clause containing a predicate that
          only references columns originating from the outer-joined tables inside the inline view.
        </li>

      </ul>

      <p class="p"><strong class="ph b">Bug:</strong> <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-1459" target="_blank">IMPALA-1459</a></p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title80" id="IMPALA-2446">
      <h3 class="title topictitle3" id="ariaid-title80">Fix wrong predicate assignment in outer joins</h3>

      <div class="body conbody">
      <p class="p">
        The join predicate for an <code class="ph codeph">OUTER JOIN</code> clause could be applied at the wrong stage
        of query processing, leading to incorrect results.
      </p>

      <p class="p"><strong class="ph b">Bug:</strong> <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-2446" target="_blank">IMPALA-2446</a></p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title81" id="IMPALA-2648">
      <h3 class="title topictitle3" id="ariaid-title81">Avoid sending large partition stats objects over thrift</h3>

      <div class="body conbody">
      <p class="p"> The <span class="keyword cmdname">catalogd</span> daemon could encounter a serious error when loading the
          incremental statistics metadata for tables with large numbers of partitions and columns.
          The problem occurred when the internal representation of metadata for the table exceeded 2
          GB, for example in a table with 20K partitions and 77 columns. The fix causes a
            <code class="ph codeph">COMPUTE INCREMENTAL STATS</code> operation to fail if it would produce
          metadata that exceeded the maximum size. </p>

      <p class="p"><strong class="ph b">Bug:</strong> <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-2648" target="_blank">IMPALA-2648</a>,
      <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-2664" target="_blank">IMPALA-2664</a></p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title82" id="IMPALA-1675">
      <h3 class="title topictitle3" id="ariaid-title82">Avoid overflow when adding large intervals to TIMESTAMPs</h3>

      <div class="body conbody">
      <p class="p"> Adding or subtracting a large <code class="ph codeph">INTERVAL</code> value to a
            <code class="ph codeph">TIMESTAMP</code> value could produce an incorrect result, with the value
          wrapping instead of returning an out-of-range error. </p>

      <p class="p"><strong class="ph b">Bug:</strong> <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-1675" target="_blank">IMPALA-1675</a></p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title83" id="IMPALA-1949">
      <h3 class="title topictitle3" id="ariaid-title83">Analysis exception when a binary operator contains an IN operator with values</h3>

      <div class="body conbody">
      <p class="p">
        An <code class="ph codeph">IN</code> operator with literal values could cause a statement to fail if used
        as the argument to a binary operator, such as an equality test for a <code class="ph codeph">BOOLEAN</code> value.
      </p>

      <p class="p"><strong class="ph b">Bug:</strong> <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-1949" target="_blank">IMPALA-1949</a></p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title84" id="IMPALA-2273">
    
      <h3 class="title topictitle3" id="ariaid-title84">Make MAX_PAGE_HEADER_SIZE configurable</h3>

      <div class="body conbody">
      <p class="p"> Impala could fail to access Parquet data files with page headers larger than 8 MB, which
          could occur, for example, if the minimum or maximum values for a column were long strings.
          The fix adds a configuration setting <code class="ph codeph">--max_page_header_size</code>, which you
          can use to increase the Impala size limit to a value higher than 8 MB. </p>

      <p class="p"><strong class="ph b">Bug:</strong> <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-2273" target="_blank">IMPALA-2273</a></p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title85" id="IMPALA-2357">
      <h3 class="title topictitle3" id="ariaid-title85">Fix spilling sorts with var-len slots that are NULL or empty.</h3>

      <div class="body conbody">
      <p class="p">
        A query that activated the spill-to-disk mechanism could fail if it contained a sort expression
        involving certain combinations of fixed-length or variable-length types.
      </p>

      <p class="p"><strong class="ph b">Bug:</strong> <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-2357" target="_blank">IMPALA-2357</a></p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title86" id="block_pin_oom">
      <h3 class="title topictitle3" id="ariaid-title86">Work-around IMPALA-2344: Fail query with OOM in case block-&gt;Pin() fails</h3>

      <div class="body conbody">
      <p class="p">
        Some queries that activated the spill-to-disk mechanism could produce a serious error
        if there was insufficient memory to set up internal work areas. Now those queries
        produce normal out-of-memory errors instead.
      </p>

      <p class="p"><strong class="ph b">Bug:</strong> <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-2344" target="_blank">IMPALA-2344</a></p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title87" id="IMPALA-2252">
      <h3 class="title topictitle3" id="ariaid-title87">Crash (likely race) tearing down BufferedBlockMgr on query failure</h3>

      <div class="body conbody">
      <p class="p">
        A serious error could occur under rare circumstances, due to a race condition while freeing memory during heavily concurrent workloads.
      </p>

      <p class="p"><strong class="ph b">Bug:</strong> <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-2252" target="_blank">IMPALA-2252</a></p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title88" id="IMPALA-1746">
      <h3 class="title topictitle3" id="ariaid-title88">QueryExecState doesn't check for query cancellation or errors</h3>

      <div class="body conbody">
      <p class="p">
        A call to <code class="ph codeph">SetError()</code> in a user-defined function (UDF) would not cause the query to fail as expected.
      </p>

      <p class="p"><strong class="ph b">Bug:</strong> <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-1746" target="_blank">IMPALA-1746</a></p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title89" id="IMPALA-2533">
      <h3 class="title topictitle3" id="ariaid-title89">Impala throws IllegalStateException when inserting data into a partition while select
        subquery group by partition columns</h3>

      <div class="body conbody">
      <p class="p">
        An <code class="ph codeph">INSERT ... SELECT</code> operation into a partitioned table could fail if the <code class="ph codeph">SELECT</code> query
        included a <code class="ph codeph">GROUP BY</code> clause referring to the partition key columns.
      </p>

      <p class="p"><strong class="ph b">Bug:</strong> <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-2533" target="_blank">IMPALA-2533</a></p>

      </div>

    </div>


  </div>


  <div class="topic concept nested1" aria-labelledby="ariaid-title90" id="fixed_issues_228">

    <h2 class="title topictitle2" id="ariaid-title90">Issues Fixed in <span class="keyword">Impala 2.2.8</span></h2>


    <div class="body conbody">

      <p class="p">
        This section lists the most frequently encountered customer issues fixed in <span class="keyword">Impala 2.2.8</span>.
      </p>


    </div>




    <div class="topic concept nested2" aria-labelledby="ariaid-title91" id="IMPALA-1136">
      <h3 class="title topictitle3" id="ariaid-title91">Impala is unable to read hive tables created with the "STORED AS AVRO" clause</h3>

      <div class="body conbody">
      <p class="p">Impala could not read Avro tables created in Hive with the <code class="ph codeph">STORED AS AVRO</code> clause.</p>

      <p class="p"><strong class="ph b">Bug:</strong> <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-1136" target="_blank">IMPALA-1136</a>,
      <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-2161" target="_blank">IMPALA-2161</a></p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title92" id="IMPALA-2213">
      <h3 class="title topictitle3" id="ariaid-title92">make Parquet scanner fail query if the file size metadata is stale</h3>

      <div class="body conbody">
      <p class="p">If a Parquet file in HDFS was overwritten by a smaller file, Impala could encounter a serious error.
      Issuing a <code class="ph codeph">INVALIDATE METADATA</code> statement before a subsequent query would avoid the error.
      The fix allows Impala to handle such inconsistencies in Parquet file length cleanly regardless of whether the
      table metadata is up-to-date.</p>

      <p class="p"><strong class="ph b">Bug:</strong> <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-2213" target="_blank">IMPALA-2213</a></p>

      </div>

    </div>


     <div class="topic concept nested2" aria-labelledby="ariaid-title93" id="IMPALA-2249">
      <h3 class="title topictitle3" id="ariaid-title93">Avoid allocating StringBuffer &gt; 1GB in ScannerContext::Stream::GetBytesInternal()</h3>

      <div class="body conbody">
      <p class="p">Impala could encounter a serious error when reading compressed text files larger than 1 GB. The fix causes Impala
      to issue an error message instead in this case.</p>

      <p class="p"><strong class="ph b">Bug:</strong> <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-2249" target="_blank">IMPALA-2249</a></p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title94" id="IMPALA-2284">
      <h3 class="title topictitle3" id="ariaid-title94">Disallow long (1&lt;&lt;30) strings in group_concat()</h3>

      <div class="body conbody">
      <p class="p">A query using the <code class="ph codeph">group_concat()</code> function could encounter a serious error if the returned string value was larger than 1 GB.
      Now the query fails with an error message in this case.</p>

      <p class="p"><strong class="ph b">Bug:</strong> <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-2284" target="_blank">IMPALA-2284</a></p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title95" id="IMPALA-2270">
      <h3 class="title topictitle3" id="ariaid-title95">avoid FnvHash64to32 with empty inputs</h3>

      <div class="body conbody">
      <p class="p">An edge case in the algorithm used to distribute data among nodes could result in uneven distribution of work for some queries,
      with all data sent to the same node.</p>

      <p class="p"><strong class="ph b">Bug:</strong> <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-2270" target="_blank">IMPALA-2270</a></p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title96" id="IMPALA-2348">
      <h3 class="title topictitle3" id="ariaid-title96">The catalog does not close the connection to HMS during table invalidation</h3>

      <div class="body conbody">
      <p class="p">A communication error could occur between Impala and the Hive metastore database, causing Impala operations that update
      table metadata to fail.</p>

      <p class="p"><strong class="ph b">Bug:</strong> <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-2348" target="_blank">IMPALA-2348</a></p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title97" id="IMPALA-2364-548">
      <h3 class="title topictitle3" id="ariaid-title97">Wrong DCHECK in PHJ::ProcessProbeBatch</h3>

      <div class="body conbody">
      <p class="p">Certain queries could encounter a serious error if the spill-to-disk mechanism was activated.</p>

      <p class="p"><strong class="ph b">Bug:</strong> <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-2364" target="_blank">IMPALA-2364</a></p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title98" id="IMPALA-2165-548">
      <h3 class="title topictitle3" id="ariaid-title98">Avoid cardinality 0 in scan nodes of small tables and low selectivity</h3>

      <div class="body conbody">
      <p class="p">Impala could generate a suboptimal query plan for some queries involving small tables.</p>

      <p class="p"><strong class="ph b">Bug:</strong> <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-2165" target="_blank">IMPALA-2165</a></p>

      </div>

    </div>


  </div>


  <div class="topic concept nested1" aria-labelledby="ariaid-title99" id="fixed_issues_227">

    <h2 class="title topictitle2" id="ariaid-title99">Issues Fixed in <span class="keyword">Impala 2.2.7</span></h2>


    <div class="body conbody">

      <p class="p">
        This section lists the most frequently encountered customer issues fixed in <span class="keyword">Impala 2.2.7</span>.
      </p>


    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title100" id="IMPALA-1983">
      <h3 class="title topictitle3" id="ariaid-title100">Warn if table stats are potentially corrupt.</h3>

      <div class="body conbody">
      <p class="p">
        Impala warns if it detects a discrepancy in table statistics: a table considered to have zero rows even though there are data files present.
        In this case, Impala also skips query optimizations that are normally applied to very small tables.
      </p>

      <p class="p"><strong class="ph b">Bug:</strong> <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-1983" target="_blank">IMPALA-1983:</a></p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title101" id="IMPALA-2266">
      <h3 class="title topictitle3" id="ariaid-title101">Pass correct child node in 2nd phase merge aggregation.</h3>

      <div class="body conbody">
      <p class="p">A query could encounter a serious error if it included a particular combination of aggregate functions and inline views.</p>

      <p class="p"><strong class="ph b">Bug:</strong> <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-2266" target="_blank">IMPALA-2266</a></p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title102" id="IMPALA-2216">
      <h3 class="title topictitle3" id="ariaid-title102">Set the output smap of an EmptySetNode produced from an empty inline view.</h3>

      <div class="body conbody">
      <p class="p">A query could encounter a serious error if it included an inline view whose subquery had no <code class="ph codeph">FROM</code> clause.</p>

      <p class="p"><strong class="ph b">Bug:</strong> <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-2216" target="_blank">IMPALA-2216</a></p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title103" id="IMPALA-2203">
      <h3 class="title topictitle3" id="ariaid-title103">Set an InsertStmt's result exprs from the source statement's result exprs.</h3>

      <div class="body conbody">
      <p class="p">
      A <code class="ph codeph">CREATE TABLE AS SELECT</code> or <code class="ph codeph">INSERT ... SELECT</code> statement could produce
      different results than a <code class="ph codeph">SELECT</code> statement, for queries including a <code class="ph codeph">FULL JOIN</code> clause
      and including literal values in the select list.
      </p>

      <p class="p"><strong class="ph b">Bug:</strong> <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-2203" target="_blank">IMPALA-2203</a></p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title104" id="IMPALA-2088">
      <h3 class="title topictitle3" id="ariaid-title104">Fix planning of empty union operands with analytics.</h3>

      <div class="body conbody">
      <p class="p">
        A query could return incorrect results if it contained a <code class="ph codeph">UNION</code> clause,
        calls to analytic functions, and a constant expression that evaluated to <code class="ph codeph">FALSE</code>.
      </p>

      <p class="p"><strong class="ph b">Bug:</strong> <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-2088" target="_blank">IMPALA-2088</a></p>

      </div>

    </div>






    <div class="topic concept nested2" aria-labelledby="ariaid-title105" id="IMPALA-2089">
      <h3 class="title topictitle3" id="ariaid-title105">Retain eq predicates bound by grouping slots with complex grouping exprs.</h3>

      <div class="body conbody">
      <p class="p">
        A query containing an <code class="ph codeph">INNER JOIN</code> clause could return undesired rows.
        Some predicate specified in the <code class="ph codeph">ON</code> clause could be omitted from the filtering operation.
      </p>

      <p class="p"><strong class="ph b">Bug:</strong> <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-2089" target="_blank">IMPALA-2089</a></p>

      </div>

    </div>




    <div class="topic concept nested2" aria-labelledby="ariaid-title106" id="IMPALA-2199">
      <h3 class="title topictitle3" id="ariaid-title106">Row count not set for empty partition when spec is used with compute incremental stats</h3>

      <div class="body conbody">
      <p class="p">
        A <code class="ph codeph">COMPUTE INCREMENTAL STATS</code> statement could leave the row count for an emptyp partition as -1,
        rather than initializing the row count to 0. The missing statistic value could result in reduced query performance.
      </p>

      <p class="p"><strong class="ph b">Bug:</strong> <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-2199" target="_blank">IMPALA-2199</a></p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title107" id="IMPALA-1898">
      <h3 class="title topictitle3" id="ariaid-title107">Explicit aliases + ordinals analysis bug</h3>

      <div class="body conbody">
      <p class="p">
        A query could encounter a serious error if it included column aliases with the same names as table columns, and used
        ordinal numbers in an <code class="ph codeph">ORDER BY</code> or <code class="ph codeph">GROUP BY</code> clause.
      </p>

      <p class="p"><strong class="ph b">Bug:</strong> <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-1898" target="_blank">IMPALA-1898</a></p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title108" id="IMPALA-1987">
      <h3 class="title topictitle3" id="ariaid-title108">Fix TupleIsNullPredicate to return false if no tuples are nullable.</h3>

      <div class="body conbody">
      <p class="p">
        A query could return incorrect results if it included an outer join clause, inline views, and calls to functions such as <code class="ph codeph">coalesce()</code>
        that can generate <code class="ph codeph">NULL</code> values.
      </p>

      <p class="p"><strong class="ph b">Bug:</strong> <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-1987" target="_blank">IMPALA-1987</a></p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title109" id="IMPALA-2178">
      <h3 class="title topictitle3" id="ariaid-title109">fix Expr::ComputeResultsLayout() logic</h3>

      <div class="body conbody">
      <p class="p">
        A query could return incorrect results if the table contained multiple <code class="ph codeph">CHAR</code> columns with length of 2 or less,
        and the query included a <code class="ph codeph">GROUP BY</code> clause that referred to multiple such columns.
      </p>

      <p class="p"><strong class="ph b">Bug:</strong> <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-2178" target="_blank">IMPALA-2178</a></p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title110" id="IMPALA-1737">
      <h3 class="title topictitle3" id="ariaid-title110">Substitute an InsertStmt's partition key exprs with the root node's smap.</h3>

      <div class="body conbody">
      <p class="p">
        An <code class="ph codeph">INSERT</code> statement could encounter a serious error if the <code class="ph codeph">SELECT</code>
        portion called an analytic function.
      </p>

      <p class="p"><strong class="ph b">Bug:</strong> <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-1737" target="_blank">IMPALA-1737</a></p>

      </div>

    </div>


  </div>


  <div class="topic concept nested1" aria-labelledby="ariaid-title111" id="fixed_issues_225">

    <h2 class="title topictitle2" id="ariaid-title111">Issues Fixed in Impala <span class="keyword">Impala 2.2.5</span></h2>


    <div class="body conbody">

      <p class="p">
        This section lists the most frequently encountered customer issues fixed in <span class="keyword">Impala 2.2.5</span>.
      </p>


    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title112" id="IMPALA-2048">
      <h3 class="title topictitle3" id="ariaid-title112">Impala DML/DDL operations corrupt table metadata leading to Hive query failures</h3>

      <div class="body conbody">
      <p class="p">
        When the Impala <code class="ph codeph">COMPUTE STATS</code> statement was run on a partitioned Parquet table that was created in Hive, the table subsequently became inaccessible in Hive.
        The table was still accessible to Impala. Regaining access in Hive required a workaround of creating a new table. The error displayed in Hive was:
      </p>

<pre class="pre codeblock"><code>Error: Error while compiling statement: FAILED: SemanticException Class not found: org.apache.impala.hive.serde.ParquetInputFormat (state=42000,code=40000)</code></pre>
      <p class="p"><strong class="ph b">Bug:</strong> <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-2048" target="_blank">IMPALA-2048</a></p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title113" id="IMPALA-1929">
      <h3 class="title topictitle3" id="ariaid-title113">Avoiding a DCHECK of NULL hash table in spilled right joins</h3>

      
      <div class="body conbody">
      <p class="p">
        A query could encounter a serious error if it contained a <code class="ph codeph">RIGHT OUTER</code>, <code class="ph codeph">RIGHT ANTI</code>, or <code class="ph codeph">FULL OUTER</code> join clause
        and approached the memory limit on a host so that the <span class="q">"spill to disk"</span> mechanism was activated.
      </p>

      <p class="p"><strong class="ph b">Bug:</strong> <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-1929" target="_blank">IMPALA-1929</a></p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title114" id="IMPALA-2136">
      <h3 class="title topictitle3" id="ariaid-title114">Bug in PrintTColumnValue caused wrong stats for TINYINT partition cols</h3>

      
      <div class="body conbody">
      <p class="p">
        Declaring a partition key column as a <code class="ph codeph">TINYINT</code> caused problems with the <code class="ph codeph">COMPUTE STATS</code> statement.
        The associated partitions would always have zero estimated rows, leading to potential inefficient query plans.
      </p>

      <p class="p"><strong class="ph b">Bug:</strong> <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-2136" target="_blank">IMPALA-2136</a></p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title115" id="IMPALA-2018">
      <h3 class="title topictitle3" id="ariaid-title115">Where clause does not propagate to joins inside nested views</h3>

      
      <div class="body conbody">
      <p class="p">
        A query that referred to a view whose query referred to another view containing a join, could return incorrect results.
        <code class="ph codeph">WHERE</code> clauses for the outermost query were not always applied, causing the result
        set to include additional rows that should have been filtered out.
      </p>

      <p class="p"><strong class="ph b">Bug:</strong> <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-2018" target="_blank">IMPALA-2018</a></p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title116" id="IMPALA-2064">
      <h3 class="title topictitle3" id="ariaid-title116">Add effective_user() builtin</h3>

      
      <div class="body conbody">
      <p class="p">
        The <code class="ph codeph">user()</code> function returned the name of the logged-in user, which might not be the
        same as the user name being checked for authorization if, for example, delegation was enabled.
      </p>

      <p class="p"><strong class="ph b">Bug:</strong> <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-2064" target="_blank">IMPALA-2064</a></p>

      <p class="p"><strong class="ph b">Resolution:</strong> Rather than change the behavior of the <code class="ph codeph">user()</code> function,
      the fix introduces an additional function <code class="ph codeph">effective_user()</code> that returns the user name that is checked during authorization.</p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title117" id="IMPALA-2125">
      <h3 class="title topictitle3" id="ariaid-title117">Make UTC to local TimestampValue conversion faster.</h3>

      
      <div class="body conbody">
      <p class="p">
        Query performance was improved substantially for Parquet files containing <code class="ph codeph">TIMESTAMP</code>
        data written by Hive, when the <code class="ph codeph">-convert_legacy_hive_parquet_utc_timestamps=true</code> setting
        is in effect.
      </p>

      <p class="p"><strong class="ph b">Bug:</strong> <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-2125" target="_blank">IMPALA-2125</a></p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title118" id="IMPALA-2065">
      <h3 class="title topictitle3" id="ariaid-title118">Workaround IMPALA-1619 in BufferedBlockMgr::ConsumeMemory()</h3>

      
      <div class="body conbody">
      <p class="p">
        A join query could encounter a serious error if the query
        approached the memory limit on a host so that the <span class="q">"spill to disk"</span> mechanism was activated,
        and data volume in the join was large enough that an internal memory buffer exceeded 1 GB in size on a particular host.
        (Exceeding this limit would only happen for huge join queries, because Impala could split this intermediate data
        into 16 parts during the join query, and the buffer only contains compact bookkeeping data rather than the actual
        join column data.)
      </p>

      <p class="p"><strong class="ph b">Bug:</strong> <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-2065" target="_blank">IMPALA-2065</a></p>

      </div>

    </div>


  </div>


  <div class="topic concept nested1" aria-labelledby="ariaid-title119" id="fixed_issues_223">

    <h2 class="title topictitle2" id="ariaid-title119">Issues Fixed in <span class="keyword">Impala 2.2.3</span></h2>


    <div class="body conbody">

      <p class="p">
        This section lists the most frequently encountered customer issues fixed in <span class="keyword">Impala 2.2.3</span>.
      </p>


    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title120" id="isilon_support">
      <h3 class="title topictitle3" id="ariaid-title120">Enable using Isilon as the underlying filesystem.</h3>

      <div class="body conbody">
      <p class="p">
        Enabling Impala to work with the Isilon filesystem involves a number of
        fixes to performance and flexibility for dealing with I/O using remote reads.
        See <a class="xref" href="impala_isilon.html#impala_isilon">Using Impala with Isilon Storage</a> for details on using Impala and Isilon together.
      </p>

      <p class="p"><strong class="ph b">Bug:</strong> <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-1968" target="_blank">IMPALA-1968</a>,
      <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-1730" target="_blank">IMPALA-1730</a></p>

      </div>

    </div>






    <div class="topic concept nested2" aria-labelledby="ariaid-title121" id="IMPALA-1381">
      <h3 class="title topictitle3" id="ariaid-title121">Expand set of supported timezones.</h3>

      <div class="body conbody">
      <p class="p">
        The set of timezones recognized by Impala was expanded.
        You can always find the latest list of supported timezones in the
        Impala source code, in the file
        <a class="xref" href="https://github.com/apache/impala/blob/master/be/src/exprs/timezone_db.cc" target="_blank">timezone_db.cc</a>.
      </p>

      <p class="p"><strong class="ph b">Bug:</strong> <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-1381" target="_blank">IMPALA-1381</a></p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title122" id="IMPALA-1963">
      <h3 class="title topictitle3" id="ariaid-title122">Impala Timestamp ISO-8601 Support.</h3>

      <div class="body conbody">
      <p class="p">
        Impala can now process <code class="ph codeph">TIMESTAMP</code> literals including a trailing <code class="ph codeph">z</code>,
        signifying <span class="q">"Zulu"</span> time, a synonym for UTC.
      </p>

      <p class="p"><strong class="ph b">Bug:</strong> <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-1963" target="_blank">IMPALA-1963</a></p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title123" id="IMPALA-2008">
      <h3 class="title topictitle3" id="ariaid-title123">Fix wrong warning when insert overwrite to empty table</h3>

      <div class="body conbody">
      <p class="p">
        An <code class="ph codeph">INSERT OVERWRITE</code> operation would encounter an error
        if the <code class="ph codeph">SELECT</code> portion of the statement returned zero
        rows, such as with a <code class="ph codeph">LIMIT 0</code> clause.
      </p>

      <p class="p"><strong class="ph b">Bug:</strong> <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-2008" target="_blank">IMPALA-2008</a></p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title124" id="IMPALA-1952">
    
    
      <h3 class="title topictitle3" id="ariaid-title124">Expand parsing of decimals to include scientific notation</h3>

      <div class="body conbody">
      <p class="p">
        <code class="ph codeph">DECIMAL</code> literals can now include <code class="ph codeph">e</code> scientific notation.
        For example, now <code class="ph codeph">CAST(1e3 AS DECIMAL(5,3))</code> is a valid expression.
        Formerly it returned <code class="ph codeph">NULL</code>.
        Some scientific expressions might have worked before in <code class="ph codeph">DECIMAL</code> context, but only when the scale was 0.
      </p>

      <p class="p"><strong class="ph b">Bug:</strong> <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-1952" target="_blank">IMPALA-1952</a></p>

      </div>

    </div>


  </div>


  <div class="topic concept nested1" aria-labelledby="ariaid-title125" id="fixed_issues_221">

    <h2 class="title topictitle2" id="ariaid-title125">Issues Fixed in <span class="keyword">Impala 2.2.1</span></h2>


    <div class="body conbody">

      <p class="p">
        This section lists the most frequently encountered customer issues fixed in <span class="keyword">Impala 2.2.1</span>.
      </p>


    </div>

  </div>


  <div class="topic concept nested1" aria-labelledby="ariaid-title126" id="fixed_issues_220">

    <h2 class="title topictitle2" id="ariaid-title126">Issues Fixed in <span class="keyword">Impala 2.2.0</span></h2>


    <div class="body conbody">

      <p class="p">
        This section lists the most frequently encountered customer issues fixed in <span class="keyword">Impala 2.2.0</span>.
      </p>


      <p class="p">
        For the full list of fixed issues in <span class="keyword">Impala 2.2.0</span>, including over 40 critical issues, see
        <a class="xref" href="https://issues.apache.org/jira/issues/?jql=project%3Dimpala+and+fixVersion%3D%22Impala+2.2%22+and+resolution%3D%22Fixed%22" target="_blank">this report in the Impala JIRA tracker</a>.
      </p>


      <p class="p toc inpage"></p>

    </div>



    <div class="topic concept nested2" aria-labelledby="ariaid-title127" id="IMPALA-1607">
      <h3 class="title topictitle3" id="ariaid-title127">Altering a column's type causes column stats to stop sticking for that column</h3>

      <div class="body conbody">
      <p class="p">
      When the type of a column was changed in either Hive or Impala through <code class="ph codeph">ALTER TABLE CHANGE COLUMN</code>, the metastore database did not correctly propagate
      that change to the table that contains the column statistics. The statistics (particularly the <code class="ph codeph">NDV</code>) for that column were permanently reset
      and could not be changed by Impala's <code class="ph codeph">COMPUTE STATS</code> command. The underlying cause is a Hive bug (HIVE-9866).
      </p>

      <p class="p"><strong class="ph b">Bug:</strong> <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-1607" target="_blank">IMPALA-1607</a></p>

      <p class="p"><strong class="ph b">Resolution:</strong> Resolved by incorporating the fix for <a class="xref" href="https://issues.apache.org/jira/browse/HIVE-9866" target="_blank">HIVE-9866</a>.</p>

      <p class="p"><strong class="ph b">Workaround:</strong> On systems without the corresponding Hive fix, change the column back to its original type. The stats reappear and you can recompute or drop them.</p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title128" id="IMPALA-1854">
      <h3 class="title topictitle3" id="ariaid-title128">Impala may leak or use too many file descriptors</h3>

      <div class="body conbody">
      <p class="p">If a file was truncated in HDFS without a corresponding <code class="ph codeph">REFRESH</code> in Impala, Impala could allocate memory for file descriptors and not free that memory.</p>

      <p class="p"><strong class="ph b">Bug:</strong> <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-1854" target="_blank">IMPALA-1854</a></p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title129" id="IMPALA-1712">
      <h3 class="title topictitle3" id="ariaid-title129">Spurious stale block locality messages</h3>

      <div class="body conbody">
      <p class="p">
        Impala could issue messages stating the block locality metadata was stale,
        when the metadata was actually fine.
        The internal <span class="q">"remote bytes read"</span> counter was not being reset properly.
        This issue did not cause an actual slowdown in query execution,
        but the spurious error could result in unnecessary debugging work
        and unnecessary use of the <code class="ph codeph">INVALIDATE METADATA</code> statement.
      </p>

      <p class="p"><strong class="ph b">Bug:</strong> <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-1712" target="_blank">IMPALA-1712</a></p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title130" id="IMPALA-1711">
      <h3 class="title topictitle3" id="ariaid-title130">DROP TABLE fails after COMPUTE STATS and ALTER TABLE RENAME to a different database.</h3>

      <div class="body conbody">
      <p class="p">
        When a table was moved from one database to another, the column statistics were not pointed to the new database.i
        This could result in lower performance for queries due to unavailable statistics, and also an inability
        to drop the table.
      </p>

      <p class="p"><strong class="ph b">Bug:</strong> <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-1711" target="_blank">IMPALA-1711</a></p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title131" id="IMPALA-1674">

      <h3 class="title topictitle3" id="ariaid-title131">IMPALA-1556 causes memory leak with secure connections</h3>


      <div class="body conbody">

        <p class="p">
          <span class="keyword cmdname">impalad</span> daemons could experience a memory leak on clusters using Kerberos
          authentication, with memory usage growing as more data is transferred across the secure channel, either
          to the client program or between Impala nodes. The same issue affected LDAP-secured clusters to a lesser
          degree, because the LDAP security only covers data transferred back to client programs.
        </p>


        <p class="p">
          <strong class="ph b">Bug:</strong>
          <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-1674" target="_blank">IMPALA-1674</a>
        </p>


      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title132" id="IMPALA-1623">
      <h3 class="title topictitle3" id="ariaid-title132">unix_timestamp() does not return correct time</h3>

      <div class="body conbody">
      <p class="p">
        The <code class="ph codeph">unix_timestamp()</code> function could return an incorrect value (a constant value of 1).
      </p>

      <p class="p"><strong class="ph b">Bug:</strong> <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-1623" target="_blank">IMPALA-1623</a></p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title133" id="IMPALA-1476">
      <h3 class="title topictitle3" id="ariaid-title133">Impala incorrectly handles text data missing a newline on the last line</h3>

      <div class="body conbody">
      <p class="p">
        Some queries did not recognize the final line of a text data file if the line did not end with a newline character.
        This could lead to inconsistent results, such as a different number of rows for <code class="ph codeph">SELECT COUNT(*)</code>
        as opposed to <code class="ph codeph">SELECT *</code>.
      </p>

      <p class="p"><strong class="ph b">Bug:</strong> <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-1476" target="_blank">IMPALA-1476</a></p>

      </div>

    </div>




    <div class="topic concept nested2" aria-labelledby="ariaid-title134" id="IMPALA-1805">
      <h3 class="title topictitle3" id="ariaid-title134">Impala's ACLs check do not consider all group ACLs, only checked first one.</h3>

      <div class="body conbody">
      <p class="p">
        If the HDFS user ID associated with the <span class="keyword cmdname">impalad</span> process had read or write access in HDFS based on group membership,
        Impala statements could still fail with HDFS permission errors if that group was not the first listed group for that user ID.
      </p>

      <p class="p"><strong class="ph b">Bug:</strong> <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-1805" target="_blank">IMPALA-1805</a></p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title135" id="IMPALA-1794">
      <h3 class="title topictitle3" id="ariaid-title135">Fix infinite loop opening or closing file with invalid metadata</h3>

      <div class="body conbody">
      <p class="p">
        Truncating a file in HDFS, after Impala had cached the file metadata, could produce a hang when Impala
        queried a table containing that file.
      </p>

      <p class="p"><strong class="ph b">Bug:</strong> <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-1794" target="_blank">IMPALA-1794</a></p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title136" id="IMPALA-1705">
      <h3 class="title topictitle3" id="ariaid-title136">Cannot write Parquet files when values are larger than 64KB</h3>

      <div class="body conbody">
      <p class="p">
        Impala could sometimes fail to <code class="ph codeph">INSERT</code> into a Parquet table if a column value such as a <code class="ph codeph">STRING</code>
        was larger than 64 KB.
      </p>

      <p class="p"><strong class="ph b">Bug:</strong> <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-1705" target="_blank">IMPALA-1705</a></p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title137" id="IMPALA-1646">
      <h3 class="title topictitle3" id="ariaid-title137">Impala Will Not Run on Certain Intel CPUs</h3>

      <div class="body conbody">
      <p class="p">
        This fix relaxes the CPU requirement for Impala. Now only the SSSE3 instruction set is required. Formerly, SSE4.1
        instructions were generated, making Impala refuse to start on some older CPUs.
      </p>

      <p class="p"><strong class="ph b">Bug:</strong> <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-1646" target="_blank">IMPALA-1646</a></p>

      </div>

    </div>


  </div>




  <div class="topic concept nested1" aria-labelledby="ariaid-title138" id="fixed_issues_2110">

    <h2 class="title topictitle2" id="ariaid-title138">Issues Fixed in <span class="keyword">Impala 2.1.10</span></h2>


    <div class="body conbody">
      <p class="p"></p>

    </div>


  </div>


  <div class="topic concept nested1" aria-labelledby="ariaid-title139" id="fixed_issues_217">

    <h2 class="title topictitle2" id="ariaid-title139">Issues Fixed in <span class="keyword">Impala 2.1.7</span></h2>


    <div class="body conbody">

      <p class="p">
        This section lists the most significant Impala issues fixed in <span class="keyword">Impala 2.1.7</span>.
      </p>


    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title140" id="IMPALA-1917-539">
      
      <h3 class="title topictitle3" id="ariaid-title140">Query return empty result if it contains NullLiteral in inlineview</h3>

      <div class="body conbody">
      <p class="p">
        If an inline view in a <code class="ph codeph">FROM</code> clause contained a <code class="ph codeph">NULL</code> literal,
        the result set was empty.
      </p>

      <p class="p"><strong class="ph b">Bug:</strong> <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-1917" target="_blank">IMPALA-1917</a></p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title141" id="IMPALA-2264">
      <h3 class="title topictitle3" id="ariaid-title141">Fix edge cases for decimal/integer cast</h3>

      <div class="body conbody">
      <p class="p">
        A value of type <code class="ph codeph">DECIMAL(3,0)</code> could be incorrectly cast to <code class="ph codeph">TINYINT</code>.
        The resulting out-of-range value could be incorrect. After the fix, the smallest type that is allowed
        for this cast is <code class="ph codeph">INT</code>, and attempting to use <code class="ph codeph">DECIMAL(3,0)</code> in a
        <code class="ph codeph">TINYINT</code> context produces a <span class="q">"loss of precision"</span> error.
      </p>

      <p class="p"><strong class="ph b">Bug:</strong> <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-2264" target="_blank">IMPALA-2264</a></p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title142" id="IMPALA-1756">
      <h3 class="title topictitle3" id="ariaid-title142">Constant filter expressions are not checked for errors and state cleanup on exception / DCHECK on destroying an ExprContext</h3>

      <div class="body conbody">
      <p class="p">
        An invalid constant expression in a <code class="ph codeph">WHERE</code> clause (for example, an invalid
        regular expression pattern) could fail to clean up internal state after raising a query error.
        Therefore, certain combinations of invalid expressions in a query could cause a crash, or cause a query to continue
        when it should halt with an error.
      </p>

      <p class="p"><strong class="ph b">Bug:</strong> <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-1756" target="_blank">IMPALA-1756</a>,
      <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-2514" target="_blank">IMPALA-2514</a></p>

      </div>

    </div>




    <div class="topic concept nested2" aria-labelledby="ariaid-title143" id="IMPALA-1746-539">
      <h3 class="title topictitle3" id="ariaid-title143">QueryExecState does not check for query cancellation or
        errors</h3>

      <div class="body conbody">
      <p class="p">
        A call to <code class="ph codeph">SetError()</code> in a user-defined function (UDF) would not cause the query to fail as expected.
      </p>

      <p class="p"><strong class="ph b">Bug:</strong> <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-1746" target="_blank">IMPALA-1746</a>,
      <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-2141" target="_blank">IMPALA-2141</a></p>

      </div>

    </div>


  </div>


  <div class="topic concept nested1" aria-labelledby="ariaid-title144" id="fixed_issues_216">

    <h2 class="title topictitle2" id="ariaid-title144">Issues Fixed in Impala 2.1.6</h2>


    <div class="body conbody">

      <p class="p">
        This section lists the most significant Impala issues fixed in Impala 2.1.6.
      </p>


    </div>




    <div class="topic concept nested2" aria-labelledby="ariaid-title145" id="IMPALA-2364">
      <h3 class="title topictitle3" id="ariaid-title145">Wrong DCHECK in PHJ::ProcessProbeBatch</h3>

      <div class="body conbody">
      <p class="p">Certain queries could encounter a serious error if the spill-to-disk mechanism was activated.</p>

      <p class="p"><strong class="ph b">Bug:</strong> <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-2364" target="_blank">IMPALA-2364</a></p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title146" id="IMPALA-2314">
      <h3 class="title topictitle3" id="ariaid-title146">LargestSpilledPartition was not checking if partition is closed</h3>

      <div class="body conbody">
      <p class="p">Certain queries could encounter a serious error if the spill-to-disk mechanism was activated.</p>

      <p class="p"><strong class="ph b">Bug:</strong> <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-2314" target="_blank">IMPALA-2314</a></p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title147" id="IMPALA-2165">
      <h3 class="title topictitle3" id="ariaid-title147">Avoid cardinality 0 in scan nodes of small tables and low selectivity</h3>

      <div class="body conbody">
      <p class="p">Impala could generate a suboptimal query plan for some queries involving small tables.</p>

      <p class="p"><strong class="ph b">Bug:</strong> <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-2165" target="_blank">IMPALA-2165</a></p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title148" id="IMPALA-2178-238">
      <h3 class="title topictitle3" id="ariaid-title148">fix Expr::ComputeResultsLayout() logic</h3>

      <div class="body conbody">
      <p class="p">Queries using the <code class="ph codeph">GROUP BY</code> operator on multiple <code class="ph codeph">CHAR</code> columns with length less than or equal to 2 characters
      could return incorrect results for some columns.</p>

      <p class="p"><strong class="ph b">Bug:</strong> <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-2178" target="_blank">IMPALA-2178</a></p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title149" id="IMPALA-2133">
      <h3 class="title topictitle3" id="ariaid-title149">Properly unescape string value for HBase filters</h3>

      <div class="body conbody">
      <p class="p">Queries against HBase tables could return incomplete results if the <code class="ph codeph">WHERE</code> clause included string comparisons using literals
      containing escaped quotation marks.</p>

      <p class="p"><strong class="ph b">Bug:</strong> <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-2133" target="_blank">IMPALA-2133</a></p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title150" id="IMPALA-1929-238">
      <h3 class="title topictitle3" id="ariaid-title150">Avoiding a DCHECK of NULL hash table in spilled right joins</h3>

      
      <div class="body conbody">
      <p class="p">
        A query could encounter a serious error if it contained a <code class="ph codeph">RIGHT OUTER</code>, <code class="ph codeph">RIGHT ANTI</code>, or <code class="ph codeph">FULL OUTER</code> join clause
        and approached the memory limit on a host so that the <span class="q">"spill to disk"</span> mechanism was activated.
      </p>

      <p class="p"><strong class="ph b">Bug:</strong> <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-1929" target="_blank">IMPALA-1929</a></p>

      </div>

    </div>


  </div>


  <div class="topic concept nested1" aria-labelledby="ariaid-title151" id="fixed_issues_215">

    <h2 class="title topictitle2" id="ariaid-title151">Issues Fixed in Impala 2.1.5</h2>


    <div class="body conbody">

      <p class="p">
        This section lists the most significant Impala issues fixed in Impala 2.1.5.
      </p>


    </div>




    <div class="topic concept nested2" aria-labelledby="ariaid-title152" id="IMPALA-1919">
      <h3 class="title topictitle3" id="ariaid-title152">Avoid calling ProcessBatch with out_batch-&gt;AtCapacity in right joins</h3>

      <div class="body conbody">
      <p class="p">
        Queries including <code class="ph codeph">RIGHT OUTER JOIN</code>, <code class="ph codeph">RIGHT ANTI JOIN</code>, or <code class="ph codeph">FULL OUTER JOIN</code>
        clauses and involving a high volume of data could encounter a serious error.
      </p>

      <p class="p"><strong class="ph b">Bug:</strong> <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-1919" target="_blank">IMPALA-1919</a></p>

      </div>

    </div>


  </div>


  <div class="topic concept nested1" aria-labelledby="ariaid-title153" id="fixed_issues_214">

    <h2 class="title topictitle2" id="ariaid-title153">Issues Fixed in Impala 2.1.4</h2>


    <div class="body conbody">

      <p class="p">
        This section lists the most significant Impala issues fixed in Impala 2.1.4.
      </p>


      <p class="p toc inpage"></p>

    </div>




    <div class="topic concept nested2" aria-labelledby="ariaid-title154" id="IMPALA-1519">
      <h3 class="title topictitle3" id="ariaid-title154">Crash: impala::TupleIsNullPredicate::Prepare</h3>

      <div class="body conbody">
      <p class="p">
        When expressions that tested for <code class="ph codeph">NULL</code> were used in combination with analytic functions, an error could occur.
        (The original crash issue was fixed by an earlier patch.)
      </p>

      <p class="p"><strong class="ph b">Bug:</strong> <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-1519" target="_blank">IMPALA-1519</a></p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title155" id="IMPALA-1952-214">
      <h3 class="title topictitle3" id="ariaid-title155">Expand parsing of decimals to include scientific notation</h3>

      <div class="body conbody">
      <p class="p">
        <code class="ph codeph">DECIMAL</code> literals could include <code class="ph codeph">e</code> scientific notation.
        For example, now <code class="ph codeph">CAST(1e3 AS DECIMAL(5,3))</code> is a valid expression.
        Formerly it returned <code class="ph codeph">NULL</code>.
        Some scientific expressions might have worked before in <code class="ph codeph">DECIMAL</code> context, but only when the scale was 0.
      </p>

      <p class="p"><strong class="ph b">Bug:</strong> <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-1952" target="_blank">IMPALA-1952</a></p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title156" id="IMPALA-1860">
      <h3 class="title topictitle3" id="ariaid-title156">INSERT/CTAS evaluates and applies constant predicates.</h3>

      <div class="body conbody">
      <p class="p">
        An <code class="ph codeph">INSERT OVERWRITE</code> statement would write new data, even if
        a constant clause such as <code class="ph codeph">WHERE 1 = 0</code> should have
        prevented it from writing any rows.
      </p>

      <p class="p"><strong class="ph b">Bug:</strong> <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-1860" target="_blank">IMPALA-1860</a></p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title157" id="IMPALA-1900">
      <h3 class="title topictitle3" id="ariaid-title157">Assign predicates below analytic functions with a compatible partition by clause</h3>

      <div class="body conbody">
      <p class="p">
        If the <code class="ph codeph">PARTITION BY</code> clause in an analytic function refers to partition key columns in a partitioned table,
        now Impala can perform partition pruning during the analytic query.
      </p>

      <p class="p"><strong class="ph b">Bug:</strong> <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-1900" target="_blank">IMPALA-1900</a></p>

      </div>

    </div>




    <div class="topic concept nested2" aria-labelledby="ariaid-title158" id="IMPALA-1888">
      <h3 class="title topictitle3" id="ariaid-title158">FIRST_VALUE may produce incorrect results with preceding windows</h3>

      <div class="body conbody">
      <p class="p">
        A query using the <code class="ph codeph">FIRST_VALUE</code> analytic function
        and a window defined with the <code class="ph codeph">PRECEDING</code> keyword
        could produce wrong results.
      </p>

      <p class="p"><strong class="ph b">Bug:</strong> <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-1888" target="_blank">IMPALA-1888</a></p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title159" id="IMPALA-1559">
      <h3 class="title topictitle3" id="ariaid-title159">FIRST_VALUE rewrite fn type might not match slot type</h3>

      <div class="body conbody">
      <p class="p">
        A query referencing a <code class="ph codeph">DECIMAL</code> column with the <code class="ph codeph">FIRST_VALUE</code> analytic function
        could encounter an error.
      </p>

      <p class="p"><strong class="ph b">Bug:</strong> <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-1559" target="_blank">IMPALA-1559</a></p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title160" id="IMPALA-1808">
      <h3 class="title topictitle3" id="ariaid-title160">AnalyticEvalNode cannot handle partition/order by exprs with NaN</h3>

      <div class="body conbody">
      <p class="p">
        A query using an analytic function
        could encounter an error if the
        evaluation of an analytic <code class="ph codeph">ORDER BY</code> or <code class="ph codeph">PARTITION</code> expression
        resulted in a NaN value, for example if the <code class="ph codeph">ORDER BY</code> or <code class="ph codeph">PARTITION</code>
        contained a division operation where both operands were zero.
      </p>

      <p class="p"><strong class="ph b">Bug:</strong> <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-1808" target="_blank">IMPALA-1808</a></p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title161" id="IMPALA-1562">
      <h3 class="title topictitle3" id="ariaid-title161">AnalyticEvalNode not properly handling nullable tuples</h3>

      <div class="body conbody">
      <p class="p">
        An analytic function containing only an <code class="ph codeph">OVER</code> clause could
        encounter an error if another part of the query (specifically an outer join)
        produced all-<code class="ph codeph">NULL</code> tuples.
      </p>

      <p class="p"><strong class="ph b">Bug:</strong> <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-1562" target="_blank">IMPALA-1562</a></p>

      </div>

    </div>


  </div>


  <div class="topic concept nested1" aria-labelledby="ariaid-title162" id="fixed_issues_213">

    <h2 class="title topictitle2" id="ariaid-title162">Issues Fixed in Impala 2.1.3</h2>


    <div class="body conbody">

      <p class="p">
        This section lists the most significant issues fixed in Impala 2.1.3.
      </p>


      <p class="p toc inpage"></p>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title163" id="IMPALA-1658">
      <h3 class="title topictitle3" id="ariaid-title163">Add compatibility flag for Hive-Parquet-Timestamps</h3>

      <div class="body conbody">
      <p class="p">
      When Hive writes <code class="ph codeph">TIMESTAMP</code> values, it represents them
      in the local time zone of the server. Impala expects <code class="ph codeph">TIMESTAMP</code>
      values to always be in the UTC time zone, possibly leading to inconsistent
      results depending on which component created the data files.
      This patch introduces a new startup flag,
      <code class="ph codeph">-convert_legacy_hive_parquet_utc_timestamps</code>
      for the <span class="keyword cmdname">impalad</span> daemon.
      Specify <code class="ph codeph">-convert_legacy_hive_parquet_utc_timestamps=true</code>
      to make Impala recognize Parquet data files written by Hive
      and automatically adjust <code class="ph codeph">TIMESTAMP</code>
      values read from those files into the UTC time zone for
      compatibility with other Impala <code class="ph codeph">TIMESTAMP</code> processing.
      Although this setting is currently turned off by default,
      consider enabling it if practical in your environment,
      for maximum interoperability with Hive-created Parquet files.
      </p>

      <p class="p"><strong class="ph b">Bug:</strong> <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-1658" target="_blank">IMPALA-1658</a></p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title164" id="IMPALA-1738">
      <h3 class="title topictitle3" id="ariaid-title164">Use snprintf() instead of lexical_cast() in float-to-string casts</h3>

      <div class="body conbody">
      <p class="p">
        Converting a floating-point value to a <code class="ph codeph">STRING</code> could be slower than necessary.
      </p>

      <p class="p"><strong class="ph b">Bug:</strong> <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-1738" target="_blank">IMPALA-1738</a></p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title165" id="IMPALA-1865">
      <h3 class="title topictitle3" id="ariaid-title165">Fix partition spilling cleanup when new stream OOMs</h3>

      <div class="body conbody">
      <p class="p">
        Certain calls to aggregate functions with <code class="ph codeph">STRING</code> arguments could encounter a serious error
        when the system ran low on memory and attempted to activate the spill-to-disk mechanism.
        The error message referenced the function <code class="ph codeph">impala::AggregateFunctions::StringValGetValue</code>.
      </p>

      <p class="p"><strong class="ph b">Bug:</strong> <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-1865" target="_blank">IMPALA-1865</a></p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title166" id="IMPALA-1805-213">
      <h3 class="title topictitle3" id="ariaid-title166">Impala's ACLs check do not consider all group ACLs, only checked first one.</h3>

      <div class="body conbody">
      <p class="p">
        If the HDFS user ID associated with the <span class="keyword cmdname">impalad</span> process had read or write access in HDFS based on group membership,
        Impala statements could still fail with HDFS permission errors if that group was not the first listed group for that user ID.
      </p>

      <p class="p"><strong class="ph b">Bug:</strong> <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-1805" target="_blank">IMPALA-1805</a></p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title167" id="IMPALA-1794-213">
      <h3 class="title topictitle3" id="ariaid-title167">Fix infinite loop opening or closing file with invalid metadata</h3>

      <div class="body conbody">
      <p class="p">
        Truncating a file in HDFS, after Impala had cached the file metadata, could produce a hang when Impala
        queried a table containing that file.
      </p>

      <p class="p"><strong class="ph b">Bug:</strong> <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-1794" target="_blank">IMPALA-1794</a></p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title168" id="IMPALA-1801">
      <h3 class="title topictitle3" id="ariaid-title168">external-data-source-executor leaking global jni refs</h3>

      <div class="body conbody">
      <p class="p">
        Successive calls to the data source API could result in excessive memory consumption,
        with memory allocated but never freed.
      </p>

      <p class="p"><strong class="ph b">Bug:</strong> <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-1801" target="_blank">IMPALA-1801</a></p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title169" id="IMPALA-1712-213">
      <h3 class="title topictitle3" id="ariaid-title169">Spurious stale block locality messages</h3>

      <div class="body conbody">
      <p class="p">
        Impala could issue messages stating the block locality metadata was stale,
        when the metadata was actually fine.
        The internal <span class="q">"remote bytes read"</span> counter was not being reset properly.
        This issue did not cause an actual slowdown in query execution,
        but the spurious error could result in unnecessary debugging work
        and unnecessary use of the <code class="ph codeph">INVALIDATE METADATA</code> statement.
      </p>

      <p class="p"><strong class="ph b">Bug:</strong> <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-1712" target="_blank">IMPALA-1712</a></p>

      </div>

    </div>


  </div>


  <div class="topic concept nested1" aria-labelledby="ariaid-title170" id="fixed_issues_212">

    <h2 class="title topictitle2" id="ariaid-title170">Issues Fixed in Impala 2.1.2</h2>


    <div class="body conbody">

      <p class="p">
        This section lists the most significant issues fixed in Impala 2.1.2.
      </p>


      <p class="p">
        For the full list of fixed issues in Impala 2.1.2, see
        <a class="xref" href="https://issues.apache.org/jira/issues/?jql=project%3Dimpala+and+fixVersion%3D%22Impala+2.1.2%22+and+resolution%3D%22Fixed%22" target="_blank">this report in the Impala JIRA tracker</a>.
      </p>


      <p class="p toc inpage"></p>

    </div>



    <div class="topic concept nested2" aria-labelledby="ariaid-title171" id="IMPALA-1622">
      <h3 class="title topictitle3" id="ariaid-title171">Impala incorrectly handles double numbers with more than 19 significant decimal digits</h3>

      <div class="body conbody">
      <p class="p">
        When a floating-point value was read from a text file and interpreted as a <code class="ph codeph">FLOAT</code>
        or <code class="ph codeph">DOUBLE</code> value, it could be incorrectly interpreted if it included more than
        19 significant digits.
      </p>

      <p class="p"><strong class="ph b">Bug:</strong> <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-1622" target="_blank">IMPALA-1622</a></p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title172" id="IMPALA-1623-213">
      <h3 class="title topictitle3" id="ariaid-title172">unix_timestamp() does not return correct time</h3>

      <div class="body conbody">
      <p class="p">
        The <code class="ph codeph">unix_timestamp()</code> function could return an incorrect value (a constant value of 1).
      </p>

      <p class="p"><strong class="ph b">Bug:</strong> <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-1623" target="_blank">IMPALA-1623</a></p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title173" id="IMPALA-1535">
      <h3 class="title topictitle3" id="ariaid-title173">Row Count Mismatch: Partition pruning with NULL</h3>

      <div class="body conbody">
      <p class="p">
        A query against a partitioned table could return incorrect results if the <code class="ph codeph">WHERE</code> clause
        compared the partition key to <code class="ph codeph">NULL</code> using operators such as <code class="ph codeph">=</code> or <code class="ph codeph">!=</code>.
      </p>

      <p class="p"><strong class="ph b">Bug:</strong> <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-1535" target="_blank">IMPALA-1535</a></p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title174" id="IMPALA-1120">
      <h3 class="title topictitle3" id="ariaid-title174">Fetch column stats in bulk using new (Hive .13) HMS APIs</h3>

      <div class="body conbody">
      <p class="p">The performance of the <code class="ph codeph">COMPUTE STATS</code> statement and queries was improved, particularly for wide tables.</p>

      <p class="p"><strong class="ph b">Bug:</strong> <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-1120" target="_blank">IMPALA-1120</a></p>

      </div>

    </div>


  </div>


  <div class="topic concept nested1" aria-labelledby="ariaid-title175" id="fixed_issues_211">

    <h2 class="title topictitle2" id="ariaid-title175">Issues Fixed in Impala 2.1.1</h2>


    <div class="body conbody">

      <p class="p">
        This section lists the most significant issues fixed in Impala 2.1.1.
      </p>


      <p class="p">
        For the full list of fixed issues in Impala 2.1.1, see
        <a class="xref" href="https://issues.apache.org/jira/issues/?jql=project%3Dimpala+and+fixVersion%3D%22Impala+2.1.1%22+and+resolution%3D%22Fixed%22" target="_blank">this report in the Impala JIRA tracker</a>.
      </p>


      <p class="p toc inpage"></p>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title176" id="IMPALA-1674-211">

      <h3 class="title topictitle3" id="ariaid-title176">IMPALA-1556 causes memory leak with secure connections</h3>


      <div class="body conbody">

        <p class="p">
          <span class="keyword cmdname">impalad</span> daemons could experience a memory leak on clusters using Kerberos
          authentication, with memory usage growing as more data is transferred across the secure channel, either
          to the client program or between Impala nodes. The same issue affected LDAP-secured clusters to a lesser
          degree, because the LDAP security only covers data transferred back to client programs.
        </p>


        <p class="p">
          <strong class="ph b">Bug:</strong>
          <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-1674" target="_blank">https://issues.apache.org/jira/browse/IMPALA-1674</a> IMPALA-1674
        </p>



      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title177" id="IMPALA-1668">

      <h3 class="title topictitle3" id="ariaid-title177">TSaslServerTransport::Factory::getTransport() leaks transport map entries</h3>


      <div class="body conbody">

        <p class="p">
          <span class="keyword cmdname">impalad</span> daemons in clusters secured by Kerberos or LDAP could experience a slight
          memory leak on each connection. The accumulation of unreleased memory could cause problems on
          long-running clusters.
        </p>


        <p class="p">
          <strong class="ph b">Bug:</strong>
          <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-1668" target="_blank">IMPALA-1668</a>
        </p>



      </div>

    </div>

  </div>


  <div class="topic concept nested1" aria-labelledby="ariaid-title178" id="fixed_issues_210">

    <h2 class="title topictitle2" id="ariaid-title178">Issues Fixed in Impala 2.1.0</h2>


    <div class="body conbody">

      <p class="p">
        This section lists the most significant issues fixed in Impala 2.1.0.
      </p>


      <p class="p">
        For the full list of fixed issues in Impala 2.1.0, see
        <a class="xref" href="https://issues.apache.org/jira/issues/?jql=project%3Dimpala+and+fixVersion%3D%22Impala+2.1%22+and+resolution%3D%22Fixed%22" target="_blank">this report in the Impala JIRA tracker</a>.
      </p>


      <p class="p toc inpage"></p>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title179" id="IMPALA-1455">

      <h3 class="title topictitle3" id="ariaid-title179">Kerberos fetches 3x slower</h3>


      <div class="body conbody">

        <p class="p">
          Transferring large result sets back to the client application on Kerberos
        </p>


        <p class="p">
          <strong class="ph b">Bug:</strong>
          <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-1455" target="_blank">IMPALA-1455</a>
        </p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title180" id="IMPALA-1556">

      <h3 class="title topictitle3" id="ariaid-title180">Compressed file needs to be hold on entirely in Memory</h3>


      <div class="body conbody">

        <p class="p">
          Queries on gzipped text files required holding the entire data file and its uncompressed representation
          in memory at the same time. <code class="ph codeph">SELECT</code> and <code class="ph codeph">COMPUTE STATS</code> statements could
          fail or perform inefficiently as a result. The fix enables streaming reads for gzipped text, so that the
          data is uncompressed as it is read.
        </p>


        <p class="p">
          <strong class="ph b">Bug:</strong>
          <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-1556" target="_blank">IMPALA-1556</a>
        </p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title181" id="IMPALA-1611">

      <h3 class="title topictitle3" id="ariaid-title181">Cannot read hbase metadata with NullPointerException: null</h3>


      <div class="body conbody">

        <p class="p">
          Impala might not be able to access HBase tables, depending on the associated levels of Impala and HBase
          on the system.
        </p>


        <p class="p">
          <strong class="ph b">Bug:</strong>
          <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-1611" target="_blank">IMPALA-1611</a>
        </p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title182" id="IMPALA-serious-201">

      <h3 class="title topictitle3" id="ariaid-title182">Serious errors / crashes</h3>


      <div class="body conbody">

        <p class="p">
          Improved code coverage in Impala testing uncovered a number of potentially serious errors that could
          occur with specific query syntax. These errors are resolved in Impala 2.1.
        </p>


        <p class="p">
          <strong class="ph b">Bug:</strong>
          <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-1553" target="_blank">IMPALA-1553</a>,
          <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-1528" target="_blank">IMPALA-1528</a>,
          <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-1526" target="_blank">IMPALA-1526</a>,
          <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-1524" target="_blank">IMPALA-1524</a>,
          <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-1508" target="_blank">IMPALA-1508</a>,
          <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-1493" target="_blank">IMPALA-1493</a>,
          <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-1501" target="_blank">IMPALA-1501</a>,
          <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-1483" target="_blank">IMPALA-1483</a>
        </p>

      </div>

    </div>

  </div>




  <div class="topic concept nested1" aria-labelledby="ariaid-title183" id="fixed_issues_205">

    <h2 class="title topictitle2" id="ariaid-title183">Issues Fixed in Impala 2.0.5</h2>


    <div class="body conbody">

      <p class="p">
        For the full list of fixed issues in Impala 2.0.5, see
        <a class="xref" href="https://issues.apache.org/jira/issues/?jql=project%3Dimpala+and+fixVersion%3D%22Impala+2.0.5%22+and+resolution%3D%22Fixed%22" target="_blank">this report in the Impala JIRA tracker</a>.
      </p>


    </div>

  </div>


  <div class="topic concept nested1" aria-labelledby="ariaid-title184" id="fixed_issues_204">

    <h2 class="title topictitle2" id="ariaid-title184">Issues Fixed in Impala 2.0.4</h2>


    <div class="body conbody">

      <p class="p">
        This section lists the most significant issues fixed in Impala 2.0.4.
      </p>


      <p class="p">
        For the full list of fixed issues in Impala 2.0.4, see
        <a class="xref" href="https://issues.apache.org/jira/issues/?jql=project%3Dimpala+and+fixVersion%3D%22Impala+2.0.4%22+and+resolution%3D%22Fixed%22" target="_blank">this report in the Impala JIRA tracker</a>.
      </p>


      <p class="p toc inpage"></p>

    </div>




    <div class="topic concept nested2" aria-labelledby="ariaid-title185" id="IMPALA-1658-526">
      <h3 class="title topictitle3" id="ariaid-title185">Add compatibility flag for Hive-Parquet-Timestamps</h3>

      <div class="body conbody">
      <p class="p">
      When Hive writes <code class="ph codeph">TIMESTAMP</code> values, it represents them
      in the local time zone of the server. Impala expects <code class="ph codeph">TIMESTAMP</code>
      values to always be in the UTC time zone, possibly leading to inconsistent
      results depending on which component created the data files.
      This patch introduces a new startup flag,
      <code class="ph codeph">-convert_legacy_hive_parquet_utc_timestamps</code>
      for the <span class="keyword cmdname">impalad</span> daemon.
      Specify <code class="ph codeph">-convert_legacy_hive_parquet_utc_timestamps=true</code>
      to make Impala recognize Parquet data files written by Hive
      and automatically adjust <code class="ph codeph">TIMESTAMP</code>
      values read from those files into the UTC time zone for
      compatibility with other Impala <code class="ph codeph">TIMESTAMP</code> processing.
      Although this setting is currently turned off by default,
      consider enabling it if practical in your environment,
      for maximum interoperability with Hive-created Parquet files.
      </p>

      <p class="p"><strong class="ph b">Bug:</strong> <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-1658" target="_blank">IMPALA-1658</a></p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title186" id="IMPALA-1794-526">
      <h3 class="title topictitle3" id="ariaid-title186">IoMgr infinite loop opening/closing file when shorter than cached metadata size</h3>

      <div class="body conbody">
      <p class="p">
        If a table data file was replaced by a shorter file outside of Impala,
        such as with <code class="ph codeph">INSERT OVERWRITE</code> in Hive producing an empty
        output file, subsequent Impala queries could hang.
      </p>

      <p class="p"><strong class="ph b">Bug:</strong> <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-1794" target="_blank">IMPALA-1794</a></p>

      </div>

    </div>


  </div>


  <div class="topic concept nested1" aria-labelledby="ariaid-title187" id="fixed_issues_203">

    <h2 class="title topictitle2" id="ariaid-title187">Issues Fixed in Impala 2.0.3</h2>


    <div class="body conbody">

      <p class="p">
        This section lists the most significant issues fixed in Impala 2.0.3.
      </p>


      <p class="p">
        For the full list of fixed issues in Impala 2.0.3, see
        <a class="xref" href="https://issues.apache.org/jira/issues/?jql=project%3Dimpala+and+fixVersion%3D%22Impala+2.0.3%22+and+resolution%3D%22Fixed%22" target="_blank">this report in the Impala JIRA tracker</a>.
      </p>


      <p class="p toc inpage"></p>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title188" id="IMPALA-1471">
      <h3 class="title topictitle3" id="ariaid-title188">Anti join could produce incorrect results when spilling</h3>

      <div class="body conbody">
      <p class="p">
        An anti-join query (or a <code class="ph codeph">NOT EXISTS</code> operation that was rewritten internally into an anti-join) could produce incorrect results
        if Impala reached its memory limit, causing the query to write temporary results to disk.
      </p>

      <p class="p"><strong class="ph b">Bug:</strong> <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-1471" target="_blank">IMPALA-1471</a></p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title189" id="IMPALA-1535-52x">
      <h3 class="title topictitle3" id="ariaid-title189">Row Count Mismatch: Partition pruning with NULL</h3>

      <div class="body conbody">
      <p class="p">
        A query against a partitioned table could return incorrect results if the <code class="ph codeph">WHERE</code> clause
        compared the partition key to <code class="ph codeph">NULL</code> using operators such as <code class="ph codeph">=</code> or <code class="ph codeph">!=</code>.
      </p>

      <p class="p"><strong class="ph b">Bug:</strong> <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-1535" target="_blank">IMPALA-1535</a></p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title190" id="IMPALA-1120-52x">
      <h3 class="title topictitle3" id="ariaid-title190">Fetch column stats in bulk using new (Hive .13) HMS APIs</h3>

      <div class="body conbody">
      <p class="p">The performance of the <code class="ph codeph">COMPUTE STATS</code> statement and queries was improved, particularly for wide tables.</p>

      <p class="p"><strong class="ph b">Bug:</strong> <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-1120" target="_blank">IMPALA-1120</a></p>

      </div>

    </div>


  </div>


  <div class="topic concept nested1" aria-labelledby="ariaid-title191" id="fixed_issues_202">

    <h2 class="title topictitle2" id="ariaid-title191">Issues Fixed in Impala 2.0.2</h2>


    <div class="body conbody">

      <p class="p">
        This section lists the most significant issues fixed in Impala 2.0.2.
      </p>


      <p class="p">
        For the full list of fixed issues in Impala 2.0.2, see
        <a class="xref" href="https://issues.apache.org/jira/issues/?jql=project%3Dimpala+and+fixVersion%3D%22Impala+2.0.2%22+and+resolution%3D%22Fixed%22" target="_blank">this report in the Impala JIRA tracker</a>.
      </p>


      <p class="p toc inpage"></p>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title192" id="IMPALA-1453">

      <h3 class="title topictitle3" id="ariaid-title192">GROUP BY on STRING column produces inconsistent results</h3>


      <div class="body conbody">

        <p class="p">
          Some operations in queries submitted through Hue or other HiveServer2 clients could produce inconsistent
          results.
        </p>


        <p class="p">
          <strong class="ph b">Bug:</strong>
          <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-1453" target="_blank">IMPALA-1453</a>
        </p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title193" id="IoMgr_522">

      <h3 class="title topictitle3" id="ariaid-title193">Fix leaked file descriptor and excessive file descriptor use</h3>


      <div class="body conbody">

        <p class="p">
          Impala could encounter an error from running out of file descriptors. The fix reduces the amount of time
          file descriptors are kept open, and avoids leaking file descriptors when read operations encounter
          errors.
        </p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title194" id="IMPALA-1623-52x">

      <h3 class="title topictitle3" id="ariaid-title194">unix_timestamp() does not return correct time</h3>


      <div class="body conbody">

        <p class="p">
          The <code class="ph codeph">unix_timestamp()</code> function could return a constant value <code class="ph codeph">1</code> instead
          of a representation of the time.
        </p>


        <p class="p">
          <strong class="ph b">Bug:</strong>
          <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-1623" target="_blank">IMPALA-1623</a>
        </p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title195" id="IMPALA-1586">

      <h3 class="title topictitle3" id="ariaid-title195">Impala should randomly select cached replica</h3>


      <div class="body conbody">

        <p class="p">
          To avoid putting too heavy a load on any one node, Impala now randomizes which scan node processes each
          HDFS data block rather than choosing the first cached block replica.
        </p>


        <p class="p">
          <strong class="ph b">Bug:</strong>
          <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-1586" target="_blank">IMPALA-1586</a>
        </p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title196" id="IMPALA-1606">

      <h3 class="title topictitle3" id="ariaid-title196">Impala does not always give short name to Llama.</h3>


      <div class="body conbody">

        <p class="p">
          In clusters secured by Kerberos or LDAP, a discrepancy in internal transmission of user names could cause
          a communication error with Llama.
        </p>


        <p class="p">
          <strong class="ph b">Bug:</strong>
          <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-1606" target="_blank">IMPALA-1606</a>
        </p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title197" id="IMPALA-1475">

      <h3 class="title topictitle3" id="ariaid-title197">accept unmangled native UDF symbols</h3>


      <div class="body conbody">

        <p class="p">
          The <code class="ph codeph">CREATE FUNCTION</code> statement could report that it could not find a function entry point
          within the <code class="ph codeph">.so</code> file for a UDF written in C++, even if the corresponding function was
          present.
        </p>


        <p class="p">
          <strong class="ph b">Bug:</strong>
          <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-1475" target="_blank">IMPALA-1475</a>
        </p>

      </div>

    </div>

  </div>


  <div class="topic concept nested1" aria-labelledby="ariaid-title198" id="fixed_issues_201">

    <h2 class="title topictitle2" id="ariaid-title198">Issues Fixed in Impala 2.0.1</h2>


    <div class="body conbody">

      <p class="p">
        This section lists the most significant issues fixed in Impala 2.0.1.
      </p>


      <p class="p">
        For the full list of fixed issues in Impala 2.0.1, see
        <a class="xref" href="https://issues.apache.org/jira/issues/?jql=project%3Dimpala+and+fixVersion%3D%22Impala+2.0.1%22+and+resolution%3D%22Fixed%22" target="_blank">this report in the Impala JIRA tracker</a>.
      </p>


      <p class="p toc inpage"></p>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title199" id="IMPALA-1416">

      <h3 class="title topictitle3" id="ariaid-title199">Queries fail with metastore exception after upgrade and compute stats</h3>


      <div class="body conbody">

        <p class="p">
          After running the <code class="ph codeph">COMPUTE STATS</code> statement on an Impala table, subsequent queries on that
          table could fail with the exception message <code class="ph codeph">Failed to load metadata for table:
          default.stats_test</code>.
        </p>


        <p class="p">
          <strong class="ph b">Bug:</strong>
          <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-1416" target="_blank">https://issues.apache.org/jira/browse/IMPALA-1416</a> IMPALA-1416
        </p>


        <p class="p">
          <strong class="ph b">Workaround:</strong> Upgrading to a level of <span class="keyword"></span> that includes the fix for HIVE-8627,
          prevents the problem from affecting future <code class="ph codeph">COMPUTE STATS</code> statements. On affected levels
          of <span class="keyword"></span>, or for Impala tables that have become inaccessible, the workaround is to disable the
          <code class="ph codeph">hive.metastore.try.direct.sql</code> setting in the Hive metastore
          <span class="ph filepath">hive-site.xml</span> file and issue the <code class="ph codeph">INVALIDATE METADATA</code> statement for
          the affected table. You do not need to rerun the <code class="ph codeph">COMPUTE STATS</code> statement for the table.
        </p>

      </div>

    </div>

  </div>


  <div class="topic concept nested1" aria-labelledby="ariaid-title200" id="fixed_issues_200">

    <h2 class="title topictitle2" id="ariaid-title200">Issues Fixed in Impala 2.0.0</h2>


    <div class="body conbody">

      <p class="p">
        This section lists the most significant issues fixed in Impala 2.0.0.
      </p>


      <p class="p">
        For the full list of fixed issues in Impala 2.0.0, see
        <a class="xref" href="https://issues.apache.org/jira/issues/?jql=project%3Dimpala+and+fixVersion%3D%22Impala+2.0%22+and+resolution%3D%22Fixed%22" target="_blank">this report in the Impala JIRA tracker</a>.
      </p>


      <p class="p toc inpage"></p>



    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title201" id="IMPALA-995">

      <h3 class="title topictitle3" id="ariaid-title201">Join Hint is dropped when used inside a view</h3>


      <div class="body conbody">

        <p class="p">
          Hints specified within a view query did not take effect when the view was queried, leading to slow
          performance. As part of this fix, Impala now supports hints embedded within comments.
        </p>


        <p class="p">
          <strong class="ph b">Bug:</strong>
          <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-995" target="_blank">IMPALA-995"</a>
        </p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title202" id="IMPALA-1101">

      <h3 class="title topictitle3" id="ariaid-title202">WHERE condition ignored in simple query with RIGHT JOIN</h3>


      <div class="body conbody">

        <p class="p">
          Potential wrong results for some types of queries.
        </p>


        <p class="p">
          <strong class="ph b">Bug:</strong>
          <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-1101" target="_blank">IMPALA-1101"</a>
        </p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title203" id="IMPALA-1102">

      <h3 class="title topictitle3" id="ariaid-title203">Query with self joined table may produce incorrect results</h3>


      <div class="body conbody">

        <p class="p">
          Potential wrong results for some types of queries.
        </p>


        <p class="p">
          <strong class="ph b">Bug:</strong>
          <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-1102" target="_blank">IMPALA-1102"</a>
        </p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title204" id="IMPALA-1118">

      <h3 class="title topictitle3" id="ariaid-title204">Incorrect plan after reordering predicates (inner join following outer join)</h3>


      <div class="body conbody">

        <p class="p">
          Potential wrong results for some types of queries.
        </p>


        <p class="p">
          <strong class="ph b">Bug:</strong>
          <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-1118" target="_blank">IMPALA-1118"</a>
        </p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title205" id="IMPALA-1123">

      <h3 class="title topictitle3" id="ariaid-title205">Combining fragments with compatible data partitions can lead to incorrect results due to type incompatibilities (missing casts).</h3>


      <div class="body conbody">

        <p class="p">
          Potential wrong results for some types of queries.
        </p>


        <p class="p">
          <strong class="ph b">Bug:</strong>
          <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-1123" target="_blank">IMPALA-1123"</a>
        </p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title206" id="IMPALA-1165">

      <h3 class="title topictitle3" id="ariaid-title206">Predicate dropped: Inline view + DISTINCT aggregate in outer query</h3>


      <div class="body conbody">

        <p class="p">
          Potential wrong results for some types of queries.
        </p>


        <p class="p">
          <strong class="ph b">Bug:</strong>
          <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-1165" target="_blank">IMPALA-1165"</a>
        </p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title207" id="IMPALA-1353">

      <h3 class="title topictitle3" id="ariaid-title207">Reuse of a column in JOIN predicate may lead to incorrect results</h3>


      <div class="body conbody">

        <p class="p">
          Potential wrong results for some types of queries.
        </p>


        <p class="p">
          <strong class="ph b">Bug:</strong>
          <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-1353" target="_blank">IMPALA-1353"</a>
        </p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title208" id="IMPALA-1105">

      <h3 class="title topictitle3" id="ariaid-title208">Usage of TRUNC with string timestamp reliably crashes node</h3>


      <div class="body conbody">

        <p class="p">
          Serious error for certain combinations of function calls and data types.
        </p>


        <p class="p">
          <strong class="ph b">Bug:</strong>
          <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-1105" target="_blank">IMPALA-1105"</a>
        </p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title209" id="IMPALA-1109">

      <h3 class="title topictitle3" id="ariaid-title209">Timestamp Cast Returns invalid TIMESTAMP</h3>


      <div class="body conbody">

        <p class="p">
          Serious error for certain combinations of function calls and data types.
        </p>


        <p class="p">
          <strong class="ph b">Bug:</strong>
          <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-1109" target="_blank">IMPALA-1109"</a>
        </p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title210" id="IMPALA-1121">

      <h3 class="title topictitle3" id="ariaid-title210">IllegalStateException upon JOIN of DECIMAL columns with different precision</h3>


      <div class="body conbody">

        <p class="p">
          <code class="ph codeph">DECIMAL</code> columns with different precision could not be compared in join predicates.
        </p>


        <p class="p">
          <strong class="ph b">Bug:</strong>
          <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-1121" target="_blank">IMPALA-1121"</a>
        </p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title211" id="IMPALA-1104">

      <h3 class="title topictitle3" id="ariaid-title211">Allow creating Avro tables without column definitions. Allow COMPUTE STATS to always work on Impala-created Avro tables.</h3>


      <div class="body conbody">

        <p class="p">
          Hive-created Avro tables with columns specified by a JSON file or literal could produce errors when
          queried in Impala, and could not be used with the <code class="ph codeph">COMPUTE STATS</code> statement. Now you can
          create such tables in Impala to avoid such errors.
        </p>


        <p class="p">
          <strong class="ph b">Bug:</strong>
          <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-1104" target="_blank">IMPALA-1104"</a>
        </p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title212" id="IMPALA-1133">

      <h3 class="title topictitle3" id="ariaid-title212">Ensure all webserver output is escaped</h3>


      <div class="body conbody">

        <p class="p">
          The Impala debug web UI did not properly encode all output.
        </p>


        <p class="p">
          <strong class="ph b">Bug:</strong>
          <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-1133" target="_blank">IMPALA-1133"</a>
        </p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title213" id="IMPALA-1236">

      <h3 class="title topictitle3" id="ariaid-title213">Queries with union in inline view have empty resource requests</h3>


      <div class="body conbody">

        <p class="p">
          Certain queries could run without obeying the limits imposed by resource management.
        </p>


        <p class="p">
          <strong class="ph b">Bug:</strong>
          <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-1236" target="_blank">IMPALA-1236"</a>
        </p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title214" id="IMPALA-1279">

      <h3 class="title topictitle3" id="ariaid-title214">Impala does not employ ACLs when checking path permissions for LOAD and INSERT</h3>


      <div class="body conbody">

        <p class="p">
          Certain <code class="ph codeph">INSERT</code> and <code class="ph codeph">LOAD DATA</code> statements could fail unnecessarily, if
          the target directories in HDFS had restrictive HDFS permissions, but those permissions were overridden by
          HDFS extended ACLs.
        </p>


        <p class="p">
          <strong class="ph b">Bug:</strong>
          <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-1279" target="_blank">IMPALA-1279"</a>
        </p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title215" id="IMPALA-1334">

      <h3 class="title topictitle3" id="ariaid-title215">Impala does not map principals to lowercase, affecting Sentry authorisation</h3>


      <div class="body conbody">

        <p class="p">
          In a Kerberos environment, the principal name was not mapped to lowercase, causing issues when a user
          logged in with an uppercase principal name and Sentry authorization was enabled.
        </p>


        <p class="p">
          <strong class="ph b">Bug:</strong>
          <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-1334" target="_blank">IMPALA-1334"</a>
        </p>

      </div>

    </div>

  </div>


  <div class="topic concept nested1" aria-labelledby="ariaid-title216" id="fixed_issues_144">
  <h2 class="title topictitle2" id="ariaid-title216">Issues Fixed in Impala 1.4.4</h2>

    <div class="body conbody">

      <p class="p">
      </p>


    </div>

  </div>


  <div class="topic concept nested1" aria-labelledby="ariaid-title217" id="fixed_issues_143">

    <h2 class="title topictitle2" id="ariaid-title217">Issues Fixed in Impala 1.4.3</h2>


    <div class="body conbody">

      <p class="p">
        Impala 1.4.3 includes fixes to address what is known as the POODLE vulnerability in SSLv3. SSLv3 access is
        disabled in the Impala debug web UI.
      </p>


    </div>

  </div>


  <div class="topic concept nested1" aria-labelledby="ariaid-title218" id="fixed_issues_142">

    <h2 class="title topictitle2" id="ariaid-title218">Issues Fixed in Impala 1.4.2</h2>


    <div class="body conbody">

      <p class="p">
        This section lists the most significant issues fixed in Impala 1.4.2.
      </p>


      <p class="p">
        For the full list of fixed issues in Impala 1.4.2, see
        <a class="xref" href="https://issues.apache.org/jira/issues/?jql=project%3Dimpala+and+fixVersion%3D%22Impala+1.4.2%22+and+resolution%3D%22Fixed%22" target="_blank">this report in the Impala JIRA tracker</a>.
      </p>


      <p class="p toc inpage"></p>

    </div>

  </div>


  <div class="topic concept nested1" aria-labelledby="ariaid-title219" id="fixed_issues_141">

    <h2 class="title topictitle2" id="ariaid-title219">Issues Fixed in Impala 1.4.1</h2>


    <div class="body conbody">

      <p class="p">
        This section lists the most significant issues fixed in Impala 1.4.1.
      </p>


      <p class="p">
        For the full list of fixed issues in Impala 1.4.1, see
        <a class="xref" href="https://issues.apache.org/jira/issues/?jql=project%3Dimpala+and+fixVersion%3D%22Impala+1.4.1%22+and+resolution%3D%22Fixed%22" target="_blank">this report in the Impala JIRA tracker</a>.
      </p>


      <p class="p toc inpage"></p>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title220" id="impalad_boost_exception">

      <h3 class="title topictitle3" id="ariaid-title220">impalad terminating with Boost exception</h3>


      <div class="body conbody">

        <p class="p">
          Occasionally, a non-trivial query run through Llama could encounter a serious error. The detailed error
          in the log was:
        </p>


<pre class="pre codeblock"><code>boost::exception_detail::clone_impl
  &lt;boost::exception_detail::error_info_injector&lt;boost::lock_error&gt; &gt;
</code></pre>

        <p class="p">
          <strong class="ph b">Severity:</strong> High
        </p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title221" id="string_format_logs">

      <h3 class="title topictitle3" id="ariaid-title221">Impalad uses wrong string format when writing logs</h3>


      <div class="body conbody">

        <p class="p">
          Impala log files could contain internal error messages due to a problem formatting certain strings. The
          messages consisted of a Java call stack starting with:
        </p>


<pre class="pre codeblock"><code>jni-util.cc:177] java.util.MissingFormatArgumentException: Format specifier 's'
</code></pre>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title222" id="IMPALA-1107">

      <h3 class="title topictitle3" id="ariaid-title222">Update HS2 client API.</h3>


      <div class="body conbody">

        <p class="p">
          A downlevel version of the HiveServer2 API could cause difficulty retrieving the precision and scale of a
          <code class="ph codeph">DECIMAL</code> value.
        </p>


        <p class="p">
          <strong class="ph b">Bug:</strong>
          <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-1107" target="_blank">IMPALA-1107</a>
        </p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title223" id="IMPALA-1093">

      <h3 class="title topictitle3" id="ariaid-title223">Impalad catalog updates can fail with error: "IllegalArgumentException: fromKey out of range"</h3>


      <div class="body conbody">

        <p class="p">
          The error in the title could occur following a DDL statement. This issue was discovered during internal
          testing and has not been reported in customer environments.
        </p>


        <p class="p">
          <strong class="ph b">Bug:</strong>
          <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-1093" target="_blank">IMPALA-1093</a>
        </p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title224" id="IMPALA-1131">

      <h3 class="title topictitle3" id="ariaid-title224">"Total" time counter does not capture all the network transmit time</h3>


      <div class="body conbody">

        <p class="p">
          The time for some network operations was not counted in the report of total time for a query, making it
          difficult to diagnose network-related performance issues.
        </p>


        <p class="p">
          <strong class="ph b">Bug:</strong>
          <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-1131" target="_blank">IMPALA-1131</a>
        </p>

      </div>

    </div>




    <div class="topic concept nested2" aria-labelledby="ariaid-title225" id="IMPALA-1149">

      <h3 class="title topictitle3" id="ariaid-title225">Impala will crash when reading certain Avro files containing bytes data</h3>


      <div class="body conbody">

        <p class="p">
          Certain Avro fields for byte data could cause Impala to be unable to read an Avro data file, even if the
          field was not part of the Impala table definition. With this fix, Impala can now read these Avro data
          files, although Impala queries cannot refer to the <span class="q">"bytes"</span> fields.
        </p>


        <p class="p">
          <strong class="ph b">Bug:</strong>
          <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-1149" target="_blank">IMPALA-1149</a>
        </p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title226" id="IMPALA-1142">

      <h3 class="title topictitle3" id="ariaid-title226">Support specifying a custom AuthorizationProvider in Impala</h3>


      <div class="body conbody">

        <p class="p">
          The <code class="ph codeph">--authorization_policy_provider_class</code> option for <span class="keyword cmdname">impalad</span> was
          added back. This option specifies a custom <code class="ph codeph">AuthorizationProvider</code> class rather than the
          default <code class="ph codeph">HadoopGroupAuthorizationProvider</code>. It had been used for internal testing, then
          removed in Impala 1.4.0, but it was considered useful by some customers.
        </p>


        <p class="p">
          <strong class="ph b">Bug:</strong>
          <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-1142" target="_blank">IMPALA-1142</a>
        </p>

      </div>

    </div>

  </div>


  <div class="topic concept nested1" aria-labelledby="ariaid-title227" id="fixed_issues_140">

    <h2 class="title topictitle2" id="ariaid-title227">Issues Fixed in Impala 1.4.0</h2>


    <div class="body conbody">

      <p class="p">
        This section lists the most significant issues fixed in Impala 1.4.0.
      </p>


      <p class="p">
        For the full list of fixed issues in Impala 1.4.0, see
        <a class="xref" href="https://issues.apache.org/jira/issues/?jql=project%3Dimpala+and+fixVersion%3D%22Impala+1.4%22+and+resolution%3D%22Fixed%22" target="_blank">this report in the Impala JIRA tracker</a>.
      </p>


      <p class="p toc inpage"></p>

    </div>






    <div class="topic concept nested2" aria-labelledby="ariaid-title228" id="IMPALA-1019">



      <h3 class="title topictitle3" id="ariaid-title228">Failed DCHECK in disk-io-mgr-reader-context.cc:174</h3>


      <div class="body conbody">

        <p class="p">
          The serious error in the title could occur, with the supplemental message:
        </p>


<pre class="pre codeblock"><code>num_used_buffers_ &lt; 0: #used=-1 during cancellation HDFS cached data</code></pre>

        <p class="p">
          The issue was due to the use of HDFS caching with data files accessed by Impala. Support for HDFS caching
          in Impala was introduced in <span class="keyword">Impala 1.4.0</span>. The fix for this issue was backported to Impala
          1.3.x, and is the only change in Impala 1.3.2.
        </p>


        <p class="p">
          <strong class="ph b">Bug:</strong>
          <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-1019" target="_blank">IMPALA-1019</a>
        </p>


        <p class="p">
          <strong class="ph b">Resolution:</strong> This issue is fixed in Impala 1.3.2. The addition of HDFS caching
          support in Impala 1.4 means that this issue does not apply to any new level of Impala.
        </p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title229" id="IMPALA-489">

      <h3 class="title topictitle3" id="ariaid-title229">impala-shell only works with ASCII characters</h3>


      <div class="body conbody">

        <p class="p">
          The <span class="keyword cmdname">impala-shell</span> interpreter could encounter errors processing SQL statements
          containing non-ASCII characters.
        </p>


        <p class="p">
          <strong class="ph b">Bug:</strong>
          <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-489" target="_blank">IMPALA-489</a>
        </p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title230" id="IMPALA-962">

      <h3 class="title topictitle3" id="ariaid-title230">The extended view definition SQL text in Views created by Impala should always have fully-qualified table names</h3>


      <div class="body conbody">

        <p class="p">
          When a view was accessed while inside a different database, references to tables were not resolved unless
          the names were fully qualified when the view was created.
        </p>


        <p class="p">
          <strong class="ph b">Bug:</strong>
          <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-962" target="_blank">IMPALA-962</a>
        </p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title231" id="IMPALA-741">

      <h3 class="title topictitle3" id="ariaid-title231">Impala forgets about partitions with non-existant locations</h3>


      <div class="body conbody">

        <p class="p">
          If an <code class="ph codeph">ALTER TABLE</code> specified a non-existent HDFS location for a partition, afterwards
          Impala would not be able to access the partition at all.
        </p>


        <p class="p">
          <strong class="ph b">Bug:</strong>
          <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-741" target="_blank">IMPALA-741</a>
        </p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title232" id="IMPALA-834">

      <h3 class="title topictitle3" id="ariaid-title232">CREATE TABLE LIKE fails if source is a view</h3>


      <div class="body conbody">

        <p class="p">
          The <code class="ph codeph">CREATE TABLE LIKE</code> clause was enhanced to be able to create a table with the same
          column definitions as a view. The resulting table is a text table unless the <code class="ph codeph">STORED AS</code>
          clause is specified, because a view does not have an associated file format to inherit.
        </p>


        <p class="p">
          <strong class="ph b">Bug:</strong>
          <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-834" target="_blank">IMPALA-834</a>
        </p>

      </div>

    </div>




    <div class="topic concept nested2" aria-labelledby="ariaid-title233" id="IMPALA-887">

      <h3 class="title topictitle3" id="ariaid-title233">Improve partition pruning time</h3>


      <div class="body conbody">

        <p class="p">
          Operations on tables with many partitions could be slow due to the time to evaluate which partitions were
          affected. The partition pruning code was speeded up substantially.
        </p>


        <p class="p">
          <strong class="ph b">Bug:</strong>
          <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-887" target="_blank">IMPALA-887</a>
        </p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title234" id="IMPALA-1003">

      <h3 class="title topictitle3" id="ariaid-title234">Improve compute stats performance</h3>


      <div class="body conbody">

        <p class="p">
          The performance of the <code class="ph codeph">COMPUTE STATS</code> statement was improved substantially. The
          efficiency of its internal operations was improved, and some statistics are no longer gathered because
          they are not currently used for planning Impala queries.
        </p>


        <p class="p">
          <strong class="ph b">Bug:</strong>
          <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-1003" target="_blank">IMPALA-1003</a>
        </p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title235" id="IMPALA-185">

      <h3 class="title topictitle3" id="ariaid-title235">When I run CREATE TABLE new_table LIKE avro_table, the schema does not get mapped properly from an avro schema to a hive schema</h3>


      <div class="body conbody">

        <p class="p">
          After a <code class="ph codeph">CREATE TABLE LIKE</code> statement using an Avro table as the source, the new table
          could have incorrect metadata and be inaccessible, depending on how the original Avro table was created.
        </p>


        <p class="p">
          <strong class="ph b">Bug:</strong>
          <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-185" target="_blank">IMPALA-185</a>
        </p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title236" id="IMPALA-1046">

      <h3 class="title topictitle3" id="ariaid-title236">Race condition in IoMgr. Blocked ranges enqueued after cancel.</h3>


      <div class="body conbody">

        <p class="p">
          Impala could encounter a serious error after a query was cancelled.
        </p>


        <p class="p">
          <strong class="ph b">Bug:</strong>
          <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-1046" target="_blank">IMPALA-1046</a>
        </p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title237" id="IMPALA-1083">

      <h3 class="title topictitle3" id="ariaid-title237">Deadlock in scan node</h3>


      <div class="body conbody">

        <p class="p">
          A deadlock condition could make all <span class="keyword cmdname">impalad</span> daemons hang, making the cluster
          unresponsive for Impala queries.
        </p>


        <p class="p">
          <strong class="ph b">Bug:</strong>
          <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-1083" target="_blank">IMPALA-1083</a>
        </p>

      </div>

    </div>

  </div>


  <div class="topic concept nested1" aria-labelledby="ariaid-title238" id="fixed_issues_133">

    <h2 class="title topictitle2" id="ariaid-title238">Issues Fixed in Impala 1.3.3</h2>


    <div class="body conbody">

      <p class="p">
        Impala 1.3.3 includes fixes to address what is known as the POODLE vulnerability in SSLv3. SSLv3 access is
        disabled in the Impala debug web UI.
      </p>


      <p class="p toc inpage"></p>

    </div>

  </div>


  <div class="topic concept nested1" aria-labelledby="ariaid-title239" id="fixed_issues_132">

    <h2 class="title topictitle2" id="ariaid-title239">Issues Fixed in Impala 1.3.2</h2>


    <div class="body conbody">

      <p class="p">
        This backported bug fix is the only change between Impala 1.3.1 and Impala 1.3.2.
      </p>


    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title240" id="IMPALA-1019-132">



      <h3 class="title topictitle3" id="ariaid-title240">Failed DCHECK in disk-io-mgr-reader-context.cc:174</h3>


      <div class="body conbody">

        <p class="p">
          The serious error in the title could occur, with the supplemental message:
        </p>


<pre class="pre codeblock"><code>num_used_buffers_ &lt; 0: #used=-1 during cancellation HDFS cached data</code></pre>

        <p class="p">
          The issue was due to the use of HDFS caching with data files accessed by Impala. Support for HDFS caching
          in Impala was introduced in <span class="keyword">Impala 1.4.0</span>. The fix for this issue was backported to Impala
          1.3.x, and is the only change in Impala 1.3.2.
        </p>


        <p class="p">
          <strong class="ph b">Bug:</strong>
          <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-1019" target="_blank">IMPALA-1019</a>
        </p>


        <p class="p">
          <strong class="ph b">Resolution:</strong> This issue is fixed in Impala 1.3.2. The addition of HDFS caching
          support in Impala 1.4 means that this issue does not apply to any new level of Impala.
        </p>

      </div>

    </div>

  </div>


  <div class="topic concept nested1" aria-labelledby="ariaid-title241" id="fixed_issues_131">

    <h2 class="title topictitle2" id="ariaid-title241">Issues Fixed in Impala 1.3.1</h2>


    <div class="body conbody">

      <p class="p">
        This section lists the most significant issues fixed in Impala 1.3.1.
      </p>


      <p class="p">
        For the full list of fixed issues in Impala 1.3.1, see
        <a class="xref" href="https://issues.apache.org/jira/issues/?jql=project%3Dimpala+and+fixVersion%3D%22Impala+1.3.1%22+and+resolution%3D%22Fixed%22" target="_blank">this report in the Impala JIRA tracker</a>.
      </p>


      <p class="p toc inpage"></p>

    </div>




    <div class="topic concept nested2" aria-labelledby="ariaid-title242" id="IMPALA-904">

      <h3 class="title topictitle3" id="ariaid-title242">Impalad crashes when left joining inline view that has aggregate using distinct</h3>


      <div class="body conbody">

        <p class="p">
          Impala could encounter a severe error in a query combining a left outer join with an inline view
          containing a <code class="ph codeph">COUNT(DISTINCT)</code> operation.
        </p>


        <p class="p">
          <strong class="ph b">Bug:</strong>
          <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-904" target="_blank">IMPALA-904</a>
        </p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title243" id="IMPALA-901">

      <h3 class="title topictitle3" id="ariaid-title243">Incorrect result with group by query with null value in group by data</h3>


      <div class="body conbody">

        <p class="p">
          If the result of a <code class="ph codeph">GROUP BY</code> operation is <code class="ph codeph">NULL</code>, the resulting row might
          be omitted from the result set. This issue depends on the data values and data types in the table.
        </p>


        <p class="p">
          <strong class="ph b">Bug:</strong>
          <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-901" target="_blank">IMPALA-901</a>
        </p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title244" id="IMPALA-786">

      <h3 class="title topictitle3" id="ariaid-title244">Drop Function does not clear local library cache</h3>


      <div class="body conbody">

        <p class="p">
          When a UDF is dropped through the <code class="ph codeph">DROP FUNCTION</code> statement, and then the UDF is
          re-created with a new <code class="ph codeph">.so</code> library or JAR file, the original version of the UDF is still
          used when the UDF is called from queries.
        </p>


        <p class="p">
          <strong class="ph b">Bug:</strong>
          <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-786" target="_blank">IMPALA-786</a>
        </p>


        <p class="p">
          <strong class="ph b">Workaround:</strong> Restart the <span class="keyword cmdname">impalad</span> daemon on all nodes.
        </p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title245" id="IMPALA-762">

      <h3 class="title topictitle3" id="ariaid-title245">Compute stats doesn't propagate underlying error correctly</h3>


      <div class="body conbody">

        <p class="p">
          If a <code class="ph codeph">COMPUTE STATS</code> statement encountered an error, the error message is <span class="q">"Query
          aborted"</span> with no further detail. Common reasons why a <code class="ph codeph">COMPUTE STATS</code> statement might
          fail include network errors causing the coordinator node to lose contact with other
          <span class="keyword cmdname">impalad</span> instances, and column names that match Impala
          <a class="xref" href="impala_reserved_words.html#reserved_words">reserved words</a>. (Currently, if a column name
          is an Impala reserved word, <code class="ph codeph">COMPUTE STATS</code> always returns an error.)
        </p>


        <p class="p">
          <strong class="ph b">Bug:</strong>
          <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-762" target="_blank">IMPALA-762</a>
        </p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title246" id="IMPALA-624">

      <h3 class="title topictitle3" id="ariaid-title246">Inserts should respect changes in partition location</h3>


      <div class="body conbody">

        <p class="p">
          After an <code class="ph codeph">ALTER TABLE</code> statement that changes the <code class="ph codeph">LOCATION</code> property of a
          partition, a subsequent <code class="ph codeph">INSERT</code> statement would always use a path derived from the base
          data directory for the table.
        </p>


        <p class="p">
          <strong class="ph b">Bug:</strong>
          <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-624" target="_blank">IMPALA-624</a>
        </p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title247" id="IMPALA-13">

      <h3 class="title topictitle3" id="ariaid-title247">Text data with carriage returns generates wrong results for count(*)</h3>


      <div class="body conbody">

        <p class="p">
          A <code class="ph codeph">COUNT(*)</code> operation could return the wrong result for text tables using nul characters
          (ASCII value 0) as delimiters.
        </p>


        <p class="p">
          <strong class="ph b">Bug:</strong>
          <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-13" target="_blank">IMPALA-13</a>
        </p>


        <p class="p">
          <strong class="ph b">Workaround:</strong> Impala adds support for ASCII 0 characters as delimiters through the clause
          <code class="ph codeph">FIELDS TERMINATED BY '\0'</code>.
        </p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title248" id="IMPALA-488">

      <h3 class="title topictitle3" id="ariaid-title248">IO Mgr should take instance memory limit into account when creating io buffers</h3>


      <div class="body conbody">

        <p class="p">
          Impala could allocate more memory than necessary during certain operations.
        </p>


        <p class="p">
          <strong class="ph b">Bug:</strong>
          <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-488" target="_blank">IMPALA-488</a>
        </p>


        <p class="p">
          <strong class="ph b">Workaround:</strong> Before issuing a <code class="ph codeph">COMPUTE STATS</code> statement for a Parquet table, reduce
          the number of threads used in that operation by issuing <code class="ph codeph">SET NUM_SCANNER_THREADS=2</code> in
          <span class="keyword cmdname">impala-shell</span>. Then issue <code class="ph codeph">UNSET NUM_SCANNER_THREADS</code> before continuing
          with queries.
        </p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title249" id="IMPALA-827">

      <h3 class="title topictitle3" id="ariaid-title249">Impala should provide an option for new sub directories to automatically inherit the permissions of the parent directory</h3>


      <div class="body conbody">

        <p class="p">
          When new subdirectories are created underneath a partitioned table by an <code class="ph codeph">INSERT</code>
          statement, previously the new subdirectories always used the default HDFS permissions for the
          <code class="ph codeph">impala</code> user, which might not be suitable for directories intended to be read and written
          by other components also.
        </p>


        <p class="p">
          <strong class="ph b">Bug:</strong>
          <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-827" target="_blank">IMPALA-827</a>
        </p>


        <p class="p">
          <strong class="ph b">Resolution:</strong> In Impala 1.3.1 and higher, you can specify the
          <code class="ph codeph">--insert_inherit_permissions</code> configuration when starting the <span class="keyword cmdname">impalad</span>
          daemon.
        </p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title250" id="IMPALA-888">

      <h3 class="title topictitle3" id="ariaid-title250">Illegal state exception (or crash) in query with UNION in inline view</h3>


      <div class="body conbody">

        <p class="p">
          Impala could encounter a severe error in a query where the <code class="ph codeph">FROM</code> list contains an inline
          view that includes a <code class="ph codeph">UNION</code>. The exact type of the error varies.
        </p>


        <p class="p">
          <strong class="ph b">Bug:</strong>
          <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-888" target="_blank">IMPALA-888</a>
        </p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title251" id="IMPALA-945">

      <h3 class="title topictitle3" id="ariaid-title251">INSERT column reordering doesn't work with SELECT clause</h3>


      <div class="body conbody">

        <p class="p">
          The ability to specify a subset of columns in an <code class="ph codeph">INSERT</code> statement, with order different
          than in the target table, was not working as intended.
        </p>


        <p class="p">
          <strong class="ph b">Bug:</strong>
          <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-945" target="_blank">IMPALA-945</a>
        </p>

      </div>

    </div>

  </div>


  <div class="topic concept nested1" aria-labelledby="ariaid-title252" id="fixed_issues_130">

    <h2 class="title topictitle2" id="ariaid-title252">Issues Fixed in Impala 1.3.0</h2>


    <div class="body conbody">

      <p class="p">
        This section lists the most significant issues fixed in Impala 1.3.0, primarily issues that could cause
        wrong results, or cause problems running the <code class="ph codeph">COMPUTE STATS</code> statement, which is very
        important for performance and scalability.
      </p>


      <p class="p">
        For the full list of fixed issues, see
        <a class="xref" href="https://issues.apache.org/jira/issues/?jql=project%3Dimpala+and+fixVersion%3D%22Impala+1.3%22+and+resolution%3D%22Fixed%22" target="_blank">this report in the Impala JIRA tracker</a>.
      </p>


      <p class="p toc inpage"></p>

    </div>




    <div class="topic concept nested2" aria-labelledby="ariaid-title253" id="IMPALA-860">

      <h3 class="title topictitle3" id="ariaid-title253">Inner join after right join may produce wrong results</h3>


      <div class="body conbody">

        <p class="p">
          The automatic join reordering optimization could incorrectly reorder queries with an outer join or semi
          join followed by an inner join, producing incorrect results.
        </p>


        <p class="p">
          <strong class="ph b">Bug:</strong>
          <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-860" target="_blank">IMPALA-860</a>
        </p>


        <p class="p">
          <strong class="ph b">Workaround:</strong> Including the <code class="ph codeph">STRAIGHT_JOIN</code> keyword in the query prevented the issue
          from occurring.
        </p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title254" id="IMPALA-850">

      <h3 class="title topictitle3" id="ariaid-title254">Incorrect results with codegen on multi-column group by with NULLs.</h3>


      <div class="body conbody">

        <p class="p">
          A query with a <code class="ph codeph">GROUP BY</code> clause referencing multiple columns could introduce incorrect
          <code class="ph codeph">NULL</code> values in some columns of the result set. The incorrect <code class="ph codeph">NULL</code>
          values could appear in rows where a different <code class="ph codeph">GROUP BY</code> column actually did return
          <code class="ph codeph">NULL</code>.
        </p>


        <p class="p">
          <strong class="ph b">Bug:</strong>
          <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-850" target="_blank">IMPALA-850</a>
        </p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title255" id="IMPALA-845">

      <h3 class="title topictitle3" id="ariaid-title255">Using distinct inside aggregate function may cause incorrect result when using having clause</h3>


      <div class="body conbody">

        <p class="p">
          A query could return incorrect results if it combined an aggregate function call, a
          <code class="ph codeph">DISTINCT</code> operator, and a <code class="ph codeph">HAVING</code> clause, without a <code class="ph codeph">GROUP
          BY</code> clause.
        </p>


        <p class="p">
          <strong class="ph b">Bug:</strong>
          <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-845" target="_blank">IMPALA-845</a>
        </p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title256" id="IMPALA-831">

      <h3 class="title topictitle3" id="ariaid-title256">Aggregation on union inside (inline) view not distributed properly.</h3>


      <div class="body conbody">

        <p class="p">
          An aggregation query or a query with <code class="ph codeph">ORDER BY</code> and <code class="ph codeph">LIMIT</code> could be
          executed on a single node in some cases, rather than distributed across the cluster. This issue affected
          queries whose <code class="ph codeph">FROM</code> clause referenced an inline view containing a <code class="ph codeph">UNION</code>.
        </p>


        <p class="p">
          <strong class="ph b">Bug:</strong>
          <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-831" target="_blank">IMPALA-831</a>
        </p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title257" id="IMPALA-817">

      <h3 class="title topictitle3" id="ariaid-title257">Wrong expression may be used in aggregate query if there are multiple similar expressions</h3>


      <div class="body conbody">

        <p class="p">
          If a <code class="ph codeph">GROUP BY</code> query referenced the same columns multiple times using different
          operators, result rows could contain multiple copies of the same expression.
        </p>


        <p class="p">
          <strong class="ph b">Bug:</strong>
          <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-817" target="_blank">IMPALA-817</a>
        </p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title258" id="IMPALA-765">

      <h3 class="title topictitle3" id="ariaid-title258">Incorrect results when changing the order of aggregates in the select list with codegen enabled</h3>


      <div class="body conbody">

        <p class="p">
          Referencing the same columns in both a <code class="ph codeph">COUNT()</code> and a <code class="ph codeph">SUM()</code> call in the
          same query, or some other combinations of aggregate function calls, could incorrectly return a result of
          0 from one of the aggregate functions. This issue affected references to <code class="ph codeph">TINYINT</code> and
          <code class="ph codeph">SMALLINT</code> columns, but not <code class="ph codeph">INT</code> or <code class="ph codeph">BIGINT</code> columns.
        </p>


        <p class="p">
          <strong class="ph b">Bug:</strong>
          <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-765" target="_blank">IMPALA-765</a>
        </p>


        <p class="p">
          <strong class="ph b">Workaround:</strong> Setting the query option <code class="ph codeph">DISABLE_CODEGEN=TRUE</code> prevented the incorrect
          results. Switching the order of the function calls could also prevent the issue from occurring.
        </p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title259" id="IMPALA-723">

      <h3 class="title topictitle3" id="ariaid-title259">Union queries give Wrong result in a UNION followed by SIGSEGV in another union</h3>


      <div class="body conbody">

        <p class="p">
          A <code class="ph codeph">UNION</code> query could produce a wrong result, followed by a serious error for a subsequent
          <code class="ph codeph">UNION</code> query.
        </p>


        <p class="p">
          <strong class="ph b">Bug:</strong>
          <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-723" target="_blank">IMPALA-723</a>
        </p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title260" id="IMPALA-729">

      <h3 class="title topictitle3" id="ariaid-title260">String data in MR-produced parquet files may be read incorrectly</h3>


      <div class="body conbody">

        <p class="p">
          Impala could return incorrect string results when reading uncompressed Parquet data files containing
          multiple row groups. This issue only affected Parquet data files produced by MapReduce jobs.
        </p>


        <p class="p">
          <strong class="ph b">Bug:</strong>
          <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-729" target="_blank">IMPALA-729</a>
        </p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title261" id="IMPALA-777">

      <h3 class="title topictitle3" id="ariaid-title261">Compute stats need to use quotes with identifiers that are Impala keywords</h3>


      <div class="body conbody">

        <p class="p">
          Using a column or table name that conflicted with Impala keywords could prevent running the
          <code class="ph codeph">COMPUTE STATS</code> statement for the table.
        </p>


        <p class="p">
          <strong class="ph b">Bug:</strong>
          <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-777" target="_blank">IMPALA-777</a>
        </p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title262" id="IMPALA-903">

      <h3 class="title topictitle3" id="ariaid-title262">COMPUTE STATS child queries do not inherit parent query options.</h3>


      <div class="body conbody">

        <p class="p">
          The <code class="ph codeph">COMPUTE STATS</code> statement did not use the setting of the <code class="ph codeph">MEM_LIMIT</code>
          query option in <span class="keyword cmdname">impala-shell</span>, potentially causing problems gathering statistics for
          wide Parquet tables.
        </p>


        <p class="p">
          <strong class="ph b">Bug:</strong>
          <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-903" target="_blank">IMPALA-903</a>
        </p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title263" id="IMPALA-880">

      <h3 class="title topictitle3" id="ariaid-title263">COMPUTE STATS should update partitions in batches</h3>


      <div class="body conbody">

        <p class="p">
          The <code class="ph codeph">COMPUTE STATS</code> statement could be slow or encounter a timeout while analyzing a table
          with many partitions.
        </p>


        <p class="p">
          <strong class="ph b">Bug:</strong>
          <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-880" target="_blank">IMPALA-880</a>
        </p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title264" id="IMPALA-867">

      <h3 class="title topictitle3" id="ariaid-title264">Fail early (in analysis) when COMPUTE STATS is run against Avro table with no columns</h3>


      <div class="body conbody">

        <p class="p">
          If the columns for an Avro table were all defined in the <code class="ph codeph">TBLPROPERTIES</code> or
          <code class="ph codeph">SERDEPROPERTIES</code> clauses, the <code class="ph codeph">COMPUTE STATS</code> statement would fail after
          completely analyzing the table, potentially causing a long delay. Although the <code class="ph codeph">COMPUTE
          STATS</code> statement still does not work for such tables, now the problem is detected and reported
          immediately.
        </p>


        <p class="p">
          <strong class="ph b">Bug:</strong>
          <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-867" target="_blank">IMPALA-867</a>
        </p>


        <p class="p">
          <strong class="ph b">Workaround:</strong> Re-create the Avro table with columns defined in SQL style, using the output of
          <code class="ph codeph">SHOW CREATE TABLE</code>. (See the JIRA page for detailed steps.)
        </p>

      </div>

    </div>

  </div>


  <div class="topic concept nested1" aria-labelledby="ariaid-title265" id="fixed_issues_124">

    <h2 class="title topictitle2" id="ariaid-title265">Issues Fixed in the 1.2.4 Release</h2>


    <div class="body conbody">

      <p class="p">
        This section lists the most significant issues fixed in Impala 1.2.4. For the full list of fixed issues,
        see
        <a class="xref" href="https://issues.apache.org/jira/issues/?jql=project%3Dimpala+and+fixVersion%3D%22Impala+1.2.4%22+and+resolution%3D%22Fixed%22" target="_blank">this report in the Impala JIRA tracker</a>.
      </p>


      <p class="p toc inpage"></p>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title266" id="IMPALA-818">

      <h3 class="title topictitle3" id="ariaid-title266">The Catalog Server exits with an OOM error after a certain number of CREATE statements</h3>


      <div class="body conbody">

        <p class="p">
          A large number of concurrent <code class="ph codeph">CREATE TABLE</code> statements can cause the
          <span class="keyword cmdname">catalogd</span> process to consume excessive memory, and potentially be killed due to an
          out-of-memory condition.
        </p>


        <p class="p">
          <strong class="ph b">Bug:</strong>
          <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-818" target="_blank">IMPALA-818</a>
        </p>


        <p class="p">
          <strong class="ph b">Workaround:</strong> Restart the <span class="keyword cmdname">catalogd</span> service and re-try the DDL operations that
          failed.
        </p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title267" id="IMPALA-821">

      <h3 class="title topictitle3" id="ariaid-title267">Catalog Server consumes excessive cpu cycle</h3>


      <div class="body conbody">

        <p class="p">
          A large number of tables and partitions could result in unnecessary CPU overhead during Impala idle time
          and background operations.
        </p>


        <p class="p">
          <strong class="ph b">Bug:</strong>
          <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-821" target="_blank">IMPALA-821</a>
        </p>


        <p class="p">
          <strong class="ph b">Resolution:</strong> Catalog server processing was optimized in several ways.
        </p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title268" id="IMPALA-828">

      <h3 class="title topictitle3" id="ariaid-title268">Query against Avro table crashes Impala with codegen enabled</h3>


      <div class="body conbody">

        <p class="p">
          A query against a <code class="ph codeph">TIMESTAMP</code> column in an Avro table could encounter a serious issue.
        </p>


        <p class="p">
          <strong class="ph b">Bug:</strong>
          <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-828" target="_blank">IMPALA-828</a>
        </p>


        <p class="p">
          <strong class="ph b">Workaround:</strong> Set the query option <code class="ph codeph">DISABLE_CODEGEN=TRUE</code>
        </p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title269" id="IMPALA-809">

      <h3 class="title topictitle3" id="ariaid-title269">Statestore seems to send concurrent heartbeats to the same subscriber leading to repeated "Subscriber '<var class="keyword varname">hostname</var>' is registering with statestore, ignoring update" messages</h3>


      <div class="body conbody">

        <p class="p">
          Impala nodes could produce repeated error messages after recovering from a communication error with the
          statestore service.
        </p>


        <p class="p">
          <strong class="ph b">Bug:</strong>
          <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-809" target="_blank">IMPALA-809</a>
        </p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title270" id="IMPALA-805">

      <h3 class="title topictitle3" id="ariaid-title270">Join predicate incorrectly ignored</h3>


      <div class="body conbody">

        <p class="p">
          A join query could produce wrong results if multiple equality comparisons between the same tables
          referred to the same column.
        </p>


        <p class="p">
          <strong class="ph b">Bug:</strong>
          <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-805" target="_blank">IMPALA-805</a>
        </p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title271" id="IMP-1258">

      <h3 class="title topictitle3" id="ariaid-title271">Query result differing between Impala and Hive</h3>


      <div class="body conbody">

        <p class="p">
          Certain outer join queries could return wrong results. If one of the tables involved in the join was an
          inline view, some tests from the <code class="ph codeph">WHERE</code> clauses could be applied to the wrong phase of
          the query.
        </p>


      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title272" id="IMPALA-715">

      <h3 class="title topictitle3" id="ariaid-title272">ArrayIndexOutOfBoundsException / Invalid query handle when reading large HBase cell</h3>


      <div class="body conbody">

        <p class="p">
          An HBase cell could contain a value larger than 32 KB, leading to a serious error when Impala queries
          that table. The error could occur even if the applicable row is not part of the result set.
        </p>


        <p class="p">
          <strong class="ph b">Bug:</strong>
          <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-715" target="_blank">IMPALA-715</a>
        </p>


        <p class="p">
          <strong class="ph b">Workaround:</strong> Use smaller values in the HBase table, or exclude the column containing the large
          value from the result set.
        </p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title273" id="IMPALA-735">

      <h3 class="title topictitle3" id="ariaid-title273">select with distinct and full outer join, impalad coredump</h3>


      <div class="body conbody">

        <p class="p">
          A query involving a <code class="ph codeph">DISTINCT</code> operator combined with a <code class="ph codeph">FULL OUTER JOIN</code>
          could encounter a serious error.
        </p>


        <p class="p">
          <strong class="ph b">Bug:</strong>
          <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-735" target="_blank">IMPALA-735</a>
        </p>


        <p class="p">
          <strong class="ph b">Workaround:</strong> Set the query option <code class="ph codeph">DISABLE_CODEGEN=TRUE</code>
        </p>

      </div>

    </div>




    <div class="topic concept nested2" aria-labelledby="ariaid-title274" id="IMPALA-749">

      <h3 class="title topictitle3" id="ariaid-title274">Impala cannot load tables with more than Short.MAX_VALUE number of partitions</h3>


      <div class="body conbody">

        <p class="p">
          If a table had more than 32,767 partitions, Impala would not recognize the partitions above the 32K limit
          and query results could be incomplete.
        </p>


        <p class="p">
          <strong class="ph b">Bug:</strong>
          <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-749" target="_blank">IMPALA-749</a>
        </p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title275" id="IMP-1188">

      <h3 class="title topictitle3" id="ariaid-title275">Various issues with HBase row key specification</h3>


      <div class="body conbody">

        <p class="p">
          Queries against HBase tables could fail with an error if the row key was compared to a function return
          value rather than a string constant. Also, queries against HBase tables could fail if the
          <code class="ph codeph">WHERE</code> clause contained combinations of comparisons that could not possibly match any row
          key.
        </p>


        <p class="p">
          <strong class="ph b">Resolution:</strong> Queries now return appropriate results when function calls are used in the row key
          comparison. For queries involving non-existent row keys, such as <code class="ph codeph">WHERE <var class="keyword varname">row_key</var>
          IS NULL</code> or where the lower bound is greater than the upper bound, the query succeeds and returns
          an empty result set.
        </p>

      </div>

    </div>

  </div>


  <div class="topic concept nested1" aria-labelledby="ariaid-title276" id="fixed_issues_123">

    <h2 class="title topictitle2" id="ariaid-title276">Issues Fixed in the 1.2.3 Release</h2>


    <div class="body conbody">

      <p class="p">
        This release is a fix release that supercedes Impala 1.2.2, with the same features and fixes as 1.2.2 plus
        one additional fix for compatibility with Parquet files generated outside of Impala by components such as
        Hive, Pig, or MapReduce.
      </p>


      <p class="p toc inpage"></p>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title277" id="IMPALA-720">

      <h3 class="title topictitle3" id="ariaid-title277">Impala cannot read Parquet files with multiple row groups</h3>


      <div class="body conbody">

        <p class="p">
          An early version of the <code class="ph codeph">parquet-mr</code> library writes files that are not readable by
          Impala, due to the presence of multiple row groups. Queries involving these data files might result in a
          crash or a failure with an error such as <span class="q">"Column chunk should not contain two dictionary pages"</span>.
        </p>


        <p class="p">
          This issue does not occur for Parquet files produced by Impala <code class="ph codeph">INSERT</code> statements,
          because Impala only produces files with a single row group.
        </p>


        <p class="p">
          <strong class="ph b">Bug:</strong>
          <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-720" target="_blank">IMPALA-720</a>
        </p>

      </div>

    </div>

  </div>


  <div class="topic concept nested1" aria-labelledby="ariaid-title278" id="fixed_issues_122">

    <h2 class="title topictitle2" id="ariaid-title278">Issues Fixed in the 1.2.2 Release</h2>


    <div class="body conbody">

      <p class="p">
        This section lists the most significant issues fixed in Impala 1.2.2. For the full list of fixed issues,
        see <a class="xref" href="https://issues.apache.org/jira/issues/?jql=project%3Dimpala+and+fixVersion%3D%22Impala+1.2.2%22+and+resolution%3D%22Fixed%22" target="_blank">this report in the Impala JIRA tracker</a>.
      </p>


      <p class="p toc inpage"></p>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title279" id="join_order">

      <h3 class="title topictitle3" id="ariaid-title279">Order of table references in FROM clause is critical for optimal performance</h3>


      <div class="body conbody">

        <p class="p">
          Impala does not currently optimize the join order of queries; instead, it joins tables in the order in
          which they are listed in the FROM clause. Queries that contain one or more large tables on the right hand
          side of joins (either an explicit join expressed as a JOIN statement or a join implicit in the list of
          table references in the FROM clause) may run slowly or crash Impala due to out-of-memory errors. For
          example:
        </p>


<pre class="pre codeblock"><code>SELECT ... FROM small_table JOIN large_table</code></pre>

        <p class="p">
          <strong class="ph b">Anticipated Resolution</strong>: Fixed in Impala 1.2.2.
        </p>


        <p class="p">
          <strong class="ph b">Workaround</strong>: In Impala 1.2.2 and higher, use the <code class="ph codeph">COMPUTE STATS</code> statement to gather
          statistics for each table involved in the join query, after data is loaded. Prior to Impala 1.2.2, modify
          the query, if possible, to join the largest table first. For example:
        </p>


<pre class="pre codeblock"><code>SELECT ... FROM small_table JOIN large_table</code></pre>

        <p class="p">
          should be modified to:
        </p>


<pre class="pre codeblock"><code>SELECT ... FROM large_table JOIN small_table</code></pre>
      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title280" id="IMPALA-694">

      <h3 class="title topictitle3" id="ariaid-title280">Parquet in CDH4.5 writes data files that are sometimes unreadable by Impala</h3>


      <div class="body conbody">

        <p class="p">
          Some Parquet files could be generated by other components that Impala could not read.
        </p>


        <p class="p">
          <strong class="ph b">Bug:</strong>
          <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-694" target="_blank">IMPALA-694</a>
        </p>


        <p class="p">
          <strong class="ph b">Resolution:</strong> The underlying issue is being addressed by a fix in the Parquet libraries. Impala
          1.2.2 works around the problem and reads the existing data files.
        </p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title281" id="IMPALA-699">

      <h3 class="title topictitle3" id="ariaid-title281">Deadlock in statestore when unregistering a subscriber and building a topic update</h3>


      <div class="body conbody">

        <p class="p">
          The statestore service cound experience an internal error leading to a hang.
        </p>


        <p class="p">
          <strong class="ph b">Bug:</strong>
          <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-699" target="_blank">IMPALA-699</a>
        </p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title282" id="IMPALA-687">

      <h3 class="title topictitle3" id="ariaid-title282">IllegalStateException when doing a union involving a group by</h3>


      <div class="body conbody">

        <p class="p">
          A <code class="ph codeph">UNION</code> query where one side involved a <code class="ph codeph">GROUP BY</code> operation could cause
          a serious error.
        </p>


        <p class="p">
          <strong class="ph b">Bug:</strong>
          <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-687" target="_blank">IMPALA-687</a>
        </p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title283" id="IMPALA-689">

      <h3 class="title topictitle3" id="ariaid-title283">Impala Parquet Writer hit DCHECK in RleEncoder</h3>


      <div class="body conbody">

        <p class="p">
          A serious error could occur when doing an <code class="ph codeph">INSERT</code> into a Parquet table.
        </p>


        <p class="p">
          <strong class="ph b">Bug:</strong>
          <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-689" target="_blank">IMPALA-689</a>
        </p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title284" id="IMPALA-695">

      <h3 class="title topictitle3" id="ariaid-title284">Hive UDF jars cannot be loaded by the FE</h3>


      <div class="body conbody">

        <p class="p">
          If the JAR file for a Java-based Hive UDF was not in the <code class="ph codeph">CLASSPATH</code>, the UDF could not be
          called during a query.
        </p>


        <p class="p">
          <strong class="ph b">Bug:</strong>
          <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-695" target="_blank">IMPALA-695</a>
        </p>

      </div>

    </div>

  </div>


  <div class="topic concept nested1" aria-labelledby="ariaid-title285" id="fixed_issues_121">

    <h2 class="title topictitle2" id="ariaid-title285">Issues Fixed in the 1.2.1 Release</h2>


    <div class="body conbody">

      <p class="p">
        This section lists the most significant issues fixed in Impala 1.2.1. For the full list of fixed issues,
        see <a class="xref" href="https://issues.apache.org/jira/issues/?jql=project%3Dimpala+and+fixVersion%3D%22Impala+1.2.1%22+and+resolution%3D%22Fixed%22" target="_blank">this report in the Impala JIRA tracker</a>.
      </p>


      <p class="p toc inpage"></p>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title286" id="IMPALA-525">

      <h3 class="title topictitle3" id="ariaid-title286">Scanners use too much memory when reading past scan range</h3>


      <div class="body conbody">

        <p class="p">
          While querying a table with long column values, Impala could over-allocate memory leading to an
          out-of-memory error. This problem was observed most frequently with tables using uncompressed RCFile or
          text data files.
        </p>


        <p class="p">
          <strong class="ph b">Bug:</strong>
          <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-525" target="_blank">IMPALA-525</a>
        </p>


        <p class="p">
          <strong class="ph b">Resolution:</strong> Fixed in 1.2.1
        </p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title287" id="IMPALA-657">

      <h3 class="title topictitle3" id="ariaid-title287">Join node consumes memory way beyond mem-limit</h3>


      <div class="body conbody">

        <p class="p">
          A join query could allocate a temporary work area that was larger than needed, leading to an
          out-of-memory error. The fix makes Impala return unused memory to the system when the memory limit is
          reached, avoiding unnecessary memory errors.
        </p>


        <p class="p">
          <strong class="ph b">Bug:</strong>
          <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-657" target="_blank">IMPALA-657</a>
        </p>


        <p class="p">
          <strong class="ph b">Resolution:</strong> Fixed in 1.2.1
        </p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title288" id="IMPALA-652">

      <h3 class="title topictitle3" id="ariaid-title288">Excessive memory consumption when query tables with 1k columns (Parquet file)</h3>


      <div class="body conbody">

        <p class="p">
          Impala could encounter an out-of-memory condition setting up work areas for Parquet tables with many
          columns. The fix reduces the size of the allocated memory when not actually needed to hold table data.
        </p>


        <p class="p">
          <strong class="ph b">Bug:</strong>
          <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-652" target="_blank">IMPALA-652</a>
        </p>


        <p class="p">
          <strong class="ph b">Resolution:</strong> Fixed in 1.2.1
        </p>

      </div>

    </div>



  </div>


  <div class="topic concept nested1" aria-labelledby="ariaid-title289" id="fixed_issues_120">

    <h2 class="title topictitle2" id="ariaid-title289">Issues Fixed in the 1.2.0 Beta Release</h2>


    <div class="body conbody">

      <p class="p">
        This section lists the most significant issues fixed in Impala 1.2 (beta). For the full list of fixed
        issues, see <a class="xref" href="https://issues.apache.org/jira/issues/?jql=project%3Dimpala+and+fixVersion%3D%22Impala+1.2%22+and+resolution%3D%22Fixed%22" target="_blank">this report in the Impala JIRA tracker</a>.
      </p>

    </div>

  </div>


  <div class="topic concept nested1" aria-labelledby="ariaid-title290" id="fixed_issues_111">

    <h2 class="title topictitle2" id="ariaid-title290">Issues Fixed in the 1.1.1 Release</h2>


    <div class="body conbody">

      <p class="p">
        This section lists the most significant issues fixed in Impala 1.1.1. For the full list of fixed issues,
        see <a class="xref" href="https://issues.apache.org/jira/issues/?jql=project%3Dimpala+and+fixVersion%3D%22Impala+1.1.1%22+and+resolution%3D%22Fixed%22" target="_blank">this report in the Impala JIRA tracker</a>.
      </p>


      <p class="p toc inpage"></p>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title291" id="IMPALA-477">

      <h3 class="title topictitle3" id="ariaid-title291">Unexpected LLVM Crash When Querying Doubles on CentOS 5.x</h3>


      <div class="body conbody">

        <p class="p">
          Certain queries involving <code class="ph codeph">DOUBLE</code> columns could fail with a serious error. The fix
          improves the generation of native machine instructions for certain chipsets.
        </p>


        <p class="p">
          <strong class="ph b">Bug:</strong>
          <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-477" target="_blank">IMPALA-477</a>
        </p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title292" id="IMPALA-482">

      <h3 class="title topictitle3" id="ariaid-title292">"block size is too big" error with Snappy-compressed RCFile containing null</h3>


      <div class="body conbody">

        <p class="p">
          Queries could fail with a <span class="q">"block size is too big"</span> error, due to <code class="ph codeph">NULL</code> values in
          RCFile tables using Snappy compression.
        </p>


        <p class="p">
          <strong class="ph b">Bug:</strong>
          <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-482" target="_blank">IMPALA-482</a>
        </p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title293" id="IMPALA-510">

      <h3 class="title topictitle3" id="ariaid-title293">Cannot query RC file for table that has more columns than the data file</h3>


      <div class="body conbody">

        <p class="p">
          Queries could fail if an Impala RCFile table was defined with more columns than in the corresponding
          RCFile data files.
        </p>


        <p class="p">
          <strong class="ph b">Bug:</strong>
          <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-510" target="_blank">IMPALA-510</a>
        </p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title294" id="IMPALA-495">

      <h3 class="title topictitle3" id="ariaid-title294">Views Sometimes Not Utilizing Partition Pruning</h3>


      <div class="body conbody">

        <p class="p">
          Certain combinations of clauses in a view definition for a partitioned table could result in inefficient
          performance and incorrect results.
        </p>


        <p class="p">
          <strong class="ph b">Bug:</strong>
          <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-495" target="_blank">IMPALA-495</a>
        </p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title295" id="IMPALA-485">

      <h3 class="title topictitle3" id="ariaid-title295">Update the serde name we write into the metastore for Parquet tables</h3>


      <div class="body conbody">

        <p class="p">
          The SerDes class string written into Parquet data files created by Impala was updated for compatibility
          with Parquet support in Hive. See <a class="xref" href="impala_incompatible_changes.html#incompatible_changes_111">Incompatible Changes Introduced in Impala 1.1.1</a>
          for the steps to update older Parquet data files for Hive compatibility.
        </p>


        <p class="p">
          <strong class="ph b">Bug:</strong>
          <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-485" target="_blank">IMPALA-485</a>
        </p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title296" id="IMPALA-534">

      <h3 class="title topictitle3" id="ariaid-title296">Selective queries over large tables produce unnecessary memory consumption</h3>


      <div class="body conbody">

        <p class="p">
          A query returning a small result sets from a large table could tie up memory unnecessarily for the
          duration of the query.
        </p>


        <p class="p">
          <strong class="ph b">Bug:</strong>
          <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-534" target="_blank">IMPALA-534</a>
        </p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title297" id="IMPALA-538">

      <h3 class="title topictitle3" id="ariaid-title297">Impala stopped to query AVRO tables</h3>


      <div class="body conbody">

        <p class="p">
          Queries against Avro tables could fail depending on whether the Avro schema URL was specified in the
          <code class="ph codeph">TBLPROPERTIES</code> or <code class="ph codeph">SERDEPROPERTIES</code> field. The fix causes Impala to check
          both fields for the schema URL.
        </p>


        <p class="p">
          <strong class="ph b">Bug:</strong>
          <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-538" target="_blank">IMPALA-538</a>
        </p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title298" id="IMPALA-520">

      <h3 class="title topictitle3" id="ariaid-title298">Impala continues to allocate more memory even though it has exceed its mem-limit</h3>


      <div class="body conbody">

        <p class="p">
          Queries could allocate substantially more memory than specified in the <span class="keyword cmdname">impalad</span>
          <code class="ph codeph">-mem_limit</code> startup option. The fix causes more frequent checking of the limit during
          query execution.
        </p>


        <p class="p">
          <strong class="ph b">Bug:</strong>
          <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-520" target="_blank">IMPALA-520</a>
        </p>

      </div>

    </div>

  </div>


  <div class="topic concept nested1" aria-labelledby="ariaid-title299" id="fixed_issues_110">

    <h2 class="title topictitle2" id="ariaid-title299">Issues Fixed in the 1.1.0 Release</h2>


    <div class="body conbody">

      <p class="p">
        This section lists the most significant issues fixed in Impala 1.1. For the full list of fixed issues, see
        <a class="xref" href="https://issues.apache.org/jira/issues/?jql=project%3Dimpala+and+fixVersion%3D%22Impala+1.1%22+and+resolution%3D%22Fixed%22" target="_blank">this report in the Impala JIRA tracker</a>.
      </p>


      <p class="p toc inpage"></p>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title300" id="IMPALA-335">

      <h3 class="title topictitle3" id="ariaid-title300">10-20% perf regression for most queries across all table formats</h3>


      <div class="body conbody">

        <p class="p">
          This issue is due to a performance tradeoff between systems running many queries concurrently, and
          systems running a single query. Systems running only a single query could experience lower performance
          than in early beta releases. Systems running many queries simultaneously should experience higher
          performance than in the beta releases.
        </p>



      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title301" id="IMPALA-85">

      <h3 class="title topictitle3" id="ariaid-title301">planner fails with "Join requires at least one equality predicate between the two tables" when "from" table order does not match "where" join order</h3>


      <div class="body conbody">

        <p class="p">
          A query could fail if it involved 3 or more tables and the last join table was specified as a subquery.
        </p>


        <p class="p">
          <strong class="ph b">Bug:</strong>
          <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-85" target="_blank">IMPALA-85</a>
        </p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title302" id="IMPALA-257">

      <h3 class="title topictitle3" id="ariaid-title302">Parquet writer uses excessive memory with partitions</h3>


      <div class="body conbody">

        <p class="p">
          <code class="ph codeph">INSERT</code> statements against partitioned tables using the Parquet format could use
          excessive amounts of memory as the number of partitions grew large.
        </p>


        <p class="p">
          <strong class="ph b">Bug:</strong>
          <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-257" target="_blank">IMPALA-257</a>
        </p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title303" id="IMPALA-192">

      <h3 class="title topictitle3" id="ariaid-title303">Comments in impala-shell in interactive mode are not handled properly causing syntax errors or wrong results</h3>


      <div class="body conbody">

        <p class="p">
          The <span class="keyword cmdname">impala-shell</span> interpreter did not accept comment entered at the command line,
          making it problematic to copy and paste from scripts or other code examples.
        </p>


        <p class="p">
          <strong class="ph b">Bug:</strong>
          <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-192" target="_blank">IMPALA-192</a>
        </p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title304" id="IMPALA-364">

      <h3 class="title topictitle3" id="ariaid-title304">Cancelled queries sometimes aren't removed from the inflight query list</h3>


      <div class="body conbody">

        <p class="p">
          The Impala web UI would sometimes display a query as if it were still running, after the query was
          cancelled.
        </p>


        <p class="p">
          <strong class="ph b">Bug:</strong>
          <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-364" target="_blank">IMPALA-364</a>
        </p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title305" id="IMPALA-396">

      <h3 class="title topictitle3" id="ariaid-title305">Impala's 1.0.1 Shell Broke Python 2.4 Compatibility (AttributeError: 'module' object has no attribute 'field_size_limit)</h3>


      <div class="body conbody">

        <p class="p">
          The <code class="ph codeph">impala-shell</code> command in Impala 1.0.1 does not work with Python 2.4, which is the
          default on Red Hat 5.
        </p>


        <p class="p">
          For the <code class="ph codeph">impala-shell</code> command in Impala 1.0, the <code class="ph codeph">-o</code> option (pipe output
          to a file) does not work with Python 2.4.
        </p>


        <p class="p">
          <strong class="ph b">Bug:</strong>
          <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-396" target="_blank">IMPALA-396</a>
        </p>

      </div>

    </div>

  </div>


  <div class="topic concept nested1" aria-labelledby="ariaid-title306" id="fixed_issues_101">

    <h2 class="title topictitle2" id="ariaid-title306">Issues Fixed in the 1.0.1 Release</h2>


    <div class="body conbody">

      <p class="p">
        This section lists the most significant issues fixed in Impala 1.0.1. For the full list of fixed issues,
        see <a class="xref" href="https://issues.apache.org/jira/issues/?jql=project%3Dimpala+and+fixVersion%3D%22Impala+1.0.1%22+and+resolution%3D%22Fixed%22" target="_blank">this report in the Impala JIRA tracker</a>.
      </p>


      <p class="p toc inpage"></p>

    </div>




    <div class="topic concept nested2" aria-labelledby="ariaid-title307" id="IMPALA-333">

      <h3 class="title topictitle3" id="ariaid-title307">Impala parquet scanner cannot read all data files generated by
        other frameworks</h3>


      <div class="body conbody">

        <p class="p">
          Impala might issue an erroneous error message when processing a Parquet data file produced by a
          non-Impala Hadoop component.
        </p>


        <p class="p">
          <strong class="ph b">Bug:</strong>
          <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-333" target="_blank">IMPALA-333</a>
        </p>


        <p class="p">
          <strong class="ph b">Resolution:</strong> Fixed
        </p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title308" id="IMPALA-293">

      <h3 class="title topictitle3" id="ariaid-title308">Impala is unable to query RCFile tables which describe fewer columns than the file's header.</h3>


      <div class="body conbody">

        <p class="p">
          If an RCFile table definition had fewer columns than the fields actually in the data files, queries would
          fail.
        </p>


        <p class="p">
          <strong class="ph b">Bug:</strong>
          <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-293" target="_blank">IMPALA-293</a>
        </p>


        <p class="p">
          <strong class="ph b">Resolution:</strong> Fixed
        </p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title309" id="IMPALA-351">

      <h3 class="title topictitle3" id="ariaid-title309">Impala does not correctly substitute _HOST with hostname in --principal</h3>


      <div class="body conbody">

        <p class="p">
          The <code class="ph codeph">_HOST</code> placeholder in the <code class="ph codeph">--principal</code> startup option was not
          substituted with the correct hostname, potentially leading to a startup error in setups using Kerberos
          authentication.
        </p>


        <p class="p">
          <strong class="ph b">Bug:</strong>
          <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-351" target="_blank">IMPALA-351</a>
        </p>


        <p class="p">
          <strong class="ph b">Resolution:</strong> Fixed
        </p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title310" id="IMPALA-356">

      <h3 class="title topictitle3" id="ariaid-title310">HBase query missed the last region</h3>


      <div class="body conbody">

        <p class="p">
          A query for an HBase table could omit data from the last region.
        </p>


        <p class="p">
          <strong class="ph b">Bug:</strong>
          <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-356" target="_blank">IMPALA-356</a>
        </p>


        <p class="p">
          <strong class="ph b">Resolution:</strong> Fixed
        </p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title311" id="IMPALA-300">

      <h3 class="title topictitle3" id="ariaid-title311">Hbase region changes are not handled correctly</h3>


      <div class="body conbody">

        <p class="p">
          After a region in an HBase table was split or moved, an Impala query might return incomplete or
          out-of-date results.
        </p>


        <p class="p">
          <strong class="ph b">Bug:</strong>
          <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-300" target="_blank">IMPALA-300</a>
        </p>


        <p class="p">
          <strong class="ph b">Resolution:</strong> Fixed
        </p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title312" id="IMPALA-349">

      <h3 class="title topictitle3" id="ariaid-title312">Query state for successful create table is EXCEPTION</h3>


      <div class="body conbody">

        <p class="p">
          After a successful <code class="ph codeph">CREATE TABLE</code> statement, the corresponding query state would be
          incorrectly reported as <code class="ph codeph">EXCEPTION</code>.
        </p>


        <p class="p">
          <strong class="ph b">Bug:</strong>
          <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-349" target="_blank">IMPALA-349</a>
        </p>


        <p class="p">
          <strong class="ph b">Resolution:</strong> Fixed
        </p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title313" id="IMPALA-358">

      <h3 class="title topictitle3" id="ariaid-title313">Double check release of JNI-allocated byte-strings</h3>


      <div class="body conbody">

        <p class="p">
          Operations involving calls to the Java JNI subsystem (for example, queries on HBase tables) could
          allocate memory but not release it.
        </p>


        <p class="p">
          <strong class="ph b">Bug:</strong>
          <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-358" target="_blank">IMPALA-358</a>
        </p>


        <p class="p">
          <strong class="ph b">Resolution:</strong> Fixed
        </p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title314" id="unix_timestamp">

      <h3 class="title topictitle3" id="ariaid-title314">Impala returns 0 for bad time values in UNIX_TIMESTAMP, Hive returns NULL</h3>


      <div class="body conbody">

        <p class="p">
          Impala returns 0 for bad time values in UNIX_TIMESTAMP, Hive returns NULL.
        </p>


        <p class="p">
          <strong class="ph b">Impala:</strong>
        </p>


<pre class="pre codeblock"><code>impala&gt; select UNIX_TIMESTAMP('10:02:01') ;
impala&gt; 0</code></pre>

        <p class="p">
          <strong class="ph b">Hive:</strong>
        </p>


<pre class="pre codeblock"><code>hive&gt; select UNIX_TIMESTAMP('10:02:01') FROM tmp;
hive&gt; NULL</code></pre>

        <p class="p">
          <strong class="ph b">Bug:</strong>
          <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-16" target="_blank">IMPALA-16</a>
        </p>


        <p class="p">
          <strong class="ph b">Anticipated Resolution:</strong> Fixed
        </p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title315" id="IMP-231">

      <h3 class="title topictitle3" id="ariaid-title315">INSERT INTO TABLE SELECT &lt;constant&gt; does not work.</h3>


      <div class="body conbody">

        <p class="p">
          Insert INTO TABLE SELECT &lt;constant&gt; will not insert any data and may return an error.
        </p>


        <p class="p">
          <strong class="ph b">Anticipated Resolution</strong>: Fixed
        </p>

      </div>

    </div>

  </div>


  <div class="topic concept nested1" aria-labelledby="ariaid-title316" id="fixed_issues_10">

    <h2 class="title topictitle2" id="ariaid-title316">Issues Fixed in the 1.0 GA Release</h2>


    <div class="body conbody">

      <p class="p">
        Here are the major user-visible issues fixed in Impala 1.0. For a full list of fixed issues, see
        <a class="xref" href="https://issues.apache.org/jira/issues/?jql=project+%3D+impala+AND+resolution+%3D+Fixed+AND+fixVersion+%3D+%22Impala+1.0%22+ORDER+BY+key+ASC%2C+assignee+ASC%2C+priority+DESC" target="_blank">this report in the Impala JIRA tracker</a>.
      </p>


      <p class="p toc inpage"></p>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title317" id="IMPALA-183">

      <h3 class="title topictitle3" id="ariaid-title317">Undeterministically receive "ERROR: unknown row bach destination..." and "ERROR: Invalid query handle" from impala shell when running union query</h3>


      <div class="body conbody">

        <p class="p">
          A query containing both <code class="ph codeph">UNION</code> and <code class="ph codeph">LIMIT</code> clauses could intermittently
          cause the <code class="ph codeph">impalad</code> process to halt with a segmentation fault.
        </p>


        <p class="p">
          <strong class="ph b">Bug:</strong>
          <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-183" target="_blank">IMPALA-183</a>
        </p>


        <p class="p">
          <strong class="ph b">Resolution:</strong> Fixed
        </p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title318" id="IMPALA-190">

      <h3 class="title topictitle3" id="ariaid-title318">Insert with NULL partition keys results in SIGSEGV.</h3>


      <div class="body conbody">

        <p class="p">
          An <code class="ph codeph">INSERT</code> statement specifying a <code class="ph codeph">NULL</code> value for one of the partitioning
          columns could cause the <code class="ph codeph">impalad</code> process to halt with a segmentation fault.
        </p>


        <p class="p">
          <strong class="ph b">Bug:</strong>
          <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-190" target="_blank">IMPALA-190</a>
        </p>


        <p class="p">
          <strong class="ph b">Resolution:</strong> Fixed
        </p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title319" id="IMPALA-217">

      <h3 class="title topictitle3" id="ariaid-title319">INSERT queries don't show completed profiles on the debug webpage</h3>


      <div class="body conbody">

        <p class="p">
          In the Impala web user interface, the profile page for an <code class="ph codeph">INSERT</code> statement showed
          obsolete information for the statement once it was complete.
        </p>


        <p class="p">
          <strong class="ph b">Bug:</strong>
          <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-217" target="_blank">IMPALA-217</a>
        </p>


        <p class="p">
          <strong class="ph b">Resolution:</strong> Fixed
        </p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title320" id="IMPALA-231">

      <h3 class="title topictitle3" id="ariaid-title320">Impala HBase scan is very slow</h3>


      <div class="body conbody">

        <p class="p">
          Queries involving an HBase table could be slower than expected, due to excessive memory usage on the
          Impala nodes.
        </p>


        <p class="p">
          <strong class="ph b">Bug:</strong>
          <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-231" target="_blank">IMPALA-231</a>
        </p>


        <p class="p">
          <strong class="ph b">Resolution:</strong> Fixed
        </p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title321" id="IMPALA-234">

      <h3 class="title topictitle3" id="ariaid-title321">Add some library version validation logic to impalad when loading impala-lzo shared library</h3>


      <div class="body conbody">

        <p class="p">
          No validation was done to check that the <code class="ph codeph">impala-lzo</code> shared library was compatible with
          the version of Impala, possibly leading to a crash when using LZO-compressed text files.
        </p>


        <p class="p">
          <strong class="ph b">Bug:</strong>
          <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-234" target="_blank">IMPALA-234</a>
        </p>


        <p class="p">
          <strong class="ph b">Resolution:</strong> Fixed
        </p>


        <p class="p">
          <strong class="ph b">Workaround:</strong> Always upgrade the <code class="ph codeph">impala-lzo</code> library at the same time as you upgrade
          Impala itself.
        </p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title322" id="IMPALA-238">

      <h3 class="title topictitle3" id="ariaid-title322">Problems inserting into tables with TIMESTAMP partition columns leading table metadata loading failures and failed dchecks</h3>


      <div class="body conbody">

        <p class="p">
          <code class="ph codeph">INSERT</code> statements for tables partitioned on columns involving datetime types could
          appear to succeed, but cause errors for subsequent queries on those tables. The problem was especially
          serious if an improperly formatted timestamp value was specified for the partition key.
        </p>


        <p class="p">
          <strong class="ph b">Bug:</strong>
          <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-238" target="_blank">IMPALA-238</a>
        </p>


        <p class="p">
          <strong class="ph b">Resolution:</strong> Fixed
        </p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title323" id="IMPALA-243">

      <h3 class="title topictitle3" id="ariaid-title323">Ctrl-C sometimes interrupts shell in system call, rather than cancelling query</h3>


      <div class="body conbody">

        <p class="p">
          Pressing Ctrl-C in the <code class="ph codeph">impala-shell</code> interpreter could sometimes display an error and
          return control to the shell, making it impossible to cancel the query.
        </p>


        <p class="p">
          <strong class="ph b">Bug:</strong>
          <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-243" target="_blank">IMPALA-243</a>
        </p>


        <p class="p">
          <strong class="ph b">Resolution:</strong> Fixed
        </p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title324" id="IMPALA-252">

      <h3 class="title topictitle3" id="ariaid-title324">Empty string partition value causes metastore update failure</h3>


      <div class="body conbody">

        <p class="p">
          Specifying an empty string or <code class="ph codeph">NULL</code> for a partition key in an <code class="ph codeph">INSERT</code>
          statement would fail.
        </p>


        <p class="p">
          <strong class="ph b">Bug:</strong>
          <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-252" target="_blank">IMPALA-252</a>
        </p>


        <p class="p">
          <strong class="ph b">Resolution:</strong> Fixed. The behavior for empty partition keys was made more compatible with the
          corresponding Hive behavior.
        </p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title325" id="IMPALA-266">

      <h3 class="title topictitle3" id="ariaid-title325">Round() does not output the right precision</h3>


      <div class="body conbody">

        <p class="p">
          The <code class="ph codeph">round()</code> function did not always return the correct number of significant digits.
        </p>


        <p class="p">
          <strong class="ph b">Bug:</strong>
          <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-266" target="_blank">IMPALA-266</a>
        </p>


        <p class="p">
          <strong class="ph b">Resolution:</strong> Fixed
        </p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title326" id="IMPALA-267">

      <h3 class="title topictitle3" id="ariaid-title326">Cannot cast string literal to string</h3>


      <div class="body conbody">

        <p class="p">
          Casting from a string literal back to the same type would cause an <span class="q">"invalid type cast"</span> error rather
          than leaving the original value unchanged.
        </p>


        <p class="p">
          <strong class="ph b">Bug:</strong>
          <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-267" target="_blank">IMPALA-267</a>
        </p>


        <p class="p">
          <strong class="ph b">Resolution:</strong> Fixed
        </p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title327" id="IMPALA-288">

      <h3 class="title topictitle3" id="ariaid-title327">Excessive mem usage for certain queries which are very selective</h3>


      <div class="body conbody">

        <p class="p">
          Some queries that returned very few rows experienced unnecessary memory usage.
        </p>


        <p class="p">
          <strong class="ph b">Bug:</strong>
          <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-288" target="_blank">IMPALA-288</a>
        </p>


        <p class="p">
          <strong class="ph b">Resolution:</strong> Fixed
        </p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title328" id="IMPALA-289">

      <h3 class="title topictitle3" id="ariaid-title328">HdfsScanNode crashes in UpdateCounters</h3>


      <div class="body conbody">

        <p class="p">
          A serious error could occur for relatively small and inexpensive queries.
        </p>


        <p class="p">
          <strong class="ph b">Bug:</strong>
          <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-289" target="_blank">IMPALA-289</a>
        </p>


        <p class="p">
          <strong class="ph b">Resolution:</strong> Fixed
        </p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title329" id="IMPALA-292">

      <h3 class="title topictitle3" id="ariaid-title329">Parquet performance issues on large dataset</h3>


      <div class="body conbody">

        <p class="p">
          Certain aggregation queries against Parquet tables were inefficient due to lower than required thread
          utilization.
        </p>


        <p class="p">
          <strong class="ph b">Bug:</strong>
          <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-292" target="_blank">IMPALA-292</a>
        </p>


        <p class="p">
          <strong class="ph b">Resolution:</strong> Fixed
        </p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title330" id="IMPALA-295">

      <h3 class="title topictitle3" id="ariaid-title330">impala not populating hive metadata correctly for create table</h3>


      <div class="body conbody">

        <p class="p">
          The Impala <code class="ph codeph">CREATE TABLE</code> command did not fill in the <code class="ph codeph">owner</code> and
          <code class="ph codeph">tbl_type</code> columns in the Hive metastore database.
        </p>


        <p class="p">
          <strong class="ph b">Bug:</strong>
          <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-295" target="_blank">IMPALA-295</a>
        </p>


        <p class="p">
          <strong class="ph b">Resolution:</strong> Fixed. The metadata was made more Hive-compatible.
        </p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title331" id="IMPALA-312">

      <h3 class="title topictitle3" id="ariaid-title331">impala daemons die if statestore goes down</h3>


      <div class="body conbody">

        <p class="p">
          The <code class="ph codeph">impalad</code> instances in a cluster could halt when the <code class="ph codeph">statestored</code>
          process became unavailable.
        </p>


        <p class="p">
          <strong class="ph b">Bug:</strong>
          <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-312" target="_blank">IMPALA-312</a>
        </p>


        <p class="p">
          <strong class="ph b">Resolution:</strong> Fixed
        </p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title332" id="IMPALA-67">

      <h3 class="title topictitle3" id="ariaid-title332">Constant SELECT clauses do not work in subqueries</h3>


      <div class="body conbody">

        <p class="p">
          A subquery would fail if the <code class="ph codeph">SELECT</code> statement inside it returned a constant value rather
          than querying a table.
        </p>


        <p class="p">
          <strong class="ph b">Bug:</strong>
          <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-67" target="_blank">IMPALA-67</a>
        </p>


        <p class="p">
          <strong class="ph b">Resolution:</strong> Fixed
        </p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title333" id="IMPALA-90">

      <h3 class="title topictitle3" id="ariaid-title333">Right outer Join includes NULLs as well and hence wrong result count</h3>


      <div class="body conbody">

        <p class="p">
          The result set from a right outer join query could include erroneous rows containing
          <code class="ph codeph">NULL</code> values.
        </p>


        <p class="p">
          <strong class="ph b">Bug:</strong>
          <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-90" target="_blank">IMPALA-90</a>
        </p>


        <p class="p">
          <strong class="ph b">Resolution:</strong> Fixed
        </p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title334" id="IMPALA-204">

      <h3 class="title topictitle3" id="ariaid-title334">Parquet scanner hangs for some queries</h3>


      <div class="body conbody">

        <p class="p">
          The Parquet scanner non-deterministically hangs when executing some queries.
        </p>


        <p class="p">
          <strong class="ph b">Bug:</strong>
          <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-204" target="_blank">IMPALA-204</a>
        </p>


        <p class="p">
          <strong class="ph b">Resolution:</strong> Fixed
        </p>

      </div>

    </div>

  </div>


  <div class="topic concept nested1" aria-labelledby="ariaid-title335" id="fixed_issues_07">

    <h2 class="title topictitle2" id="ariaid-title335">Issues Fixed in Version 0.7 of the Beta Release</h2>


    <div class="body conbody"></div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title336" id="IMPALA-167">

      <h3 class="title topictitle3" id="ariaid-title336">Impala does not gracefully handle unsupported Hive table types (INDEX and VIEW tables)</h3>


      <div class="body conbody">

        <p class="p">
          When attempting to load metadata from an unsupported Hive table type (INDEX and VIEW tables), Impala
          fails with an unclear error message.
        </p>


        <p class="p">
          Bug:
          <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-167" target="_blank">IMPALA-167</a>
        </p>


        <p class="p">
          <strong class="ph b">Resolution:</strong> Fixed in 0.7
        </p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title337" id="IMP-474">

      <h3 class="title topictitle3" id="ariaid-title337">DDL statements (CREATE/ALTER/DROP TABLE) are not supported in the Impala Beta Release</h3>


      <div class="body conbody">

        <p class="p">
          <strong class="ph b">Resolution:</strong> Fixed in 0.7
        </p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title338" id="avro_support">

      <h3 class="title topictitle3" id="ariaid-title338">Avro is not supported in the Impala Beta Release</h3>


      <div class="body conbody">

        <p class="p">
          <strong class="ph b">Resolution:</strong> Fixed in 0.7
        </p>


        <p class="p">
          <strong class="ph b">Workaround:</strong> None
        </p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title339" id="mem_limit_query">

      <h3 class="title topictitle3" id="ariaid-title339">Impala does not currently allow limiting the memory consumption of a single query</h3>


      <div class="body conbody">

        <p class="p">
          It is currently not possible to limit the memory consumption of a single query. All tables on the right
          hand side of JOIN statements need to be able to fit in memory. If they do not, Impala may crash due to
          out of memory errors.
        </p>


        <p class="p">
          <strong class="ph b">Resolution:</strong> Fixed in 0.7
        </p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title340" id="IMPALA-20">

      <h3 class="title topictitle3" id="ariaid-title340">Aggregate of a subquery result set returns wrong results if the subquery contains a 'limit' and data is distributed across multiple nodes</h3>


      <div class="body conbody">

        <p class="p">
          Aggregate of a subquery result set returns wrong results if the subquery contains a 'limit' clause and
          data is distributed across multiple nodes. From the query plan, it looks like we are just summing the
          results from each worker node.
        </p>


        <p class="p">
          <strong class="ph b">Bug:</strong>
          <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-20" target="_blank">IMPALA-20</a>
        </p>


        <p class="p">
          <strong class="ph b">Resolution:</strong> Fixed in 0.7
        </p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title341" id="IMPALA-144">

      <h3 class="title topictitle3" id="ariaid-title341">Partition pruning for arbitrary predicates that are fully bound by a particular partition column</h3>


      <div class="body conbody">

        <p class="p"> We currently cannot utilize a predicate like "country_code in ('DE',
          'FR', 'US')" to do partitioning pruning, because that requires an
          equality predicate or a binary comparison. </p>


        <p class="p">
          We should create a superclass of planner.ValueRange, ValueSet, that can be constructed with an arbitrary
          predicate, and whose isInRange(analyzer, valueExpr) constructs a literal predicate by substitution of the
          valueExpr into the predicate.
        </p>


        <p class="p">
          <strong class="ph b">Bug:</strong>
          <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-144" target="_blank">IMPALA-144</a>
        </p>


        <p class="p">
          <strong class="ph b">Resolution:</strong> Fixed in 0.7
        </p>

      </div>

    </div>

  </div>


  <div class="topic concept nested1" aria-labelledby="ariaid-title342" id="fixed_issues_06">

    <h2 class="title topictitle2" id="ariaid-title342">Issues Fixed in Version 0.6 of the Beta Release</h2>


    <div class="body conbody"></div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title343" id="IMP-56">

      <h3 class="title topictitle3" id="ariaid-title343">Impala reads the NameNode address and port as command line parameters</h3>


      <div class="body conbody">

        <p class="p">
          Impala reads the NameNode address and port as command line parameters rather than reading them from
          <code class="ph codeph">core-site.xml</code>. Updating the NameNode address in the <code class="ph codeph">core-site.xml</code> file
          does not propagate to Impala.
        </p>


        <p class="p">
          <strong class="ph b">Severity:</strong> Low
        </p>


        <p class="p">
          <strong class="ph b">Resolution:</strong> Fixed in 0.6 - Impala reads the namenode location and port from the Hadoop
          configuration files, though setting <code class="ph codeph">-nn</code> and <code class="ph codeph">-nn_port</code> overrides this.
          Users are advised not to set <code class="ph codeph">-nn</code> or <code class="ph codeph">-nn_port</code>.
        </p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title344" id="IMPALA-64">

      <h3 class="title topictitle3" id="ariaid-title344">Queries may fail on secure environment due to impalad Kerberos ticket expiration</h3>


      <div class="body conbody">

        <p class="p">
          Queries may fail on secure environment due to <code class="ph codeph">impalad</code> Kerberos tickets expiring. This
          can happen if the Impala <code class="ph codeph">-kerberos_reinit_interval</code> flag is set to a value ten minutes or
          less. This may lead to an <code class="ph codeph">impalad</code> requesting a ticket with a lifetime that is less than
          the time to the next ticket renewal.
        </p>


        <p class="p">
          <strong class="ph b">Bug:</strong>
          <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-64" target="_blank">IMPALA-64</a>
        </p>


        <p class="p">
          <strong class="ph b">Resolution</strong>: Fixed in 0.6
        </p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title345" id="IMPALA-48">

      <h3 class="title topictitle3" id="ariaid-title345">Concurrent queries may fail when Impala uses Thrift to communicate with the Hive Metastore</h3>


      <div class="body conbody">

        <p class="p">
          Concurrent queries may fail when Impala is using Thrift to communicate with part of the Hive Metastore
          such as the Hive Metastore Service. In such a case, the error <code class="ph codeph">get_fields failed: out of sequence
          response"</code> may occur because Impala shared a single Hive Metastore Client connection across
          threads. With Impala 0.6, a separate connection is used for each metadata request.
        </p>


        <p class="p">
          <strong class="ph b">Bug:</strong>
          <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-48" target="_blank">IMPALA-48</a>
        </p>


        <p class="p">
          <strong class="ph b">Resolution</strong>: Fixed in 0.6
        </p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title346" id="IMPALA-58">

      <h3 class="title topictitle3" id="ariaid-title346">impalad fails to start if unable to connect to the Hive Metastore</h3>


      <div class="body conbody">

        <p class="p">
          Impala fails to start if it is unable to establish a connection with the Hive Metastore. This behavior
          was fixed, allowing Impala to start, even when no Metastore is available.
        </p>


        <p class="p">
          <strong class="ph b">Bug:</strong>
          <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-58" target="_blank">IMPALA-58</a>
        </p>


        <p class="p">
          <strong class="ph b">Resolution</strong>: Fixed in 0.6
        </p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title347" id="IMPALA-44">

      <h3 class="title topictitle3" id="ariaid-title347">Impala treats database names as case-sensitive in some contexts</h3>


      <div class="body conbody">

        <p class="p">
          In some queries (including "USE database" statements), database names are treated as case-sensitive. This
          may lead queries to fail with an IllegalStateException.
        </p>


        <p class="p">
          <strong class="ph b">Bug:</strong>
          <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-44" target="_blank">IMPALA-44</a>
        </p>


        <p class="p">
          <strong class="ph b">Resolution</strong>: Fixed in 0.6
        </p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title348" id="IMPALA-18">

      <h3 class="title topictitle3" id="ariaid-title348">Impala does not ignore hidden HDFS files</h3>


      <div class="body conbody">

        <p class="p">
          Impala does not ignore hidden HDFS files, meaning those files prefixed with a period '.' or underscore
          '_'. This diverges from Hive/MapReduce, which skips these files.
        </p>


        <p class="p">
          <strong class="ph b">Bug:</strong>
          <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-18" target="_blank">IMPALA-18</a>
        </p>


        <p class="p" id="IMPALA-18__p_7">
          <strong class="ph b">Resolution</strong>: Fixed in 0.6
        </p>

      </div>

    </div>

  </div>


  <div class="topic concept nested1" aria-labelledby="ariaid-title349" id="fixed_issues_05">

    <h2 class="title topictitle2" id="ariaid-title349">Issues Fixed in Version 0.5 of the Beta Release</h2>


    <div class="body conbody"></div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title350" id="many_partitions">

      <h3 class="title topictitle3" id="ariaid-title350">Impala may have reduced performance on tables that contain a large number of partitions</h3>


      <div class="body conbody">

        <p class="p">
          Impala may have reduced performance on tables that contain a large number of partitions. This is due to
          extra overhead reading/parsing the partition metadata.
        </p>


        <p class="p">
          <strong class="ph b">Resolution</strong>: Fixed in 0.5
        </p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title351" id="IMPALA-38">

      <h3 class="title topictitle3" id="ariaid-title351">Backend client connections not getting cached causes an observable latency in secure clusters</h3>


      <div class="body conbody">

        <p class="p">
          Backend impalads do not cache connections to the coordinator. On a secure cluster, this introduces a
          latency proportional to the number of backend clients involved in query execution, as the cost of
          establishing a secure connection is much higher than in the non-secure case.
        </p>


        <p class="p">
          <strong class="ph b">Bug:</strong>
          <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-38" target="_blank">IMPALA-38</a>
        </p>


        <p class="p">
          <strong class="ph b">Resolution</strong>: Fixed in 0.5
        </p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title352" id="IMPALA-30">

      <h3 class="title topictitle3" id="ariaid-title352">Concurrent queries may fail with error: "Table object has not been been initialised : `PARTITIONS`"</h3>


      <div class="body conbody">

        <p class="p">
          Concurrent queries may fail with error: <code class="ph codeph">"Table object has not been been initialised :
          `PARTITIONS`"</code>. This was due to a lack of locking in the Impala table/database metadata cache.
        </p>


        <p class="p">
          <strong class="ph b">Bug:</strong>
          <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-30" target="_blank">IMPALA-30</a>
        </p>


        <p class="p">
          <strong class="ph b">Resolution</strong>: Fixed in 0.5
        </p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title353" id="IMPALA-15">

      <h3 class="title topictitle3" id="ariaid-title353">UNIX_TIMESTAMP format behaviour deviates from Hive when format matches a prefix of the time value</h3>


      <div class="body conbody">

        <p class="p">
          The Impala UNIX_TIMESTAMP(val, format) operation compares the length of format and val and returns NULL
          if they do not match. Hive instead effectively truncates val to the length of the format parameter.
        </p>


        <p class="p">
          <strong class="ph b">Bug:</strong>
          <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-15" target="_blank">IMPALA-15</a>
        </p>


        <p class="p" id="IMPALA-15__p_10">
          <strong class="ph b">Resolution:</strong> Fixed in 0.5
        </p>

      </div>

    </div>

  </div>


  <div class="topic concept nested1" aria-labelledby="ariaid-title354" id="fixed_issues_04">

    <h2 class="title topictitle2" id="ariaid-title354">Issues Fixed in Version 0.4 of the Beta Release</h2>


    <div class="body conbody"></div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title355" id="HIVE-3596">

      <h3 class="title topictitle3" id="ariaid-title355">Impala fails to refresh the Hive metastore if a Hive temporary configuration file is removed</h3>


      <div class="body conbody">

        <p class="p">
          Impala is impacted by Hive bug
          <a class="xref" href="https://issues.apache.org/jira/browse/HIVE-3596" target="_blank">HIVE-3596</a>
          which may cause metastore refreshes to fail if a Hive temporary configuration file is deleted (normally
          located at <code class="ph codeph">/tmp/hive-&lt;user&gt;-&lt;tmp_number&gt;.xml</code>). Additionally, the
          impala-shell will incorrectly report that the failed metadata refresh completed successfully.
        </p>


        <p class="p">
          <strong class="ph b">Anticipated Resolution:</strong> To be fixed in a future release
        </p>


        <p class="p">
          <strong class="ph b">Workaround:</strong> Restart the <code class="ph codeph">impalad</code> service. Use the <code class="ph codeph">impalad</code> log to
          check for metadata refresh errors.
        </p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title356" id="lpad_rpad">

      <h3 class="title topictitle3" id="ariaid-title356">lpad/rpad builtin functions is not correct.</h3>


      <div class="body conbody">

        <p class="p">
          The lpad/rpad builtin functions generate the wrong results.
        </p>


        <p class="p">
          <strong class="ph b">Resolution:</strong> Fixed in 0.4
        </p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title357" id="IMPALA-14">

      <h3 class="title topictitle3" id="ariaid-title357">Files with .gz extension reported as 'not supported'</h3>


      <div class="body conbody">

        <p class="p">
          Compressed files with extensions incorrectly generate an exception.
        </p>


        <p class="p">
          <strong class="ph b">Bug:</strong>
          <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-14" target="_blank">IMPALA-14</a>
        </p>


        <p class="p">
          <strong class="ph b">Resolution:</strong> Fixed in 0.4
        </p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title358" id="large_limit_hang">

      <h3 class="title topictitle3" id="ariaid-title358">Queries with large limits would hang.</h3>


      <div class="body conbody">

        <p class="p">
          Some queries with large limits were hanging.
        </p>


        <p class="p">
          <strong class="ph b">Resolution:</strong> Fixed in 0.4
        </p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title359" id="IMP-601">

      <h3 class="title topictitle3" id="ariaid-title359">Order by on a string column produces incorrect results if there are empty strings</h3>


      <div class="body conbody">

        <p class="p">
          <strong class="ph b">Resolution:</strong> Fixed in 0.4
        </p>

      </div>

    </div>

  </div>


  <div class="topic concept nested1" aria-labelledby="ariaid-title360" id="fixed_issues_03">

    <h2 class="title topictitle2" id="ariaid-title360">Issues Fixed in Version 0.3 of the Beta Release</h2>


    <div class="body conbody"></div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title361" id="IMP-298">

      <h3 class="title topictitle3" id="ariaid-title361">All table loading errors show as unknown table</h3>


      <div class="body conbody">

        <p class="p">
          If Impala is unable to load the metadata for a table for any reason, a subsequent query referring to that
          table will return an <code class="ph codeph">unknown table</code> error message, even if the table is known.
        </p>


        <p class="p">
          <strong class="ph b">Resolution:</strong> Fixed in 0.3
        </p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title362" id="IMP-298-2">

      <h3 class="title topictitle3" id="ariaid-title362">A table that cannot be loaded will disappear from SHOW TABLES</h3>


      <div class="body conbody">

        <p class="p">
          After failing to load metadata for a table, Impala removes that table from the list of known tables
          returned in <code class="ph codeph">SHOW TABLES</code>. Subsequent attempts to query the table returns 'unknown table',
          even if the metadata for that table is fixed.
        </p>


        <p class="p">
          <strong class="ph b">Resolution:</strong> Fixed in 0.3
        </p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title363" id="IMP-581">

      <h3 class="title topictitle3" id="ariaid-title363">Impala cannot read from HBase tables that are not created as external tables in the hive metastore.</h3>


      <div class="body conbody">

        <p class="p">
          Attempting to select from these tables fails.
        </p>


        <p class="p">
          <strong class="ph b">Resolution:</strong> Fixed in 0.3
        </p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title364" id="IMP-137">

      <h3 class="title topictitle3" id="ariaid-title364">Certain queries that contain OUTER JOINs may return incorrect results</h3>


      <div class="body conbody">

        <p class="p">
          Queries that contain OUTER JOINs may not return the correct results if there are predicates referencing
          any of the joined tables in the WHERE clause.
        </p>


        <p class="p">
          <strong class="ph b">Resolution:</strong> Fixed in 0.3.
        </p>

      </div>

    </div>

  </div>


  <div class="topic concept nested1" aria-labelledby="ariaid-title365" id="fixed_issues_02">

    <h2 class="title topictitle2" id="ariaid-title365">Issues Fixed in Version 0.2 of the Beta Release</h2>


    <div class="body conbody"></div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title366" id="IMP-491">

      <h3 class="title topictitle3" id="ariaid-title366">Subqueries which contain aggregates cannot be joined with other tables or Impala may crash</h3>


      <div class="body conbody">

        <p class="p">
          Subqueries that contain an aggregate cannot be joined with another table or Impala may crash. For
          example:
        </p>


<pre class="pre codeblock"><code>SELECT * FROM (SELECT sum(col1) FROM some_table GROUP BY col1) t1 JOIN other_table ON (...);</code></pre>

        <p class="p">
          <strong class="ph b">Resolution:</strong> Fixed in 0.2
        </p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title367" id="IMP-497">

      <h3 class="title topictitle3" id="ariaid-title367">An insert with a limit that runs as more than one query fragment inserts more rows than the limit.</h3>


      <div class="body conbody">

        <p class="p">
          For example:
        </p>


<pre class="pre codeblock"><code>INSERT OVERWRITE TABLE test SELECT * FROM test2 LIMIT 1;</code></pre>

        <p class="p">
          <strong class="ph b">Resolution:</strong> Fixed in 0.2
        </p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title368" id="IMP-535">

      <h3 class="title topictitle3" id="ariaid-title368">Query with limit clause might fail.</h3>


      <div class="body conbody">

        <p class="p">
          For example:
        </p>


<pre class="pre codeblock"><code>SELECT * FROM test2 LIMIT 1;</code></pre>

        <p class="p">
          <strong class="ph b">Resolution:</strong> Fixed in 0.2
        </p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title369" id="IMP-270">

      <h3 class="title topictitle3" id="ariaid-title369">Files in unsupported compression formats are read as plain text.</h3>


      <div class="body conbody">

        <p class="p">
          Attempting to read such files does not generate a diagnostic.
        </p>


        <p class="p">
          <strong class="ph b">Resolution:</strong> Fixed in 0.2
        </p>

      </div>

    </div>


    <div class="topic concept nested2" aria-labelledby="ariaid-title370" id="IMP-522">

      <h3 class="title topictitle3" id="ariaid-title370">Impala server raises a null pointer exception when running an HBase query.</h3>


      <div class="body conbody">

        <p class="p">
          When querying an HBase table whose row-key is string type, the Impala server may raise a null pointer
          exception.
        </p>


        <p class="p">
          <strong class="ph b">Resolution:</strong> Fixed in 0.2
        </p>

      </div>

    </div>

  </div>

</body>
</html>