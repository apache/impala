<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="copyright" content="(C) Copyright 2024"><meta name="DC.rights.owner" content="(C) Copyright 2024"><meta name="DC.Type" content="concept"><meta name="DC.Relation" scheme="URI" content="../topics/impala_complex_types.html"><meta name="prodname" content="Impala"><meta name="version" content="Impala 3.4.x"><meta name="DC.Format" content="XHTML"><meta name="DC.Identifier" content="impala_unnest_views"><link rel="stylesheet" type="text/css" href="../css/commonltr.css"><link rel="stylesheet" type="text/css" href="../css/dita-ot-doc.css"><title>Zipping unnest on arrays from views (Impala 4.1 or higher only)</title></head><body id="impala_unnest_views"><header role="banner"><!--
The DITA Open Toolkit is licensed for use under the the Apache
Software Foundation License v2.0.

A copy of the Apache Software Foundation License 2.0 is
available at http://opensource.org/licenses/apache2.0.php

This statement must be included in any copies of DITA Open
Toolkit code.
--><div class="header">
  <p>Apache Impala</p>
  <hr>
</div></header><nav role="toc"><ul><li><a href="../topics/impala_intro.html">Introducing Apache Impala</a></li><li><a href="../topics/impala_concepts.html">Concepts and Architecture</a></li><li><a href="../topics/impala_planning.html">Deployment Planning</a></li><li><a href="../topics/impala_install.html">Installing Impala</a></li><li><a href="../topics/impala_config.html">Managing Impala</a></li><li><a href="../topics/impala_upgrading.html">Upgrading Impala</a></li><li><a href="../topics/impala_processes.html">Starting Impala</a></li><li><a href="../topics/impala_tutorial.html">Tutorials</a></li><li><a href="../topics/impala_admin.html">Administration</a></li><li><a href="../topics/impala_security.html">Impala Security</a></li><li><a href="../topics/impala_langref.html">SQL Reference</a><ul><li><a href="../topics/impala_comments.html">Comments</a></li><li><a href="../topics/impala_datatypes.html">Data Types</a><ul><li><a href="../topics/impala_array.html">ARRAY Complex Type (Impala 2.3 or higher only)</a></li><li><a href="../topics/impala_bigint.html">BIGINT</a></li><li><a href="../topics/impala_boolean.html">BOOLEAN</a></li><li><a href="../topics/impala_char.html">CHAR</a></li><li><a href="../topics/impala_date.html">DATE</a></li><li><a href="../topics/impala_decimal.html">DECIMAL</a></li><li><a href="../topics/impala_double.html">DOUBLE</a></li><li><a href="../topics/impala_float.html">FLOAT</a></li><li><a href="../topics/impala_int.html">INT</a></li><li><a href="../topics/impala_map.html">MAP Complex Type (Impala 2.3 or higher only)</a></li><li><a href="../topics/impala_real.html">REAL</a></li><li><a href="../topics/impala_smallint.html">SMALLINT</a></li><li><a href="../topics/impala_string.html">STRING</a></li><li><a href="../topics/impala_struct.html">STRUCT Complex Type (Impala 2.3 or higher only)</a></li><li><a href="../topics/impala_timestamp.html">TIMESTAMP</a></li><li><a href="../topics/impala_tinyint.html">TINYINT</a></li><li><a href="../topics/impala_varchar.html">VARCHAR</a></li><li><a href="../topics/impala_complex_types.html">Complex Types (Impala 2.3 or higher only)</a><ul><li><a href="../topics/impala_queryingarrays.html">Querying arrays</a></li><li class="active"><a href="../topics/impala_unnest_views.html">Zipping unnest on arrays from views</a></li></ul></li></ul></li><li><a href="../topics/impala_literals.html">Literals</a></li><li><a href="../topics/impala_operators.html">SQL Operators</a></li><li><a href="../topics/impala_schema_objects.html">Schema Objects and Object Names</a></li><li><a href="../topics/impala_transactions.html">Transactions</a></li><li><a href="../topics/impala_langref_sql.html">SQL Statements</a></li><li><a href="../topics/impala_functions.html">Built-In Functions</a></li><li><a href="../topics/impala_udf.html">User-Defined Functions (UDFs)</a></li><li><a href="../topics/impala_langref_unsupported.html">SQL Differences Between Impala and Hive</a></li><li><a href="../topics/impala_porting.html">Porting SQL</a></li><li><a href="../topics/impala_utf_8.html">UTF-8 Support</a></li></ul></li><li><a href="../topics/impala_performance.html">Performance Tuning</a></li><li><a href="../topics/impala_scalability.html">Scalability Considerations</a></li><li><a href="../topics/impala_resource_management.html">Resource Management</a></li><li><a href="../topics/impala_partitioning.html">Partitioning</a></li><li><a href="../topics/impala_file_formats.html">File Formats</a></li><li><a href="../topics/impala_kudu.html">Using Impala to Query Kudu Tables</a></li><li><a href="../topics/impala_hbase.html">HBase Tables</a></li><li><a href="../topics/impala_iceberg.html">Iceberg Tables</a></li><li><a href="../topics/impala_s3.html">S3 Tables</a></li><li><a href="../topics/impala_adls.html">ADLS Tables</a></li><li><a href="../topics/impala_isilon.html">Isilon Storage</a></li><li><a href="../topics/impala_ozone.html">Ozone Storage</a></li><li><a href="../topics/impala_logging.html">Logging</a></li><li><a href="../topics/impala_client.html">Client Access</a></li><li><a href="../topics/impala_fault_tolerance.html">Fault Tolerance</a></li><li><a href="../topics/impala_troubleshooting.html">Troubleshooting Impala</a></li><li><a href="../topics/impala_ports.html">Ports Used by Impala</a></li><li><a href="../topics/impala_reserved_words.html">Impala Reserved Words</a></li><li><a href="../topics/impala_faq.html">Impala Frequently Asked Questions</a></li><li><a href="../topics/impala_release_notes.html">Impala Release Notes</a></li></ul></nav><main role="main"><article role="article" aria-labelledby="ariaid-title1">
  <h1 class="title topictitle1" id="ariaid-title1">Zipping unnest on arrays from views (<span class="keyword">Impala 4.1</span> or higher only)</h1>
  
  
  <div class="body conbody">
    <div class="p">
      
      <span class="keyword">Impala 4.1</span>, the zipping unnest functionality works for arrays in both tables
      and
      views.<pre class="pre codeblock" id="impala_unnest_views__codeblock_nwz_lyc_3cc"><code>SELECT UNNSET(arr1) FROM view_name;</code></pre>
    </div>
    <section class="section" id="impala_unnest_views__section_irf_rrb_3cc"><h2 class="title sectiontitle">UNNEST() on array columns</h2>
      
      <p class="p">You can use <code class="ph codeph">UNNEST()</code> on array columns in two ways. Using one of these two
        ways results in the items of the arrays being zipped together instead of joining.</p>
      <ul class="ul" id="impala_unnest_views__ul_jrf_rrb_3cc">
        <li class="li">ISO:SQL 2016 compliant syntax</li>
      </ul>
      <pre class="pre codeblock" id="impala_unnest_views__codeblock_krf_rrb_3cc"><code>SELECT a1.item, a2.item
FROM complextypes_arrays t, UNNEST(t.arr1, t.arr2) AS (a1, a2);
</code></pre>
      <ul class="ul" id="impala_unnest_views__ul_lrf_rrb_3cc">
        <li class="li">Postgres compatible syntax</li>
      </ul>
      <pre class="pre codeblock" id="impala_unnest_views__codeblock_mrf_rrb_3cc"><code>SELECT UNNEST(arr1), UNNEST(arr2) FROM complextypes_arrays;</code></pre>
      <p class="p">When unnesting multiple arrays with zipping unnest, the i'th item of one array will be
        placed next to the i'th item of the other arrays in the results. If the size of the arrays
        is not equal then the shorter arrays will be filled with NULL values up to the size of the
        longest array as shown in the following example:</p>
      <p class="p">The test data used in this example is arr1: {1, 2, 3}, arr2: {11, 12}</p>
      <p class="p">After running any of the queries listed in the examples, the result will be as shown
        here:</p>
      <div class="p">
        <pre class="pre codeblock" id="impala_unnest_views__codeblock_n5z_cjq_mtb"><code>arr1 arr2
[1, 11]
[2, 12]
[3, NULL]
</code></pre>
      </div>
    </section>
    <section class="section" id="impala_unnest_views__section_ifc_trb_3cc"><h2 class="title sectiontitle">Example of an UNNEST() in an inline view using SELECT/FILTER of the inline view</h2>
      
      <p class="p">In the following example the filter is not in the <code class="ph codeph">SELECT</code> query that
        creates the inline view but a level above that.</p>
      <pre class="pre codeblock" id="impala_unnest_views__codeblock_jfc_trb_3cc"><code>SELECT id, ac1, ac2 FROM (SELECT id, UNNEST(array_col1) AS ac1, UNNEST(array_col2) AS ac2 FROM some_view) WHERE id &lt;10;
</code></pre>
    </section>
  </div>
<nav role="navigation" class="related-links"><div class="familylinks"><div class="parentlink"><strong>Parent topic:</strong> <a class="link" href="../topics/impala_complex_types.html">Complex Types (Impala 2.3 or higher only)</a></div></div></nav></article></main></body></html>