<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="copyright" content="(C) Copyright 2025"><meta name="DC.rights.owner" content="(C) Copyright 2025"><meta name="DC.Type" content="concept"><meta name="DC.Relation" scheme="URI" content="../topics/impala_ha.html"><meta name="prodname" content="Impala"><meta name="version" content="Impala 3.4.x"><meta name="DC.Format" content="XHTML"><meta name="DC.Identifier" content="impala_ha_catalog"><link rel="stylesheet" type="text/css" href="../css/commonltr.css"><link rel="stylesheet" type="text/css" href="../css/dita-ot-doc.css"><title>Configuring Catalog for High Availability</title></head><body id="impala_ha_catalog"><header role="banner"><!--
The DITA Open Toolkit is licensed for use under the the Apache
Software Foundation License v2.0.

A copy of the Apache Software Foundation License 2.0 is
available at http://opensource.org/licenses/apache2.0.php

This statement must be included in any copies of DITA Open
Toolkit code.
--><div class="header">
  <p>Apache Impala</p>
  <hr>
</div></header><nav role="toc"><ul><li><a href="../topics/impala_intro.html">Introducing Apache Impala</a></li><li><a href="../topics/impala_concepts.html">Concepts and Architecture</a></li><li><a href="../topics/impala_planning.html">Deployment Planning</a></li><li><a href="../topics/impala_install.html">Installing Impala</a></li><li><a href="../topics/impala_config.html">Managing Impala</a></li><li><a href="../topics/impala_upgrading.html">Upgrading Impala</a></li><li><a href="../topics/impala_processes.html">Starting Impala</a></li><li><a href="../topics/impala_tutorial.html">Tutorials</a></li><li><a href="../topics/impala_admin.html">Administration</a><ul><li><a href="../topics/impala_timeouts.html">Setting Timeouts</a></li><li><a href="../topics/impala_ha.html">Configuring Impala for High Availability</a><ul><li><a href="../topics/impala_ha_statestore.html">Configuring StateStore for High Availability</a></li><li class="active"><a href="../topics/impala_ha_catalog.html">Configuring Catalog for High Availability</a></li></ul></li><li><a href="../topics/impala_proxy.html">Load-Balancing Proxy for HA</a></li><li><a href="../topics/impala_disk_space.html">Managing Disk Space</a></li></ul></li><li><a href="../topics/impala_security.html">Impala Security</a></li><li><a href="../topics/impala_langref.html">SQL Reference</a></li><li><a href="../topics/impala_performance.html">Performance Tuning</a></li><li><a href="../topics/impala_scalability.html">Scalability Considerations</a></li><li><a href="../topics/impala_resource_management.html">Resource Management</a></li><li><a href="../topics/impala_partitioning.html">Partitioning</a></li><li><a href="../topics/impala_file_formats.html">File Formats</a></li><li><a href="../topics/impala_jdbc_external_table.html">Using Impala to Query External JDBC Data Sources</a></li><li><a href="../topics/impala_kudu.html">Using Impala to Query Kudu Tables</a></li><li><a href="../topics/impala_hbase.html">HBase Tables</a></li><li><a href="../topics/impala_iceberg.html">Iceberg Tables</a></li><li><a href="../topics/impala_s3.html">S3 Tables</a></li><li><a href="../topics/impala_adls.html">ADLS Tables</a></li><li><a href="../topics/impala_isilon.html">Isilon Storage</a></li><li><a href="../topics/impala_ozone.html">Ozone Storage</a></li><li><a href="../topics/impala_logging.html">Logging</a></li><li><a href="../topics/impala_client.html">Client Access</a></li><li><a href="../topics/impala_fault_tolerance.html">Fault Tolerance</a></li><li><a href="../topics/impala_troubleshooting.html">Troubleshooting Impala</a></li><li><a href="../topics/impala_ports.html">Ports Used by Impala</a></li><li><a href="../topics/impala_reserved_words.html">Impala Reserved Words</a></li><li><a href="../topics/impala_faq.html">Impala Frequently Asked Questions</a></li><li><a href="../topics/impala_release_notes.html">Impala Release Notes</a></li></ul></nav><main role="main"><article role="article" aria-labelledby="ariaid-title1">
  <h1 class="title topictitle1" id="ariaid-title1">Configuring Catalog for High Availability</h1>
  
  <div class="body conbody">
    <p class="p">With any new query requests, the Impala coordinator sends metadata requests to Catalog
      service and sends metadata updates to Catalog which in turn propagates metadata updates to
      hive metastore. With a pair of primary/standby Catalog instances, the standby Catalog instance
      will be promoted as the primary instance to continue Catalog service for Impala cluster when
      the primary instance goes down. The active Catalogd acts as the source of metadata and
      provides Catalog service for the Impala cluster. This high availability mode of Catalog
      service reduces the outage duration of the Impala cluster when the primary Catalog instance
      fails. To support Catalog HA, you can now add two Catalogd instances in an Active-Passive high
      availability pair to an Impala cluster.</p>
  </div>
  <nav role="navigation" class="related-links"><div class="familylinks"><div class="parentlink"><strong>Parent topic:</strong> <a class="link" href="../topics/impala_ha.html">Configuring Impala for High Availability</a></div></div></nav><article class="topic concept nested1" aria-labelledby="ariaid-title2" id="impala_ha_catalog__enabling_catalog_ha">
    <h2 class="title topictitle2" id="ariaid-title2">Enabling Catalog High Availability</h2>
    <div class="body conbody">
      <div class="p">To enable Catalog high availability in an Impala cluster, follow these steps:<ul class="ul" id="enabling_catalog_ha__ul_pj4_ycn_1cc">
          <li class="li">Set the starting flag <code class="ph codeph">enable_catalogd_ha</code> to <code class="ph codeph">true</code> for
            both catalogd instances and the StateStore.</li>
        </ul></div>
      <p class="p">The active StateStore will assign roles to the CatalogD instances, designating one as the
        active CatalogD and the other as the standby CatalogD. The active CatalogD acts as the
        source of metadata and provides Catalog services for the Impala cluster.</p>
    </div>
  </article>
  <article class="topic concept nested1" aria-labelledby="ariaid-title3" id="impala_ha_catalog__disabling_catalog_ha">
    <h2 class="title topictitle2" id="ariaid-title3">Disabling Catalog High Availability</h2>
    <div class="body conbody">
      <div class="p">To disable Catalog high availability in an Impala cluster, follow these steps:<ol class="ol" id="disabling_catalog_ha__ol_udj_b1n_1cc">
          <li class="li">Remove one CatalogD instance from the Impala cluster.</li>
          <li class="li">Restart the remaining CatalogD instance without the starting flag
              <code class="ph codeph">enable_catalogd_ha</code>.</li>
          <li class="li">Restart the StateStore without the starting flag
            <code class="ph codeph">enable_catalogd_ha</code>.</li>
        </ol></div>
    </div>
  </article>
  <article class="topic concept nested1" aria-labelledby="ariaid-title4" id="impala_ha_catalog__monitoring_status_ha">
    <h2 class="title topictitle2" id="ariaid-title4">Monitoring Catalog HA Status in the StateStore Web Page</h2>
    <div class="body conbody">
      <p class="p">A new web page <code class="ph codeph">/catalog_ha_info</code> has been added to the StateStore debug web
        server. This page displays the Catalog HA status, including:</p>
      <ul class="ul" id="monitoring_status_ha__ha_status_web">
        <li class="li">Active Catalog Node</li>
        <li class="li">Standby Catalog Node</li>
        <li class="li">Notified Subscribers Table</li>
      </ul>
      <p class="p">To access this information, navigate to the <code class="ph codeph">/catalog_ha_info</code> page on the
        StateStore debug web server.</p>
    </div>
  </article>
  <article class="topic concept nested1" aria-labelledby="ariaid-title5" id="impala_ha_catalog__catalog_failure_detection">
    <h2 class="title topictitle2" id="ariaid-title5">Catalog Failure Detection</h2>
    <div class="body conbody">
      <p class="p">The StateStore instance continuously sends heartbeat to its registered clients, including
        the primary and standby Catalog instances, to track Impala daemons in the cluster to
        determine if the daemon is healthy. If the StateStore finds the primary Catalog instance is
        not healthy but the standby Catalog instance is healthy, StateStore promotes the standby
        Catalog instance as primary instance and notify all coordinators for this change.
        Coordinators will switch over to the new primary Catalog instance.</p>
      <p class="p">When the system detects that the active CatalogD is unhealthy, it initiates a failover to
        the standby CatalogD. During this brief transition, some nodes might not immediately
        recognize the new active CatalogD, causing currently running queries to fail due to lack of
        access to metadata. These failed queries need to be rerun after the failover is complete and
        the new active CatalogD is operational.</p>
    </div>
  </article>
</article></main></body></html>