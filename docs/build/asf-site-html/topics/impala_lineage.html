<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="copyright" content="(C) Copyright 2022"><meta name="DC.rights.owner" content="(C) Copyright 2022"><meta name="DC.Type" content="concept"><meta name="DC.Relation" scheme="URI" content="../topics/impala_security.html"><meta name="prodname" content="Impala"><meta name="prodname" content="Impala"><meta name="version" content="Impala 3.4.x"><meta name="version" content="Impala 3.4.x"><meta name="DC.Format" content="XHTML"><meta name="DC.Identifier" content="lineage"><link rel="stylesheet" type="text/css" href="../css/commonltr.css"><link rel="stylesheet" type="text/css" href="../css/dita-ot-doc.css"><title>Viewing Lineage Information for Impala Data</title></head><body id="lineage"><header role="banner"><!--
The DITA Open Toolkit is licensed for use under the the Apache
Software Foundation License v2.0.

A copy of the Apache Software Foundation License 2.0 is
available at http://opensource.org/licenses/apache2.0.php

This statement must be included in any copies of DITA Open
Toolkit code.
--><div class="header">
  <p>Apache Impala</p>
  <hr>
</div></header><nav role="toc"><ul><li><a href="../topics/impala_intro.html">Introducing Apache Impala</a></li><li><a href="../topics/impala_concepts.html">Concepts and Architecture</a></li><li><a href="../topics/impala_planning.html">Deployment Planning</a></li><li><a href="../topics/impala_install.html">Installing Impala</a></li><li><a href="../topics/impala_config.html">Managing Impala</a></li><li><a href="../topics/impala_upgrading.html">Upgrading Impala</a></li><li><a href="../topics/impala_processes.html">Starting Impala</a></li><li><a href="../topics/impala_tutorial.html">Tutorials</a></li><li><a href="../topics/impala_admin.html">Administration</a></li><li><a href="../topics/impala_security.html">Impala Security</a><ul><li><a href="../topics/impala_security_guidelines.html">Security Guidelines for Impala</a></li><li><a href="../topics/impala_security_files.html">Securing Impala Data and Log Files</a></li><li><a href="../topics/impala_security_install.html">Installation Considerations for Impala Security</a></li><li><a href="../topics/impala_security_metastore.html">Securing the Hive Metastore Database</a></li><li><a href="../topics/impala_security_webui.html">Securing the Impala Web User Interface</a></li><li><a href="../topics/impala_ssl.html">Configuring TLS/SSL for Impala</a></li><li><a href="../topics/impala_authorization.html">Impala Authorization</a></li><li><a href="../topics/impala_authentication.html">Impala Authentication</a></li><li><a href="../topics/impala_auditing.html">Auditing</a></li><li class="active"><a href="../topics/impala_lineage.html">Viewing Lineage Info</a></li></ul></li><li><a href="../topics/impala_langref.html">SQL Reference</a></li><li><a href="../topics/impala_performance.html">Performance Tuning</a></li><li><a href="../topics/impala_scalability.html">Scalability Considerations</a></li><li><a href="../topics/impala_resource_management.html">Resource Management</a></li><li><a href="../topics/impala_partitioning.html">Partitioning</a></li><li><a href="../topics/impala_file_formats.html">File Formats</a></li><li><a href="../topics/impala_kudu.html">Using Impala to Query Kudu Tables</a></li><li><a href="../topics/impala_hbase.html">HBase Tables</a></li><li><a href="../topics/impala_iceberg.html">Iceberg Tables</a></li><li><a href="../topics/impala_s3.html">S3 Tables</a></li><li><a href="../topics/impala_adls.html">ADLS Tables</a></li><li><a href="../topics/impala_isilon.html">Isilon Storage</a></li><li><a href="../topics/impala_logging.html">Logging</a></li><li><a href="../topics/impala_client.html">Client Access</a></li><li><a href="../topics/impala_fault_tolerance.html">Fault Tolerance</a></li><li><a href="../topics/impala_troubleshooting.html">Troubleshooting Impala</a></li><li><a href="../topics/impala_ports.html">Ports Used by Impala</a></li><li><a href="../topics/impala_reserved_words.html">Impala Reserved Words</a></li><li><a href="../topics/impala_faq.html">Impala Frequently Asked Questions</a></li><li><a href="../topics/impala_release_notes.html">Impala Release Notes</a></li></ul></nav><main role="main"><article role="article" aria-labelledby="ariaid-title1">

  <h1 class="title topictitle1" id="ariaid-title1">Viewing Lineage Information for Impala Data</h1>
  
  

  <div class="body conbody">

    <p class="p">
      
      
      <dfn class="term">Lineage</dfn> is a feature that helps you track where data originated, and how
      data propagates through the system through SQL statements such as
        <code class="ph codeph">SELECT</code>, <code class="ph codeph">INSERT</code>, and <code class="ph codeph">CREATE
        TABLE AS SELECT</code>.
    </p>
    <p class="p">
      This type of tracking is important in high-security configurations, especially in
      highly regulated industries such as healthcare, pharmaceuticals, financial services and
      intelligence. For such kinds of sensitive data, it is important to know all
      the places in the system that contain that data or other data derived from it; to verify who has accessed
      that data; and to be able to doublecheck that the data used to make a decision was processed correctly and
      not tampered with.
    </p>

    <section class="section" id="lineage__column_lineage"><h2 class="title sectiontitle">Column Lineage</h2>

      

      <p class="p">
        <dfn class="term">Column lineage</dfn> tracks information in fine detail, at the level of
        particular columns rather than entire tables.
      </p>

      <p class="p">
        For example, if you have a table with information derived from web logs, you might copy that data into
        other tables as part of the ETL process. The ETL operations might involve transformations through
        expressions and function calls, and rearranging the columns into more or fewer tables
        (<dfn class="term">normalizing</dfn> or <dfn class="term">denormalizing</dfn> the data). Then for reporting, you might issue
        queries against multiple tables and views. In this example, column lineage helps you determine that data
        that entered the system as <code class="ph codeph">RAW_LOGS.FIELD1</code> was then turned into
        <code class="ph codeph">WEBSITE_REPORTS.IP_ADDRESS</code> through an <code class="ph codeph">INSERT ... SELECT</code> statement. Or,
        conversely, you could start with a reporting query against a view, and trace the origin of the data in a
        field such as <code class="ph codeph">TOP_10_VISITORS.USER_ID</code> back to the underlying table and even further back
        to the point where the data was first loaded into Impala.
      </p>

      <p class="p">
        When you have tables where you need to track or control access to sensitive information at the column
        level, see <a class="xref" href="impala_authorization.html#authorization">Impala Authorization</a> for how to implement column-level
        security. You set up authorization using the Ranger framework, create views that refer to specific sets of
        columns, and then assign authorization privileges to those views rather than the underlying tables.
      </p>

    </section>

    <section class="section" id="lineage__lineage_data"><h2 class="title sectiontitle">Lineage Data for Impala</h2>

      

      <p class="p">
        The lineage feature is enabled by default. When lineage logging is enabled, the serialized column lineage
        graph is computed for each query and stored in a specialized log file in JSON format.
      </p>

      <p class="p">
        Impala records queries in the lineage log if they complete successfully, or fail due to authorization
        errors. For write operations such as <code class="ph codeph">INSERT</code> and <code class="ph codeph">CREATE TABLE AS SELECT</code>,
        the statement is recorded in the lineage log only if it successfully completes. Therefore, the lineage
        feature tracks data that was accessed by successful queries, or that was attempted to be accessed by
        unsuccessful queries that were blocked due to authorization failure. These kinds of queries represent data
        that really was accessed, or where the attempted access could represent malicious activity.
      </p>

      <p class="p">
        Impala does not record in the lineage log queries that fail due to syntax errors or that fail or are
        cancelled before they reach the stage of requesting rows from the result set.
      </p>

      <p class="p">
        To enable or disable this feature, set or remove the <code class="ph codeph">-lineage_event_log_dir</code>
        configuration option for the <span class="keyword cmdname">impalad</span> daemon.
      </p>

    </section>

  </div>

<nav role="navigation" class="related-links"><div class="familylinks"><div class="parentlink"><strong>Parent topic:</strong> <a class="link" href="../topics/impala_security.html">Impala Security</a></div></div></nav></article></main></body></html>