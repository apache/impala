<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="copyright" content="(C) Copyright 2018"><meta name="DC.rights.owner" content="(C) Copyright 2018"><meta name="DC.Type" content="concept"><meta name="DC.Relation" scheme="URI" content="../topics/impala_performance.html"><meta name="prodname" content="Impala"><meta name="prodname" content="Impala"><meta name="version" content="Impala 2.8.x"><meta name="version" content="Impala 2.8.x"><meta name="DC.Format" content="XHTML"><meta name="DC.Identifier" content="performance_testing"><link rel="stylesheet" type="text/css" href="../commonltr.css"><title>Testing Impala Performance</title></head><body id="performance_testing"><main role="main"><article role="article" aria-labelledby="ariaid-title1">

  <h1 class="title topictitle1" id="ariaid-title1">Testing Impala Performance</h1>
  

  <div class="body conbody">

    <p class="p">
      Test to ensure that Impala is configured for optimal performance. If you have installed Impala with cluster
      management software, complete the processes described in this topic to help ensure a proper
      configuration. These procedures can be used to verify that Impala is set up correctly.
    </p>

    <section class="section" id="performance_testing__checking_config_performance"><h2 class="title sectiontitle">Checking Impala Configuration Values</h2>

      

      <p class="p">
        You can inspect Impala configuration values by connecting to your Impala server using a browser.
      </p>

      <p class="p">
        <strong class="ph b">To check Impala configuration values:</strong>
      </p>

      <ol class="ol">
        <li class="li">
          Use a browser to connect to one of the hosts running <code class="ph codeph">impalad</code> in your environment.
          Connect using an address of the form
          <code class="ph codeph">http://<var class="keyword varname">hostname</var>:<var class="keyword varname">port</var>/varz</code>.
          <div class="note note note_note"><span class="note__title notetitle">Note:</span> 
            In the preceding example, replace <code class="ph codeph">hostname</code> and <code class="ph codeph">port</code> with the name and
            port of your Impala server. The default port is 25000.
          </div>
        </li>

        <li class="li">
          Review the configured values.
          <p class="p">
            For example, to check that your system is configured to use block locality tracking information, you
            would check that the value for <code class="ph codeph">dfs.datanode.hdfs-blocks-metadata.enabled</code> is
            <code class="ph codeph">true</code>.
          </p>
        </li>
      </ol>

      <p class="p" id="performance_testing__p_31">
        <strong class="ph b">To check data locality:</strong>
      </p>

      <ol class="ol">
        <li class="li">
          Execute a query on a dataset that is available across multiple nodes. For example, for a table named
          <code class="ph codeph">MyTable</code> that has a reasonable chance of being spread across multiple DataNodes:
<pre class="pre codeblock"><code>[impalad-host:21000] &gt; SELECT COUNT (*) FROM MyTable</code></pre>
        </li>

        <li class="li">
          After the query completes, review the contents of the Impala logs. You should find a recent message
          similar to the following:
<pre class="pre codeblock"><code>Total remote scan volume = 0</code></pre>
        </li>
      </ol>

      <p class="p">
        The presence of remote scans may indicate <code class="ph codeph">impalad</code> is not running on the correct nodes.
        This can be because some DataNodes do not have <code class="ph codeph">impalad</code> running or it can be because the
        <code class="ph codeph">impalad</code> instance that is starting the query is unable to contact one or more of the
        <code class="ph codeph">impalad</code> instances.
      </p>

      <p class="p">
        <strong class="ph b">To understand the causes of this issue:</strong>
      </p>

      <ol class="ol">
        <li class="li">
          Connect to the debugging web server. By default, this server runs on port 25000. This page lists all
          <code class="ph codeph">impalad</code> instances running in your cluster. If there are fewer instances than you expect,
          this often indicates some DataNodes are not running <code class="ph codeph">impalad</code>. Ensure
          <code class="ph codeph">impalad</code> is started on all DataNodes.
        </li>

        <li class="li">
          
          If you are using multi-homed hosts, ensure that the Impala daemon's hostname resolves to the interface on
          which <code class="ph codeph">impalad</code> is running. The hostname Impala is using is displayed when
          <code class="ph codeph">impalad</code> starts. To explicitly set the hostname, use the <code class="ph codeph">--hostname</code>&nbsp;flag.
        </li>

        <li class="li">
          Check that <code class="ph codeph">statestored</code> is running as expected. Review the contents of the state store
          log to ensure all instances of <code class="ph codeph">impalad</code> are listed as having connected to the state
          store.
        </li>
      </ol>
    </section>

    <section class="section" id="performance_testing__checking_config_logs"><h2 class="title sectiontitle">Reviewing Impala Logs</h2>

      

      <p class="p">
        You can review the contents of the Impala logs for signs that short-circuit reads or block location
        tracking are not functioning. Before checking logs, execute a simple query against a small HDFS dataset.
        Completing a query task generates log messages using current settings. Information on starting Impala and
        executing queries can be found in <a class="xref" href="impala_processes.html#processes">Starting Impala</a> and
        <a class="xref" href="impala_impala_shell.html#impala_shell">Using the Impala Shell (impala-shell Command)</a>. Information on logging can be found in
        <a class="xref" href="impala_logging.html#logging">Using Impala Logging</a>. Log messages and their interpretations are as follows:
      </p>

      <table class="table"><caption></caption><colgroup><col style="width:75%"><col style="width:25%"></colgroup><thead class="thead">
            <tr class="row">
              <th class="entry nocellnorowborder" id="performance_testing__checking_config_logs__entry__1">
                Log Message
              </th>
              <th class="entry nocellnorowborder" id="performance_testing__checking_config_logs__entry__2">
                Interpretation
              </th>
            </tr>
          </thead><tbody class="tbody">
            <tr class="row">
              <td class="entry nocellnorowborder" headers="performance_testing__checking_config_logs__entry__1 ">
                <div class="p">
<pre class="pre">Unknown disk id. This will negatively affect performance. Check your hdfs settings to enable block location metadata
</pre>
                </div>
              </td>
              <td class="entry nocellnorowborder" headers="performance_testing__checking_config_logs__entry__2 ">
                <p class="p">
                  Tracking block locality is not enabled.
                </p>
              </td>
            </tr>
            <tr class="row">
              <td class="entry nocellnorowborder" headers="performance_testing__checking_config_logs__entry__1 ">
                <div class="p">
<pre class="pre">Unable to load native-hadoop library for your platform... using builtin-java classes where applicable</pre>
                </div>
              </td>
              <td class="entry nocellnorowborder" headers="performance_testing__checking_config_logs__entry__2 ">
                <p class="p">
                  Native checksumming is not enabled.
                </p>
              </td>
            </tr>
          </tbody></table>
    </section>
  </div>
<nav role="navigation" class="related-links"><div class="familylinks"><div class="parentlink"><strong>Parent topic:</strong> <a class="link" href="../topics/impala_performance.html">Tuning Impala for Performance</a></div></div></nav></article></main></body></html>