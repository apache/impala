<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta name="copyright" content="(C) Copyright 2018" />
<meta name="DC.rights.owner" content="(C) Copyright 2018" />
<meta name="DC.Type" content="concept" />
<meta name="DC.Title" content="New Features in Apache Impala" />
<meta name="DC.Relation" scheme="URI" content="../topics/impala_release_notes.html" />
<meta name="prodname" content="Impala" />
<meta name="prodname" content="Impala" />
<meta name="version" content="Impala 3.0.x" />
<meta name="version" content="Impala 3.0.x" />
<meta name="DC.Format" content="XHTML" />
<meta name="DC.Identifier" content="new_features" />
<link rel="stylesheet" type="text/css" href="../commonltr.css" />
<title>New Features in Apache Impala</title>
</head>
<body id="new_features">


  <h1 class="title topictitle1" id="ariaid-title1"><span class="ph">New Features in Apache Impala</span></h1>


  

  <div class="body conbody">

    <p class="p">
      This release of Impala contains the following changes and enhancements from previous releases.
    </p>


    <p class="p toc inpage"></p>


  </div>


  <div class="related-links">
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a class="link" href="../topics/impala_release_notes.html">Impala Release Notes</a></div>
</div>
</div><div class="topic concept nested1" aria-labelledby="ariaid-title2" id="new_features_31">
    <h2 class="title topictitle2" id="ariaid-title2">New Features in <span class="keyword">Impala 3.1</span></h2>

    <div class="body conbody">
      <p class="p"> For the full list of issues closed in this release, including the
        issues marked as <span class="q">"new features"</span> or <span class="q">"improvements"</span>, see the
          <a class="xref" href="https://impala.apache.org/docs/changelog-3.1.html" target="_blank">changelog for <span class="keyword">Impala 3.1</span></a>. </p>

    </div>

  </div>



  <div class="topic concept nested1" aria-labelledby="ariaid-title3" id="new_features_300">
    <h2 class="title topictitle2" id="ariaid-title3">New Features in <span class="keyword">Impala 3.0</span></h2>

    <div class="body conbody">
      <p class="p">
        For the full list of issues closed in this release, including the
        issues marked as <span class="q">"new features"</span> or <span class="q">"improvements"</span>, see the
          <a class="xref" href="https://impala.apache.org/docs/changelog-3.0.html" target="_blank">changelog for <span class="keyword">Impala 3.0</span></a>.
      </p>

    </div>

  </div>




  <div class="topic concept nested1" aria-labelledby="ariaid-title4" id="new_features_2120">

    <h2 class="title topictitle2" id="ariaid-title4">New Features in <span class="keyword">Impala 2.12</span></h2>


    <div class="body conbody">

      <p class="p">
        For the full list of issues closed in this release, including the issues
        marked as <span class="q">"new features"</span> or <span class="q">"improvements"</span>, see the
        <a class="xref" href="https://impala.apache.org/docs/changelog-2.12.html" target="_blank">changelog for <span class="keyword">Impala 2.12</span></a>.
      </p>


    </div>

  </div>




  <div class="topic concept nested1" aria-labelledby="ariaid-title5" id="new_features_2110">

    <h2 class="title topictitle2" id="ariaid-title5">New Features in <span class="keyword">Impala 2.11</span></h2>


    <div class="body conbody">

      <p class="p">
        For the full list of issues closed in this release, including the issues
        marked as <span class="q">"new features"</span> or <span class="q">"improvements"</span>, see the
        <a class="xref" href="https://impala.apache.org/docs/changelog-2.11.html" target="_blank">changelog for <span class="keyword">Impala 2.11</span></a>.
      </p>


    </div>

  </div>




  <div class="topic concept nested1" aria-labelledby="ariaid-title6" id="new_features_2100">

    <h2 class="title topictitle2" id="ariaid-title6">New Features in <span class="keyword">Impala 2.10</span></h2>


    <div class="body conbody">

      <p class="p">
        For the full list of issues closed in this release, including the issues
        marked as <span class="q">"new features"</span> or <span class="q">"improvements"</span>, see the
        <a class="xref" href="https://impala.apache.org/docs/changelog-2.10.html" target="_blank">changelog for <span class="keyword">Impala 2.10</span></a>.
      </p>


    </div>

  </div>




  <div class="topic concept nested1" aria-labelledby="ariaid-title7" id="new_features_290">

    <h2 class="title topictitle2" id="ariaid-title7">New Features in <span class="keyword">Impala 2.9</span></h2>


    <div class="body conbody">

      <p class="p">
        For the full list of issues closed in this release, including the issues
        marked as <span class="q">"new features"</span> or <span class="q">"improvements"</span>, see the
        <a class="xref" href="https://impala.apache.org/docs/changelog-2.9.html" target="_blank">changelog for <span class="keyword">Impala 2.9</span></a>.
      </p>


      <p class="p">
        The following are some of the most significant new features in this release:
      </p>


      <ul class="ul" id="new_features_290__feature_list">
        <li class="li">
          <p class="p">
            A new function, <code class="ph codeph">replace()</code>, which is faster than
            <code class="ph codeph">regexp_replace()</code> for simple string substitutions.
            See <a class="xref" href="impala_string_functions.html">Impala String Functions</a> for details.
          </p>

        </li>

        <li class="li">
          <p class="p">
            Startup flags for the <span class="keyword cmdname">impalad</span> daemon, <code class="ph codeph">is_executor</code>
            and <code class="ph codeph">is_coordinator</code>, let you divide the work on a large, busy cluster
            between a small number of hosts acting as query coordinators, and a larger number of
            hosts acting as query executors. By default, each host can act in both roles,
            potentially introducing bottlenecks during heavily concurrent workloads.
            See <a class="xref" href="impala_dedicated_coordinator.html">How to Configure Impala with Dedicated Coordinators</a> for details.
          </p>

        </li>

      </ul>


    </div>

  </div>




  <div class="topic concept nested1" aria-labelledby="ariaid-title8" id="new_features_280">

    <h2 class="title topictitle2" id="ariaid-title8">New Features in <span class="keyword">Impala 2.8</span></h2>


    <div class="body conbody">

      <ul class="ul" id="new_features_280__feature_list">
        <li class="li">
          <p class="p">
            Performance and scalability improvements:
          </p>

          <ul class="ul">
            <li class="li">
              <p class="p">
                The <code class="ph codeph">COMPUTE STATS</code> statement can
                take advantage of multithreading.
              </p>

            </li>

            <li class="li">
              <p class="p">
                Improved scalability for highly concurrent loads by reducing the possibility of TCP/IP timeouts.
                A configuration setting, <code class="ph codeph">accepted_cnxn_queue_depth</code>, can be adjusted upwards to
                avoid this type of timeout on large clusters.
              </p>

            </li>

            <li class="li">
              <p class="p">
                Several performance improvements were made to the mechanism for generating native code:
              </p>

              <ul class="ul">
                <li class="li">
                  <p class="p">
                    Some queries involving analytic functions can take better advantage of native code generation.
                  </p>

                </li>

                <li class="li">
                  <p class="p">
                    Modules produced during intermediate code generation are organized
                    to be easier to cache and reuse during the lifetime of a long-running or complicated query.
                  </p>

                </li>

                <li class="li">
                  <p class="p">
                    The <code class="ph codeph">COMPUTE STATS</code> statement is more efficient
                    (less time for the codegen phase) for tables with a large number
                    of columns, especially for tables containing <code class="ph codeph">TIMESTAMP</code>
                    columns.
                  </p>

                </li>

                <li class="li">
                  <p class="p">
                    The logic for determining whether or not to use a runtime filter is more reliable, and the
                    evaluation process itself is faster because of native code generation.
                  </p>

                </li>

              </ul>

            </li>

            <li class="li">
              <p class="p">
                The <code class="ph codeph">MT_DOP</code> query option enables
                multithreading for a number of Impala operations.
                <code class="ph codeph">COMPUTE STATS</code> statements for Parquet tables
                use a default of <code class="ph codeph">MT_DOP=4</code> to improve the
                intra-node parallelism and CPU efficiency of this data-intensive
                operation.
              </p>

            </li>

            <li class="li">
              <p class="p">
                The <code class="ph codeph">COMPUTE STATS</code> statement is more efficient
                (less time for the codegen phase) for tables with a large number
                of columns.
              </p>

            </li>

            <li class="li">
              <p class="p">
                A new hint, <code class="ph codeph">CLUSTERED</code>,
                allows Impala <code class="ph codeph">INSERT</code> operations on a Parquet table
                that use dynamic partitioning to process a high number of
                partitions in a single statement. The data is ordered based on the
                partition key columns, and each partition is only written
                by a single host, reducing the amount of memory needed to buffer
                Parquet data while the data blocks are being constructed.
              </p>

            </li>

            <li class="li">
              <p class="p">
                The new configuration setting <code class="ph codeph">inc_stats_size_limit_bytes</code>
                lets you reduce the load on the catalog server when running the
                <code class="ph codeph">COMPUTE INCREMENTAL STATS</code> statement for very large tables.
              </p>

            </li>

            <li class="li">
              <p class="p">
                Impala folds many constant expressions within query statements,
                rather than evaluating them for each row. This optimization
                is especially useful when using functions to manipulate and
                format <code class="ph codeph">TIMESTAMP</code> values, such as the result
                of an expression such as <code class="ph codeph">to_date(now() - interval 1 day)</code>.
              </p>

            </li>

            <li class="li">
              <p class="p">
                Parsing of complicated expressions is faster. This speedup is
                especially useful for queries containing large <code class="ph codeph">CASE</code>
                expressions.
              </p>

            </li>

            <li class="li">
              <p class="p">
                Evaluation is faster for <code class="ph codeph">IN</code> operators with many constant
                arguments. The same performance improvement applies to other functions
                with many constant arguments.
              </p>

            </li>

            <li class="li">
              <p class="p">
                Impala optimizes identical comparison operators within multiple <code class="ph codeph">OR</code>
                blocks.
              </p>

            </li>

            <li class="li">
              <p class="p">
                The reporting for wall-clock times and total CPU time in profile output is more accurate.
              </p>

            </li>

            <li class="li">
              <p class="p">
                A new query option, <code class="ph codeph">SCRATCH_LIMIT</code>, lets you restrict the amount of
                space used when a query exceeds the memory limit and activates the <span class="q">"spill to disk"</span> mechanism.
                This option helps to avoid runaway queries or make queries <span class="q">"fail fast"</span> if they require more
                memory than anticipated. You can prevent runaway queries from using excessive amounts of spill space,
                without restarting the cluster to turn the spilling feature off entirely.
                See <a class="xref" href="impala_scratch_limit.html#scratch_limit">SCRATCH_LIMIT Query Option</a> for details.
              </p>

            </li>

          </ul>

        </li>

        <li class="li">
          <p class="p">
            Integration with Apache Kudu:
          </p>

          <ul class="ul">
            <li class="li">
              <p class="p">
                The experimental Impala support for the Kudu storage layer has been folded
                into the main Impala development branch. Impala can now directly access Kudu tables,
                opening up new capabilities such as enhanced DML operations and continuous ingestion.
              </p>

            </li>

            <li class="li">
              <p class="p">
                The <code class="ph codeph">DELETE</code> statement is a flexible way to remove data from a Kudu table. Previously,
                removing data from an Impala table involved removing or rewriting the underlying data files, dropping entire partitions,
                or rewriting the entire table. This Impala statement only works for Kudu tables.
              </p>

            </li>

            <li class="li">
              <p class="p">
                The <code class="ph codeph">UPDATE</code> statement is a flexible way to modify data within a Kudu table. Previously,
                updating data in an Impala table involved replacing the underlying data files, dropping entire partitions,
                or rewriting the entire table. This Impala statement only works for Kudu tables.
              </p>

            </li>

            <li class="li">
              <p class="p">
                The <code class="ph codeph">UPSERT</code> statement is a flexible way to ingest, modify, or both data within a Kudu table. Previously,
                ingesting data that might contain duplicates involved an inefficient multi-stage operation, and there was no
                built-in protection against duplicate data. The <code class="ph codeph">UPSERT</code> statement, in combination with
                the primary key designation for Kudu tables, lets you add or replace rows in a single operation, and
                automatically avoids creating any duplicate data.
              </p>

            </li>

            <li class="li">
              <p class="p">
                The <code class="ph codeph">CREATE TABLE</code> statement gains some new clauses that are specific to Kudu tables:
                <code class="ph codeph">PARTITION BY</code>, <code class="ph codeph">PARTITIONS</code>, <code class="ph codeph">STORED AS KUDU</code>, and column
                attributes <code class="ph codeph">PRIMARY KEY</code>, <code class="ph codeph">NULL</code> and <code class="ph codeph">NOT NULL</code>,
                <code class="ph codeph">ENCODING</code>, <code class="ph codeph">COMPRESSION</code>, <code class="ph codeph">DEFAULT</code>, and <code class="ph codeph">BLOCK_SIZE</code>.
                These clauses replace the explicit <code class="ph codeph">TBLPROPERTIES</code> settings that were required in the
                early experimental phases of integration between Impala and Kudu.
              </p>

            </li>

            <li class="li">
              <p class="p">
                The <code class="ph codeph">ALTER TABLE</code> statement can change certain attributes of Kudu tables.
                You can add, drop, or rename columns.
                You can add or drop range partitions.
                You can change the <code class="ph codeph">TBLPROPERTIES</code> value to rename or point to a different underlying Kudu table,
                independently from the Impala table name in the metastore database.
                You cannot change the data type of an existing column in a Kudu table.
              </p>

            </li>

            <li class="li">
              <p class="p">
                The <code class="ph codeph">SHOW PARTITIONS</code> statement displays information about the distribution of data
                between partitions in Kudu tables. A new variation, <code class="ph codeph">SHOW RANGE PARTITIONS</code>,
                displays information about the Kudu-specific partitions that apply across ranges of key values.
              </p>

            </li>

            <li class="li">
              <p class="p">
                Not all Impala data types are supported in Kudu tables. In particular, currently the Impala
                <code class="ph codeph">TIMESTAMP</code> type is not allowed in a Kudu table. Impala does not recognize the
                <code class="ph codeph">UNIXTIME_MICROS</code> Kudu type when it is present in a Kudu table. (These two
                representations of date/time data use different units and are not directly compatible.)
                You cannot create columns of type <code class="ph codeph">TIMESTAMP</code>, <code class="ph codeph">DECIMAL</code>,
                <code class="ph codeph">VARCHAR</code>, or <code class="ph codeph">CHAR</code> within a Kudu table. Within a query, you can
                cast values in a result set to these types. Certain types, such as <code class="ph codeph">BOOLEAN</code>,
                cannot be used as primary key columns.
              </p>

            </li>

            <li class="li">
              <p class="p">
                Currently, Kudu tables are not interchangeable between Impala and Hive the way other kinds of Impala tables are.
                Although the metadata for Kudu tables is stored in the metastore database, currently Hive cannot access Kudu tables.
              </p>

            </li>

            <li class="li">
              <p class="p">
                The <code class="ph codeph">INSERT</code> statement works for Kudu tables. The organization
                of the Kudu data makes it more efficient than with HDFS-backed tables to insert
                data in small batches, such as with the <code class="ph codeph">INSERT ... VALUES</code> syntax.
              </p>

            </li>

            <li class="li">
              <p class="p">
                Some audit data is recorded for data governance purposes.
                All <code class="ph codeph">UPDATE</code>, <code class="ph codeph">DELETE</code>, and <code class="ph codeph">UPSERT</code> statements are characterized
                as <code class="ph codeph">INSERT</code> operations in the audit log. Currently, lineage metadata is not generated for
                <code class="ph codeph">UPDATE</code> and <code class="ph codeph">DELETE</code> operations on Kudu tables.
              </p>

            </li>

            <li class="li">
              <div class="p">
                Currently, Kudu tables have limited support for Sentry:
                <ul class="ul">
                  <li class="li">
                    <p class="p">
                      Access to Kudu tables must be granted to roles as usual.
                    </p>

                  </li>

                  <li class="li">
                    <p class="p">
                      Currently, access to a Kudu table through Sentry is <span class="q">"all or nothing"</span>.
                      You cannot enforce finer-grained permissions such as at the column level,
                      or permissions on certain operations such as <code class="ph codeph">INSERT</code>.
                    </p>

                  </li>

                  <li class="li">
                    <p class="p">
                      Only users with <code class="ph codeph">ALL</code> privileges on <code class="ph codeph">SERVER</code> can create external Kudu tables.
                    </p>

                  </li>

                </ul>

                Because non-SQL APIs can access Kudu data without going through Sentry
                authorization, currently the Sentry support is considered preliminary.
              </div>

            </li>

            <li class="li">
              <p class="p">
                Equality and <code class="ph codeph">IN</code> predicates in Impala queries are pushed to
                Kudu and evaluated efficiently by the Kudu storage layer.
              </p>

            </li>

          </ul>

        </li>

        <li class="li">
          <p class="p">
            <strong class="ph b">Security:</strong>
          </p>

          <ul class="ul">
            <li class="li">
              <p class="p">
                Impala can take advantage of the S3 encrypted credential
                store, to avoid exposing the secret key when accessing
                data stored on S3.
              </p>

            </li>

          </ul>

        </li>

        <li class="li">
          <p class="p">
            [<a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-1654" target="_blank">IMPALA-1654</a>]
            Several kinds of DDL operations
            can now work on a range of partitions. The partitions can be specified
            using operators such as <code class="ph codeph">&lt;</code>, <code class="ph codeph">&gt;=</code>, and
            <code class="ph codeph">!=</code> rather than just an equality predicate applying to a single
            partition.
            This new feature extends the syntax of several clauses
            of the <code class="ph codeph">ALTER TABLE</code> statement
            (<code class="ph codeph">DROP PARTITION</code>, <code class="ph codeph">SET [UN]CACHED</code>,
            <code class="ph codeph">SET FILEFORMAT | SERDEPROPERTIES | TBLPROPERTIES</code>),
            the <code class="ph codeph">SHOW FILES</code> statement, and the
            <code class="ph codeph">COMPUTE INCREMENTAL STATS</code> statement.
            It does not apply to statements that are defined to only apply to a single
            partition, such as <code class="ph codeph">LOAD DATA</code>, <code class="ph codeph">ALTER TABLE ... ADD PARTITION</code>,
            <code class="ph codeph">SET LOCATION</code>, and <code class="ph codeph">INSERT</code> with a static
            partitioning clause.
          </p>

        </li>

        <li class="li">
          <p class="p">
            The <code class="ph codeph">instr()</code> function has optional second and third arguments, representing
            the character to position to begin searching for the substring, and the Nth occurrence
            of the substring to find.
          </p>

        </li>

        <li class="li">
          <p class="p">
            Improved error handling for malformed Avro data. In particular, incorrect
            precision or scale for <code class="ph codeph">DECIMAL</code> types is now handled.
          </p>

        </li>

        <li class="li">
          <p class="p">
            Impala debug web UI:
          </p>

          <ul class="ul">
            <li class="li">
              <p class="p">
                In addition to <span class="q">"inflight"</span> and <span class="q">"finished"</span> queries, the web UI
                now also includes a section for <span class="q">"queued"</span> queries.
              </p>

            </li>

            <li class="li">
              <p class="p">
                The <span class="ph uicontrol">/sessions</span> tab now clarifies how many of the displayed
                sections are active, and lets you sort by <span class="ph uicontrol">Expired</span> status
                to distinguish active sessions from expired ones.
              </p>

            </li>

          </ul>

        </li>

        <li class="li">
          <p class="p">
            Improved stability when DDL operations such as <code class="ph codeph">CREATE DATABASE</code>
            or <code class="ph codeph">DROP DATABASE</code> are run in Hive at the same time as an Impala
            <code class="ph codeph">INVALIDATE METADATA</code> statement.
          </p>

        </li>

        <li class="li">
          <p class="p">
            The <span class="q">"out of memory"</span> error report was made more user-friendly, with additional
            diagnostic information to help identify the spot where the memory limit was exceeded.
          </p>

        </li>

        <li class="li">
          <p class="p">
            Improved disk space usage for Java-based UDFs. Temporary copies of the associated JAR
            files are removed when no longer needed, so that they do not accumulate across restarts
            of the <span class="keyword cmdname">catalogd</span> daemon and potentially cause an out-of-space condition.
            These temporary files are also created in the directory specified by the <code class="ph codeph">local_library_dir</code>
            configuration setting, so that the storage for these temporary files can be independent
            from any capacity limits on the <span class="ph filepath">/tmp</span> filesystem.
          </p>

        </li>

      </ul>


    </div>

  </div>




  <div class="topic concept nested1" aria-labelledby="ariaid-title9" id="new_features_270">

    <h2 class="title topictitle2" id="ariaid-title9">New Features in <span class="keyword">Impala 2.7</span></h2>


    <div class="body conbody">

      <ul class="ul" id="new_features_270__feature_list">
        <li class="li">
          <p class="p">
            Performance improvements:
          </p>

          <ul class="ul">
            <li class="li">
              <p class="p">
                [<a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-3206" target="_blank">IMPALA-3206</a>]
                Speedup for queries against <code class="ph codeph">DECIMAL</code> columns in Avro tables.
                The code that parses <code class="ph codeph">DECIMAL</code> values from Avro now uses
                native code generation.
              </p>

            </li>

            <li class="li">
              <p class="p">
                [<a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-3674" target="_blank">IMPALA-3674</a>]
                Improved efficiency in LLVM code generation can reduce codegen time, especially
                for short queries.
              </p>

            </li>

            
            <li class="li">
              <p class="p">
                [<a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-2979" target="_blank">IMPALA-2979</a>]
                Improvements to scheduling on worker nodes,
                enabled by the <code class="ph codeph">REPLICA_PREFERENCE</code> query option.
                See <a class="xref" href="impala_replica_preference.html#replica_preference">REPLICA_PREFERENCE Query Option (Impala 2.7 or higher only)</a> for details.
              </p>

            </li>

          </ul>

        </li>

        
        <li class="li">
          <p class="p">
            [<a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-1683" target="_blank">IMPALA-1683</a>]
            The <code class="ph codeph">REFRESH</code> statement can be applied to a single partition,
            rather than the entire table. See <a class="xref" href="impala_refresh.html#refresh">REFRESH Statement</a>
            and <a class="xref" href="impala_partitioning.html#partition_refresh">Refreshing a Single Partition</a> for details.
          </p>

        </li>

        <li class="li">
          <p class="p">
            Improvements to the Impala web user interface:
          </p>

          <ul class="ul">
            <li class="li">
              <p class="p">
                [<a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-2767" target="_blank">IMPALA-2767</a>]
                You can now force a session to expire by clicking a link in the web UI,
                on the <span class="ph uicontrol">/sessions</span> tab.
              </p>

            </li>

            <li class="li">
              <p class="p">
                [<a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-3715" target="_blank">IMPALA-3715</a>]
                The <span class="ph uicontrol">/memz</span> tab includes more information about
                Impala memory usage.
              </p>

            </li>

            <li class="li">
              <p class="p">
                [<a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-3716" target="_blank">IMPALA-3716</a>]
                The <span class="ph uicontrol">Details</span> page for a query now includes
                a <span class="ph uicontrol">Memory</span> tab.
              </p>

            </li>

          </ul>

        </li>

        <li class="li">
          <p class="p">
            [<a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-3499" target="_blank">IMPALA-3499</a>]
            Scalability improvements to the catalog server. Impala handles internal communication
            more efficiently for tables with large numbers of columns and partitions, where the
            size of the metadata exceeds 2 GiB.
          </p>

        </li>

        <li class="li">
          <p class="p">
            [<a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-3677" target="_blank">IMPALA-3677</a>]
            You can send a <code class="ph codeph">SIGUSR1</code> signal to any Impala-related daemon to write a
            Breakpad minidump. For advanced troubleshooting, you can now produce a minidump
            without triggering a crash. See <a class="xref" href="impala_breakpad.html#breakpad">Breakpad Minidumps for Impala (Impala 2.6 or higher only)</a> for
            details about the Breakpad minidump feature.
          </p>

        </li>

        <li class="li">
          <p class="p">
            [<a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-3687" target="_blank">IMPALA-3687</a>]
            The schema reconciliation rules for Avro tables have changed slightly
            for <code class="ph codeph">CHAR</code> and <code class="ph codeph">VARCHAR</code> columns. Now, if
            the definition of such a column is changed in the Avro schema file,
            the column retains its <code class="ph codeph">CHAR</code> or <code class="ph codeph">VARCHAR</code>
            type as specified in the SQL definition, but the column name and comment
            from the Avro schema file take precedence.
            See <a class="xref" href="impala_avro.html#avro_create_table">Creating Avro Tables</a> for details about
            column definitions in Avro tables.
          </p>

        </li>

        <li class="li">
          <p class="p">
            [<a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-3575" target="_blank">IMPALA-3575</a>]
            Some network
            operations now have additional timeout and retry settings. The extra
            configuration helps avoid failed queries for transient network
            problems, to avoid hangs when a sender or receiver fails in the
            middle of a network transmission, and to make cancellation requests
            more reliable despite network issues. </p>

        </li>

      </ul>


    </div>

  </div>



  <div class="topic concept nested1" aria-labelledby="ariaid-title10" id="new_features_260">

    <h2 class="title topictitle2" id="ariaid-title10">New Features in <span class="keyword">Impala 2.6</span></h2>


    <div class="body conbody">

      <ul class="ul">
        <li class="li">
          <p class="p">
            Improvements to Impala support for the Amazon S3 filesystem:
          </p>

          <ul class="ul">
            <li class="li">
              <p class="p">
                Impala can now write to S3 tables through the <code class="ph codeph">INSERT</code>
                or <code class="ph codeph">LOAD DATA</code> statements.
                See <a class="xref" href="impala_s3.html#s3">Using Impala with the Amazon S3 Filesystem</a> for general information about
                using Impala with S3.
              </p>

            </li>

            <li class="li">
              <p class="p">
                A new query option, <code class="ph codeph">S3_SKIP_INSERT_STAGING</code>, lets you
                trade off between fast <code class="ph codeph">INSERT</code> performance and
                slower <code class="ph codeph">INSERT</code>s that are more consistent if a
                problem occurs during the statement. The new behavior is enabled by default.
                See <a class="xref" href="impala_s3_skip_insert_staging.html#s3_skip_insert_staging">S3_SKIP_INSERT_STAGING Query Option (Impala 2.6 or higher only)</a> for details
                about this option.
              </p>

            </li>

          </ul>

        </li>

        <li class="li">
          <p class="p">
            Performance improvements for the runtime filtering feature:
          </p>

          <ul class="ul">
            <li class="li">
              <p class="p">
                The default for the <code class="ph codeph">RUNTIME_FILTER_MODE</code>
                query option is changed to <code class="ph codeph">GLOBAL</code> (the highest setting).
                See <a class="xref" href="impala_runtime_filter_mode.html#runtime_filter_mode">RUNTIME_FILTER_MODE Query Option (Impala 2.5 or higher only)</a> for
                details about this option.
              </p>

            </li>

            <li class="li">
              <p class="p">
                The <code class="ph codeph">RUNTIME_BLOOM_FILTER_SIZE</code> setting is now only used
                as a fallback if statistics are not available; otherwise, Impala
                uses the statistics to estimate the appropriate size to use for each filter.
                See <a class="xref" href="impala_runtime_bloom_filter_size.html#runtime_bloom_filter_size">RUNTIME_BLOOM_FILTER_SIZE Query Option (Impala 2.5 or higher only)</a> for
                details about this option.
              </p>

            </li>

            <li class="li">
              <p class="p">
                New query options <code class="ph codeph">RUNTIME_FILTER_MIN_SIZE</code> and
                <code class="ph codeph">RUNTIME_FILTER_MAX_SIZE</code> let you fine-tune
                the sizes of the Bloom filter structures used for runtime filtering.
                If the filter size derived from Impala internal estimates or from
                the <code class="ph codeph">RUNTIME_FILTER_BLOOM_SIZE</code> falls outside the size
                range specified by these options, any too-small filter size is adjusted
                to the minimum, and any too-large filter size is adjusted to the maximum.
                See <a class="xref" href="impala_runtime_filter_min_size.html#runtime_filter_min_size">RUNTIME_FILTER_MIN_SIZE Query Option (Impala 2.6 or higher only)</a>
                and <a class="xref" href="impala_runtime_filter_max_size.html#runtime_filter_max_size">RUNTIME_FILTER_MAX_SIZE Query Option (Impala 2.6 or higher only)</a>
                for details about these options.
              </p>

            </li>

            <li class="li">
              <p class="p">
                Runtime filter propagation now applies to all the
                operands of <code class="ph codeph">UNION</code> and <code class="ph codeph">UNION ALL</code>
                operators.
              </p>

            </li>

            <li class="li">
              <p class="p">
                Runtime filters can now be produced during join queries even
                when the join processing activates the spill-to-disk mechanism.
              </p>

            </li>

          </ul>

            See <a class="xref" href="impala_runtime_filtering.html#runtime_filtering">Runtime Filtering for Impala Queries (Impala 2.5 or higher only)</a> for
            general information about the runtime filtering feature.
        </li>

        
        <li class="li">
          <p class="p">
            Admission control and dynamic resource pools are enabled by default.
            See <a class="xref" href="impala_admission.html#admission_control">Admission Control and Query Queuing</a> for details
            about admission control.
          </p>

        </li>

        
        <li class="li">
          <p class="p">
            Impala can now manually set column statistics,
            using the <code class="ph codeph">ALTER TABLE</code> statement with a
            <code class="ph codeph">SET COLUMN STATS</code> clause.
            See <a class="xref" href="impala_perf_stats.html#perf_column_stats_manual">impala_perf_stats.html#perf_column_stats_manual</a> for details.
          </p>

        </li>

        <li class="li">
          <p class="p">
            Impala can now write lightweight <span class="q">"minidump"</span> files, rather
            than large core files, to save diagnostic information when
            any of the Impala-related daemons crash. This feature uses the
            open source <code class="ph codeph">breakpad</code> framework.
            See <a class="xref" href="impala_breakpad.html#breakpad">Breakpad Minidumps for Impala (Impala 2.6 or higher only)</a> for details.
          </p>

        </li>

        <li class="li">
          <div class="p">
            New query options improve interoperability with Parquet files:
            <ul class="ul">
              <li class="li">
                <p class="p">
                  The <code class="ph codeph">PARQUET_FALLBACK_SCHEMA_RESOLUTION</code> query option
                  lets Impala locate columns within Parquet files based on
                  column name rather than ordinal position.
                  This enhancement improves interoperability with applications
                  that write Parquet files with a different order or subset of
                  columns than are used in the Impala table.
                  See <a class="xref" href="impala_parquet_fallback_schema_resolution.html#parquet_fallback_schema_resolution">PARQUET_FALLBACK_SCHEMA_RESOLUTION Query Option (Impala 2.6 or higher only)</a>
                  for details.
                </p>

              </li>

              <li class="li">
                <p class="p">
                  The <code class="ph codeph">PARQUET_ANNOTATE_STRINGS_UTF8</code> query option
                  makes Impala include the <code class="ph codeph">UTF-8</code> annotation
                  metadata for <code class="ph codeph">STRING</code>, <code class="ph codeph">CHAR</code>,
                  and <code class="ph codeph">VARCHAR</code> columns in Parquet files created
                  by <code class="ph codeph">INSERT</code> or <code class="ph codeph">CREATE TABLE AS SELECT</code>
                  statements.
                  See <a class="xref" href="impala_parquet_annotate_strings_utf8.html#parquet_annotate_strings_utf8">PARQUET_ANNOTATE_STRINGS_UTF8 Query Option (Impala 2.6 or higher only)</a>
                  for details.
                </p>

              </li>

            </ul>

            See <a class="xref" href="impala_parquet.html#parquet">Using the Parquet File Format with Impala Tables</a> for general information about working
            with Parquet files.
          </div>

        </li>

        <li class="li">
          <p class="p">
            Improvements to security and reduction in overhead for secure clusters:
          </p>

          <ul class="ul">
            <li class="li">
              <p class="p">
                Overall performance improvements for secure clusters.
                (TPC-H queries on a secure cluster were benchmarked
                at roughly 3x as fast as the previous release.)
              </p>

            </li>

            <li class="li">
              <p class="p">
                Impala now recognizes the <code class="ph codeph">auth_to_local</code> setting,
                specified through the HDFS configuration setting
                <code class="ph codeph">hadoop.security.auth_to_local</code>.
                This feature is disabled by default; to enable it,
                specify <code class="ph codeph">--load_auth_to_local_rules=true</code>
                in the <span class="keyword cmdname">impalad</span> configuration settings.
                See <a class="xref" href="impala_kerberos.html#auth_to_local">Mapping Kerberos Principals to Short Names for Impala</a> for details.
              </p>

            </li>

            <li class="li">
              <p class="p">
                Timing improvements in the mechanism for the <span class="keyword cmdname">impalad</span>
                daemon to acquire Kerberos tickets. This feature spreads out the overhead
                on the KDC during Impala startup, especially for large clusters.
              </p>

            </li>

            <li class="li">
              <p class="p">
                For Kerberized clusters, the Catalog service now uses
                the Kerberos principal instead of the operating sytem user that runs
                the <span class="keyword cmdname">catalogd</span> daemon.
                This eliminates the requirement to configure a <code class="ph codeph">hadoop.user.group.static.mapping.overrides</code>
                setting to put the OS user into the Sentry administrative group, on clusters where the principal
                and the OS user name for this user are different.
              </p>

            </li>

          </ul>

        </li>

        <li class="li">
          <p class="p">
            Overall performance improvements for join queries, by using a prefetching mechanism
            while building the in-memory hash table to evaluate join predicates.
            See <a class="xref" href="impala_prefetch_mode.html#prefetch_mode">PREFETCH_MODE Query Option (Impala 2.6 or higher only)</a> for the query option
            to control this optimization.
          </p>

        </li>

        <li class="li">
          <p class="p">
            The <span class="keyword cmdname">impala-shell</span> interpreter has a new command,
            <code class="ph codeph">SOURCE</code>, that lets you run a set of SQL statements
            or other <span class="keyword cmdname">impala-shell</span> commands stored in a file.
            You can run additional <code class="ph codeph">SOURCE</code> commands from inside
            a file, to set up flexible sequences of statements for use cases
            such as schema setup, ETL, or reporting.
            See <a class="xref" href="impala_shell_commands.html#shell_commands">impala-shell Command Reference</a> for details
            and <a class="xref" href="impala_shell_running_commands.html#shell_running_commands">Running Commands and SQL Statements in impala-shell</a>
            for examples.
          </p>

        </li>

        <li class="li">
          <p class="p">
            The <code class="ph codeph">millisecond()</code> built-in function lets you extract
            the fractional seconds part of a <code class="ph codeph">TIMESTAMP</code> value.
            See <a class="xref" href="impala_datetime_functions.html#datetime_functions">Impala Date and Time Functions</a> for details.
          </p>

        </li>

        <li class="li">
          <p class="p">
            If an Avro table is created without column definitions in the
            <code class="ph codeph">CREATE TABLE</code> statement, and columns are later
            added through <code class="ph codeph">ALTER TABLE</code>, the resulting
            table is now queryable. Missing values from the newly added
            columns now default to <code class="ph codeph">NULL</code>.
            See <a class="xref" href="impala_avro.html#avro">Using the Avro File Format with Impala Tables</a> for general details about
            working with Avro files.
          </p>

        </li>

        <li class="li">
          <div class="p">
            The mechanism for interpreting <code class="ph codeph">DECIMAL</code> literals is
            improved, no longer going through an intermediate conversion step
            to <code class="ph codeph">DOUBLE</code>:
            <ul class="ul">
              <li class="li">
                <p class="p">
                  Casting a <code class="ph codeph">DECIMAL</code> value to <code class="ph codeph">TIMESTAMP</code>
                  <code class="ph codeph">DOUBLE</code> produces a more precise
                  value for the <code class="ph codeph">TIMESTAMP</code> than formerly.
                </p>

              </li>

              <li class="li">
                <p class="p">
                  Certain function calls involving <code class="ph codeph">DECIMAL</code> literals
                  now succeed, when formerly they failed due to lack of a function
                  signature with a <code class="ph codeph">DOUBLE</code> argument.
                </p>

              </li>

              <li class="li">
                <p class="p">
                  Faster runtime performance for <code class="ph codeph">DECIMAL</code> constant
                  values, through improved native code generation for all combinations
                  of precision and scale.
                </p>

              </li>

            </ul>

            See <a class="xref" href="impala_decimal.html#decimal">DECIMAL Data Type (Impala 3.0 or higher only)</a> for details about the <code class="ph codeph">DECIMAL</code> type.
          </div>

        </li>

        <li class="li">
          <p class="p">
            Improved type accuracy for <code class="ph codeph">CASE</code> return values.
            If all <code class="ph codeph">WHEN</code> clauses of the <code class="ph codeph">CASE</code>
            expression are of <code class="ph codeph">CHAR</code> type, the final result
            is also <code class="ph codeph">CHAR</code> instead of being converted to
            <code class="ph codeph">STRING</code>.
            See <a class="xref" href="impala_conditional_functions.html#conditional_functions">Impala Conditional Functions</a>
            for details about the <code class="ph codeph">CASE</code> function.
          </p>

        </li>

        <li class="li">
          <p class="p">
            Uncorrelated queries using the <code class="ph codeph">NOT EXISTS</code> operator
            are now supported. Formerly, the <code class="ph codeph">NOT EXISTS</code>
            operator was only available for correlated subqueries.
          </p>

        </li>

        <li class="li">
          <p class="p">
            Improved performance for reading Parquet files.
          </p>

        </li>

        <li class="li">
          <p class="p">
            Improved performance for <dfn class="term">top-N</dfn> queries, that is,
            those including both <code class="ph codeph">ORDER BY</code> and
            <code class="ph codeph">LIMIT</code> clauses.
          </p>

        </li>

        
        <li class="li">
          <p class="p">
            Impala optionally skips an arbitrary number of header lines from text input
            files on HDFS based on the <code class="ph codeph">skip.header.line.count</code> value
            in the <code class="ph codeph">TBLPROPERTIES</code> field of the table metadata.
            See <a class="xref" href="impala_txtfile.html#text_data_files">Data Files for Text Tables</a> for details.
          </p>

        </li>

        <li class="li">
          <p class="p">
            Trailing comments are now allowed in queries processed by
            the <span class="keyword cmdname">impala-shell</span> options <code class="ph codeph">-q</code>
            and <code class="ph codeph">-f</code>.
          </p>

        </li>

        <li class="li">
          <p class="p">
            Impala can run <code class="ph codeph">COUNT</code> queries for RCFile tables
            that include complex type columns.
            See <a class="xref" href="impala_complex_types.html#complex_types">Complex Types (Impala 2.3 or higher only)</a> for
            general information about working with complex types,
            and <a class="xref" href="impala_array.html#array">ARRAY Complex Type (Impala 2.3 or higher only)</a>,
            <a class="xref" href="impala_map.html#map">MAP Complex Type (Impala 2.3 or higher only)</a>, and <a class="xref" href="impala_struct.html#struct">STRUCT Complex Type (Impala 2.3 or higher only)</a>
            for syntax details of each type.
          </p>

        </li>

      </ul>


    </div>

  </div>




  <div class="topic concept nested1" aria-labelledby="ariaid-title11" id="new_features_250">

    <h2 class="title topictitle2" id="ariaid-title11">New Features in <span class="keyword">Impala 2.5</span></h2>


    <div class="body conbody">

      <ul class="ul">
        <li class="li">
          <p class="p">
            Dynamic partition pruning. When a query refers to a partition key column in a <code class="ph codeph">WHERE</code>
            clause, and the exact set of column values are not known until the query is executed,
            Impala evaluates the predicate and skips the I/O for entire partitions that are not needed.
            For example, if a table was partitioned by year, Impala would apply this technique to a query
            such as <code class="ph codeph">SELECT c1 FROM partitioned_table WHERE year = (SELECT MAX(year) FROM other_table)</code>.
            <span class="ph">See <a class="xref" href="impala_partitioning.html#dynamic_partition_pruning">Dynamic Partition Pruning</a> for details.</span>
          </p>

          <p class="p">
            The dynamic partition pruning optimization technique lets Impala avoid reading
            data files from partitions that are not part of the result set, even when
            that determination cannot be made in advance. This technique is especially valuable
            when performing join queries involving partitioned tables. For example, if a join
            query includes an <code class="ph codeph">ON</code> clause and a <code class="ph codeph">WHERE</code> clause
            that refer to the same columns, the query can find the set of column values that
            match the <code class="ph codeph">WHERE</code> clause, and only scan the associated partitions
            when evaluating the <code class="ph codeph">ON</code> clause.
          </p>

          <p class="p">
            Dynamic partition pruning is controlled by the same settings as the runtime filtering feature.
            By default, this feature is enabled at a medium level, because the maximum setting can use
            slightly more memory for queries than in previous releases.
            To fully enable this feature, set the query option <code class="ph codeph">RUNTIME_FILTER_MODE=GLOBAL</code>.
          </p>

        </li>

        <li class="li">
          <p class="p">
            Runtime filtering. This is a wide-ranging set of optimizations that are especially valuable for join queries.
            Using the same technique as with dynamic partition pruning,
            Impala uses the predicates from <code class="ph codeph">WHERE</code> and <code class="ph codeph">ON</code> clauses
            to determine the subset of column values from one of the joined tables could possibly be part of the
            result set. Impala sends a compact representation of the filter condition to the hosts in the cluster,
            instead of the full set of values or the entire table.
            <span class="ph">See <a class="xref" href="impala_runtime_filtering.html#runtime_filtering">Runtime Filtering for Impala Queries (Impala 2.5 or higher only)</a> for details.</span>
          </p>

          <p class="p">
            By default, this feature is enabled at a medium level, because the maximum setting can use
            slightly more memory for queries than in previous releases.
            To fully enable this feature, set the query option <code class="ph codeph">RUNTIME_FILTER_MODE=GLOBAL</code>.
            <span class="ph">See <a class="xref" href="impala_runtime_filter_mode.html#runtime_filter_mode">RUNTIME_FILTER_MODE Query Option (Impala 2.5 or higher only)</a> for details.</span>
          </p>

          <p class="p">
            This feature involves some new query options:
            <a class="xref" href="impala_runtime_filter_mode.html">RUNTIME_FILTER_MODE</a>,
            <a class="xref" href="impala_max_num_runtime_filters.html">MAX_NUM_RUNTIME_FILTERS</a>,
            <a class="xref" href="impala_runtime_bloom_filter_size.html">RUNTIME_BLOOM_FILTER_SIZE</a>,
            <a class="xref" href="impala_runtime_filter_wait_time_ms.html">RUNTIME_FILTER_WAIT_TIME_MS</a>,
            and <a class="xref" href="impala_disable_row_runtime_filtering.html">DISABLE_ROW_RUNTIME_FILTERING</a>.
            <span class="ph">See
            <a class="xref" href="impala_runtime_filter_mode.html#runtime_filter_mode">RUNTIME_FILTER_MODE</a>,
            <a class="xref" href="impala_max_num_runtime_filters.html#max_num_runtime_filters">MAX_NUM_RUNTIME_FILTERS</a>,
            <a class="xref" href="impala_runtime_bloom_filter_size.html#runtime_bloom_filter_size">RUNTIME_BLOOM_FILTER_SIZE</a>,
            <a class="xref" href="impala_runtime_filter_wait_time_ms.html#runtime_filter_wait_time_ms">RUNTIME_FILTER_WAIT_TIME_MS</a>, and
            <a class="xref" href="impala_disable_row_runtime_filtering.html#disable_row_runtime_filtering">DISABLE_ROW_RUNTIME_FILTERING</a>
            for details.
            </span>
          </p>

        </li>

        <li class="li">
          <p class="p">
            More efficient use of the HDFS caching feature, to avoid
            hotspots and bottlenecks that could occur if heavily used
            cached data blocks were always processed by the same host.
            By default, Impala now randomizes which host processes each cached
            HDFS data block, when cached replicas are available on multiple hosts.
            (Remember to use the <code class="ph codeph">WITH REPLICATION</code> clause with the
            <code class="ph codeph">CREATE TABLE</code> or <code class="ph codeph">ALTER TABLE</code> statement
            when enabling HDFS caching for a table or partition, to cache the same
            data blocks across multiple hosts.)
            The new query option <code class="ph codeph">SCHEDULE_RANDOM_REPLICA</code>
            
            lets you fine-tune the interaction with HDFS caching even more.
            <span class="ph">See <a class="xref" href="impala_perf_hdfs_caching.html#hdfs_caching">Using HDFS Caching with Impala (Impala 2.1 or higher only)</a> for details.</span>
          </p>

        </li>

        <li class="li">
          <p class="p">
            The <code class="ph codeph">TRUNCATE TABLE</code> statement now accepts an <code class="ph codeph">IF EXISTS</code>
            clause, making <code class="ph codeph">TRUNCATE TABLE</code> easier to use in setup or ETL scripts where the table might or
            might not exist.
            <span class="ph">See <a class="xref" href="impala_truncate_table.html#truncate_table">TRUNCATE TABLE Statement (Impala 2.3 or higher only)</a> for details.</span>
          </p>

        </li>

        <li class="li">
          <div class="p">
            Improved performance and reliability for the <code class="ph codeph">DECIMAL</code> data type:
            <ul class="ul">
            <li class="li">
              <p class="p">
                Using <code class="ph codeph">DECIMAL</code> values in a <code class="ph codeph">GROUP BY</code> clause now
                triggers the native code generation optimization, speeding up queries that
                group by values such as prices.
              </p>

            </li>

            <li class="li">
              <p class="p">
                Checking for overflow in <code class="ph codeph">DECIMAL</code>
                multiplication is now substantially faster, making <code class="ph codeph">DECIMAL</code>
                a more practical data type in some use cases where formerly <code class="ph codeph">DECIMAL</code>
                was much slower than <code class="ph codeph">FLOAT</code> or <code class="ph codeph">DOUBLE</code>.
              </p>

            </li>

            <li class="li">
              <p class="p">
                Multiplying a mixture of <code class="ph codeph">DECIMAL</code>
                and <code class="ph codeph">FLOAT</code> or <code class="ph codeph">DOUBLE</code> values now returns the
                <code class="ph codeph">DOUBLE</code> rather than <code class="ph codeph">DECIMAL</code>. This change avoids
                some cases where an intermediate value would underflow or overflow and become
                <code class="ph codeph">NULL</code> unexpectedly.
              </p>

            </li>

            </ul>

            <span class="ph">See <a class="xref" href="impala_decimal.html">DECIMAL Data Type (Impala 3.0 or higher only)</a> for details.</span>
          </div>

        </li>

        <li class="li">
          <p class="p">
            For UDFs written in Java, or Hive UDFs reused for Impala,
            Impala now allows parameters and return values to be primitive types.
            Formerly, these things were required to be one of the <span class="q">"Writable"</span>
            object types.
            <span class="ph">See <a class="xref" href="impala_udf.html#udfs_hive">Using Hive UDFs with Impala</a> for details.</span>
          </p>

        </li>

        <li class="li">
          <p class="p">
            Performance improvements for HDFS I/O. Impala now caches HDFS file handles to avoid the
            overhead of repeatedly opening the same file.
          </p>

        </li>


        
        <li class="li">
          <p class="p">
            Performance improvements for queries involving nested complex types.
            Certain basic query types, such as counting the elements of a complex column,
            now use an optimized code path.
          </p>

        </li>


        <li class="li">
          <p class="p">
            Improvements to the memory reservation mechanism for the Impala
            admission control feature. You can specify more settings, such
            as the timeout period and maximum aggregate memory used, for each
            resource pool instead of globally for the Impala instance. The
            default limit for concurrent queries (the <span class="ph uicontrol">max requests</span>
            setting) is now unlimited instead of 200.
          </p>

        </li>


        <li class="li">
          <p class="p">
            Performance improvements related to code generation.
            Even in queries where code generation is not performed
            for some phases of execution (such as reading data from
            Parquet tables), Impala can still use code generation in
            other parts of the query, such as evaluating
            functions in the <code class="ph codeph">WHERE</code> clause.
          </p>

        </li>

        <li class="li">
          <p class="p">
            Performance improvements for queries using aggregation functions
            on high-cardinality columns.
            Formerly, Impala could do unnecessary extra work to produce intermediate
            results for operations such as <code class="ph codeph">DISTINCT</code> or <code class="ph codeph">GROUP BY</code>
            on columns that were unique or had few duplicate values.
            Now, Impala decides at run time whether it is more efficient to
            do an initial aggregation phase and pass along a smaller set of intermediate data,
            or to pass raw intermediate data back to next phase of query processing to be aggregated there.
            This feature is known as <dfn class="term">streaming pre-aggregation</dfn>.
            In case of performance regression, this feature can be turned off
            using the <code class="ph codeph">DISABLE_STREAMING_PREAGGREGATIONS</code> query option.
            <span class="ph">See <a class="xref" href="impala_disable_streaming_preaggregations.html#disable_streaming_preaggregations">DISABLE_STREAMING_PREAGGREGATIONS Query Option (Impala 2.5 or higher only)</a> for details.</span>
          </p>

        </li>

        <li class="li">
          <p class="p">
            Spill-to-disk feature now always recommended. In earlier releases, the spill-to-disk feature
            could be turned off using a pair of configuration settings,
            <code class="ph codeph">enable_partitioned_aggregation=false</code> and
            <code class="ph codeph">enable_partitioned_hash_join=false</code>.
            The latest improvements in the spill-to-disk mechanism, and related features that
            interact with it, make this feature robust enough that disabling it is now
            no longer needed or supported. In particular, some new features in <span class="keyword">Impala 2.5</span>
            and higher do not work when the spill-to-disk feature is disabled.
          </p>

        </li>

        <li class="li">
          <p class="p">
            Improvements to scripting capability for the <span class="keyword cmdname">impala-shell</span> command,
            through user-specified substitution variables that can appear in statements processed
            by <span class="keyword cmdname">impala-shell</span>:
          </p>

          <ul class="ul">
            <li class="li">
              <p class="p">
                The <code class="ph codeph">--var</code> command-line option lets you pass key-value pairs to
                <span class="keyword cmdname">impala-shell</span>. The shell can substitute the values
                into queries before executing them, where the query text contains the notation
                <code class="ph codeph">${var:<var class="keyword varname">varname</var>}</code>. For example, you might prepare a SQL file
                containing a set of DDL statements and queries containing variables for
                database and table names, and then pass the applicable names as part of the
                <code class="ph codeph">impala-shell -f <var class="keyword varname">filename</var></code> command.
                <span class="ph">See <a class="xref" href="impala_shell_running_commands.html#shell_running_commands">Running Commands and SQL Statements in impala-shell</a> for details.</span>
              </p>

            </li>

            <li class="li">
              <p class="p">
                The <code class="ph codeph">SET</code> and <code class="ph codeph">UNSET</code> commands within the
                <span class="keyword cmdname">impala-shell</span> interpreter now work with user-specified
                substitution variables, as well as the built-in query options.
                The two kinds of variables are divided in the <code class="ph codeph">SET</code> output.
                As with variables defined by the <code class="ph codeph">--var</code> command-line option,
                you refer to the user-specified substitution variables in queries by using
                the notation <code class="ph codeph">${var:<var class="keyword varname">varname</var>}</code>
                in the query text. Because the substitution variables are processed by
                <span class="keyword cmdname">impala-shell</span> instead of the <span class="keyword cmdname">impalad</span>
                backend, you cannot define your own substitution variables through the
                <code class="ph codeph">SET</code> statement in a JDBC or ODBC application.
                <span class="ph">See <a class="xref" href="impala_set.html#set">SET Statement</a> for details.</span>
              </p>

            </li>

          </ul>

        </li>

        <li class="li">
          <p class="p">
            Performance improvements for query startup. Impala better parallelizes certain work
            when coordinating plan distribution between <span class="keyword cmdname">impalad</span> instances, which improves
            startup time for queries involving tables with many partitions on large clusters,
            or complicated queries with many plan fragments.
          </p>

        </li>

        <li class="li">
          <p class="p">
            Performance and scalability improvements for tables with many partitions.
            The memory requirements on the coordinator node are reduced, making it substantially
            faster and less resource-intensive
            to do joins involving several tables with thousands of partitions each.
          </p>

        </li>

        <li class="li">
          <p class="p">
            Whitelisting for access to internal APIs. For applications that need direct access
            to Impala APIs, without going through the HiveServer2 or Beeswax interfaces, you can
            specify a list of Kerberos users who are allowed to call those APIs. By default, the
            <code class="ph codeph">impala</code> and <code class="ph codeph">hdfs</code> users are the only ones authorized
            for this kind of access.
            Any users not explicitly authorized through the <code class="ph codeph">internal_principals_whitelist</code>
            configuration setting are blocked from accessing the APIs. This setting applies to all the
            Impala-related daemons, although currently it is primarily used for HDFS to control the
            behavior of the catalog server.
          </p>

        </li>

        <li class="li">
          <p class="p">
            Improvements to Impala integration and usability for Hue. (The code changes
            are actually on the Hue side.)
          </p>

          <ul class="ul">
          <li class="li">
            <p class="p">
              The list of tables now refreshes dynamically.
            </p>

          </li>

          </ul>

        </li>

        <li class="li">
          <p class="p">
            Usability improvements for case-insensitive queries.
            You can now use the operators <code class="ph codeph">ILIKE</code> and <code class="ph codeph">IREGEXP</code>
            to perform case-insensitive wildcard matches or regular expression matches,
            rather than explicitly converting column values with <code class="ph codeph">UPPER</code>
            or <code class="ph codeph">LOWER</code>.
            <span class="ph">See <a class="xref" href="impala_operators.html#ilike">ILIKE Operator</a> and <a class="xref" href="impala_operators.html#iregexp">IREGEXP Operator</a> for details.</span>
          </p>

        </li>

        <li class="li">
          <p class="p">
            Performance and reliability improvements for DDL and insert operations on partitioned tables with a large
            number of partitions. Impala only re-evaluates metadata for partitions that are affected by
            a DDL operation, not all partitions in the table. While a DDL or insert statement is in progress,
            other Impala statements that attempt to modify metadata for the same table wait until the first one
            finishes.
          </p>

        </li>

        <li class="li">
          <p class="p">
            Reliability improvements for the <code class="ph codeph">LOAD DATA</code> statement.
            Previously, this statement would fail if the source HDFS directory
            contained any subdirectories at all. Now, the statement ignores
            any hidden subdirectories, for example <span class="ph filepath">_impala_insert_staging</span>.
          </p>

        </li>

        <li class="li">
          <p class="p">
            A new operator, <code class="ph codeph">IS [NOT] DISTINCT FROM</code>, lets you compare values
            and always get a <code class="ph codeph">true</code> or <code class="ph codeph">false</code> result,
            even if one or both of the values are <code class="ph codeph">NULL</code>.
            The <code class="ph codeph">IS NOT DISTINCT FROM</code> operator, or its equivalent
            <code class="ph codeph">&lt;=&gt;</code> notation, improves the efficiency of join queries that
            treat key values that are <code class="ph codeph">NULL</code> in both tables as equal.
            <span class="ph">See <a class="xref" href="impala_operators.html#is_distinct_from">IS DISTINCT FROM Operator</a> for details.</span>
          </p>

        </li>

        <li class="li">
          <p class="p">
            Security enhancements for the <span class="keyword cmdname">impala-shell</span> command.
            A new option, <code class="ph codeph">--ldap_password_cmd</code>, lets you specify
            a command to retrieve the LDAP password. The resulting password is
            then used to authenticate the <span class="keyword cmdname">impala-shell</span> command
            with the LDAP server.
            <span class="ph">See <a class="xref" href="impala_shell_options.html">impala-shell Configuration Options</a> for details.</span>
          </p>

        </li>

        <li class="li">
          <p class="p">
            The <code class="ph codeph">CREATE TABLE AS SELECT</code> statement now accepts a
            <code class="ph codeph">PARTITIONED BY</code> clause, which lets you create a
            partitioned table and insert data into it with a single statement.
            <span class="ph">See <a class="xref" href="impala_create_table.html#create_table">CREATE TABLE Statement</a> for details.</span>
          </p>

        </li>

        <li class="li">
          <p class="p">
            User-defined functions (UDFs and UDAFs) written in C++ now persist automatically
            when the <span class="keyword cmdname">catalogd</span> daemon is restarted. You no longer
            have to run the <code class="ph codeph">CREATE FUNCTION</code> statements again after a restart.
          </p>

        </li>

        <li class="li">
          <p class="p">
            User-defined functions (UDFs) written in Java can now persist
            when the <span class="keyword cmdname">catalogd</span> daemon is restarted, and can be shared
            transparently between Impala and Hive. You must do a one-time operation to recreate these
            UDFs using new <code class="ph codeph">CREATE FUNCTION</code> syntax, without a signature for arguments
            or the return value. Afterwards, you no longer have to run the <code class="ph codeph">CREATE FUNCTION</code>
            statements again after a restart.
            Although Impala does not have visibility into the UDFs that implement the
            Hive built-in functions, user-created Hive UDFs are now automatically available
            for calling through Impala.
            <span class="ph">See <a class="xref" href="impala_create_function.html#create_function">CREATE FUNCTION Statement</a> for details.</span>
          </p>

        </li>

        <li class="li">
          
          <p class="p">
            Reliability enhancements for memory management. Some aggregation and join queries
            that formerly might have failed with an out-of-memory error due to memory contention,
            now can succeed using the spill-to-disk mechanism.
          </p>

        </li>

        <li class="li">
          
          <p class="p">
            The <code class="ph codeph">SHOW DATABASES</code> statement now returns two columns rather than one.
            The second column includes the associated comment string, if any, for each database.
            Adjust any application code that examines the list of databases and assumes the
            result set contains only a single column.
            <span class="ph">See <a class="xref" href="impala_show.html#show_databases">SHOW DATABASES</a> for details.</span>
          </p>

        </li>

        <li class="li">
          <p class="p">
            A new optimization speeds up aggregation operations that involve only the partition key
            columns of partitioned tables. For example, a query such as <code class="ph codeph">SELECT COUNT(DISTINCT k), MIN(k), MAX(k) FROM t1</code>
            can avoid reading any data files if <code class="ph codeph">T1</code> is a partitioned table and <code class="ph codeph">K</code>
            is one of the partition key columns. Because this technique can produce different results in cases
            where HDFS files in a partition are manually deleted or are empty, you must enable the optimization
            by setting the query option <code class="ph codeph">OPTIMIZE_PARTITION_KEY_SCANS</code>.
            <span class="ph">See <a class="xref" href="impala_optimize_partition_key_scans.html">OPTIMIZE_PARTITION_KEY_SCANS Query Option (Impala 2.5 or higher only)</a> for details.</span>
          </p>

        </li>

        
        <li class="li">
          <p class="p">
            The <code class="ph codeph">DESCRIBE</code> statement can now display metadata about a database, using the
            syntax <code class="ph codeph">DESCRIBE DATABASE <var class="keyword varname">db_name</var></code>.
            <span class="ph">See <a class="xref" href="impala_describe.html#describe">DESCRIBE Statement</a> for details.</span>
          </p>

        </li>

        <li class="li">
          <p class="p">
            The <code class="ph codeph">uuid()</code> built-in function generates an
            alphanumeric value that you can use as a guaranteed unique identifier.
            The uniqueness applies even across tables, for cases where an ascending
            numeric sequence is not suitable.
            <span class="ph">See <a class="xref" href="impala_misc_functions.html#misc_functions">Impala Miscellaneous Functions</a> for details.</span>
          </p>

        </li>

      </ul>


    </div>

  </div>




  <div class="topic concept nested1" aria-labelledby="ariaid-title12" id="new_features_240">

    <h2 class="title topictitle2" id="ariaid-title12">New Features in <span class="keyword">Impala 2.4</span></h2>


    <div class="body conbody">

      <ul class="ul">
        <li class="li">
          <p class="p">
            Impala can be used on the DSSD D5 Storage Appliance.
            From a user perspective, the Impala features are the same as in <span class="keyword">Impala 2.3</span>.
          </p>

        </li>

      </ul>


    </div>

  </div>






  <div class="topic concept nested1" aria-labelledby="ariaid-title13" id="new_features_230">

    <h2 class="title topictitle2" id="ariaid-title13">New Features in <span class="keyword">Impala 2.3</span></h2>


    <div class="body conbody">

      <p class="p">
        The following are the major new features in Impala 2.3.x. This major release
        contains improvements to SQL syntax (particularly new support for complex types), performance,
        manageability, security.
      </p>


      <ul class="ul">

        <li class="li">
          <p class="p">
            Complex data types: <code class="ph codeph">STRUCT</code>, <code class="ph codeph">ARRAY</code>, and <code class="ph codeph">MAP</code>. These
            types can encode multiple named fields, positional items, or key-value pairs within a single column.
            You can combine these types to produce nested types with arbitrarily deep nesting,
            such as an <code class="ph codeph">ARRAY</code> of <code class="ph codeph">STRUCT</code> values,
            a <code class="ph codeph">MAP</code> where each key-value pair is an <code class="ph codeph">ARRAY</code> of other <code class="ph codeph">MAP</code> values,
            and so on. Currently, complex data types are only supported for the Parquet file format.
            <span class="ph">See <a class="xref" href="impala_complex_types.html#complex_types">Complex Types (Impala 2.3 or higher only)</a> for usage details and <a class="xref" href="impala_array.html#array">ARRAY Complex Type (Impala 2.3 or higher only)</a>, <a class="xref" href="impala_struct.html#struct">STRUCT Complex Type (Impala 2.3 or higher only)</a>, and <a class="xref" href="impala_map.html#map">MAP Complex Type (Impala 2.3 or higher only)</a> for syntax.</span>
          </p>

        </li>


        <li class="li">
          <p class="p">
            Column-level authorization lets you define access to particular columns within a table,
            rather than the entire table. This feature lets you reduce the reliance on creating views to
            set up authorization schemes for subsets of information.
            See <span class="xref">the documentation for Apache Sentry</span> for background details, and
            <a class="xref" href="impala_grant.html#grant">GRANT Statement (Impala 2.0 or higher only)</a> and <a class="xref" href="impala_revoke.html#revoke">REVOKE Statement (Impala 2.0 or higher only)</a> for Impala-specific syntax.
          </p>

        </li>


        <li class="li">
          <p class="p">
            The <code class="ph codeph">TRUNCATE TABLE</code> statement removes all the data from a table without removing the table itself.
            <span class="ph">See <a class="xref" href="impala_truncate_table.html#truncate_table">TRUNCATE TABLE Statement (Impala 2.3 or higher only)</a> for details.</span>
          </p>

        </li>


        <li class="li" id="new_features_230__IMPALA-2015">
          <p class="p">
            Nested loop join queries. Some join queries that formerly required equality comparisons can now use
            operators such as <code class="ph codeph">&lt;</code> or <code class="ph codeph">&gt;=</code>. This same join mechanism is used
            internally to optimize queries that retrieve values from complex type columns.
            <span class="ph">See <a class="xref" href="impala_joins.html#joins">Joins in Impala SELECT Statements</a> for details about Impala join queries.</span>
          </p>

        </li>


        <li class="li">
          <p class="p">
            Reduced memory usage and improved performance and robustness for spill-to-disk feature.
            <span class="ph">See <a class="xref" href="impala_scalability.html#spill_to_disk">SQL Operations that Spill to Disk</a> for details about this feature.</span>
          </p>

        </li>


        <li class="li">
          <p class="p">
            Performance improvements for querying Parquet data files containing multiple row groups
            and multiple data blocks:
          </p>

          <ul class="ul">
          <li class="li">
          <p class="p"> For files written by Hive, SparkSQL, and other Parquet MR writers
                and spanning multiple HDFS blocks, Impala now scans the extra
                data blocks locally when possible, rather than using remote
                reads. </p>

          </li>

          <li class="li">
          <p class="p">
            Impala queries benefit from the improved alignment of row groups with HDFS blocks for Parquet
            files written by Hive, MapReduce, and other components. (Impala itself never writes
            multiblock Parquet files, so the alignment change does not apply to Parquet files produced by Impala.)
            These Parquet writers now add padding to Parquet files that they write to align row groups with HDFS blocks.
            The <code class="ph codeph">parquet.writer.max-padding</code> setting specifies the maximum number of bytes, by default
            8 megabytes, that can be added to the file between row groups to fill the gap at the end of one block
            so that the next row group starts at the beginning of the next block.
            If the gap is larger than this size, the writer attempts to fit another entire row group in the remaining space.
            Include this setting in the <span class="ph filepath">hive-site</span> configuration file to influence Parquet files written by Hive,
            or the <span class="ph filepath">hdfs-site</span> configuration file to influence Parquet files written by all non-Impala components.
          </p>

          </li>

          </ul>

          <p class="p">
            See <a class="xref" href="impala_parquet.html#parquet">Using the Parquet File Format with Impala Tables</a> for instructions about using Parquet data files
            with Impala.
          </p>

        </li>


        <li class="li" id="new_features_230__IMPALA-1660">
          <p class="p">
            Many new built-in scalar functions, for convenience and enhanced portability of SQL that uses common industry extensions.
          </p>


          <p class="p">
            Math functions<span class="ph"> (see <a class="xref" href="impala_math_functions.html#math_functions">Impala Mathematical Functions</a> for details)</span>:
          </p>

          <ul class="ul">
            <li class="li">
              <code class="ph codeph">ATAN2</code>
            </li>


            <li class="li">
              <code class="ph codeph">COSH</code>
            </li>


            <li class="li">
              <code class="ph codeph">COT</code>
            </li>


            <li class="li">
              <code class="ph codeph">DCEIL</code>
            </li>


            <li class="li">
              <code class="ph codeph">DEXP</code>
            </li>


            <li class="li">
              <code class="ph codeph">DFLOOR</code>
            </li>


            <li class="li">
              <code class="ph codeph">DLOG10</code>
            </li>


            <li class="li">
              <code class="ph codeph">DPOW</code>
            </li>


            <li class="li">
              <code class="ph codeph">DROUND</code>
            </li>


            <li class="li">
              <code class="ph codeph">DSQRT</code>
            </li>


            <li class="li">
              <code class="ph codeph">DTRUNC</code>
            </li>


            <li class="li">
              <code class="ph codeph">FACTORIAL</code>, and corresponding <code class="ph codeph">!</code> operator
            </li>


            <li class="li">
              <code class="ph codeph">FPOW</code>
            </li>


            <li class="li">
              <code class="ph codeph">RADIANS</code>
            </li>


            <li class="li">
              <code class="ph codeph">RANDOM</code>
            </li>


            <li class="li">
              <code class="ph codeph">SINH</code>
            </li>


            <li class="li">
              <code class="ph codeph">TANH</code>
            </li>

          </ul>


          <p class="p">
            String functions<span class="ph"> (see <a class="xref" href="impala_string_functions.html#string_functions">Impala String Functions</a> for details)</span>:
          </p>

          <ul class="ul">
            <li class="li">
              <code class="ph codeph">BTRIM</code>
            </li>

            <li class="li">
              <code class="ph codeph">CHR</code>
            </li>

            <li class="li">
              <code class="ph codeph">REGEXP_LIKE</code>
            </li>

            <li class="li">
              <code class="ph codeph">SPLIT_PART</code>
            </li>

          </ul>


          <p class="p">
            Date and time functions<span class="ph"> (see <a class="xref" href="impala_datetime_functions.html#datetime_functions">Impala Date and Time Functions</a> for details)</span>:
          </p>

          <ul class="ul">
              <li class="li">
                <code class="ph codeph">INT_MONTHS_BETWEEN</code>
              </li>

              <li class="li">
                <code class="ph codeph">MONTHS_BETWEEN</code>
              </li>

              <li class="li">
                <code class="ph codeph">TIMEOFDAY</code>
              </li>

              <li class="li">
                <code class="ph codeph">TIMESTAMP_CMP</code>
              </li>

          </ul>


          <p class="p">
            Bit manipulation functions<span class="ph"> (see <a class="xref" href="impala_bit_functions.html#bit_functions">Impala Bit Functions</a> for details)</span>:
          </p>

          <ul class="ul">
            <li class="li">
              <code class="ph codeph">BITAND</code>
            </li>


            <li class="li">
              <code class="ph codeph">BITNOT</code>
            </li>


            <li class="li">
              <code class="ph codeph">BITOR</code>
            </li>


            <li class="li">
              <code class="ph codeph">BITXOR</code>
            </li>


            <li class="li">
              <code class="ph codeph">COUNTSET</code>
            </li>


            <li class="li">
              <code class="ph codeph">GETBIT</code>
            </li>


            <li class="li">
              <code class="ph codeph">ROTATELEFT</code>
            </li>


            <li class="li">
              <code class="ph codeph">ROTATERIGHT</code>
            </li>


            <li class="li">
              <code class="ph codeph">SETBIT</code>
            </li>


            <li class="li">
              <code class="ph codeph">SHIFTLEFT</code>
            </li>


            <li class="li">
              <code class="ph codeph">SHIFTRIGHT</code>
            </li>

          </ul>

          <p class="p">
            Type conversion functions<span class="ph"> (see <a class="xref" href="impala_conversion_functions.html#conversion_functions">Impala Type Conversion Functions</a> for details)</span>:
          </p>

          <ul class="ul">
            <li class="li">
              <code class="ph codeph">TYPEOF</code>
            </li>

          </ul>

          <p class="p">
            The <code class="ph codeph">effective_user()</code> function<span class="ph"> (see <a class="xref" href="impala_misc_functions.html#misc_functions">Impala Miscellaneous Functions</a> for details)</span>.
          </p>

        </li>


        <li class="li" id="new_features_230__IMPALA-2081">
          <p class="p">
            New built-in analytic functions: <code class="ph codeph">PERCENT_RANK</code>, <code class="ph codeph">NTILE</code>,
            <code class="ph codeph">CUME_DIST</code>.
            <span class="ph">See <a class="xref" href="impala_analytic_functions.html#analytic_functions">Impala Analytic Functions</a> for details.</span>
          </p>

        </li>


        <li class="li" id="new_features_230__IMPALA-595">
          <p class="p">
            The <code class="ph codeph">DROP DATABASE</code> statement now works for a non-empty database.
            When you specify the optional <code class="ph codeph">CASCADE</code> clause, any tables in the
            database are dropped before the database itself is removed.
            <span class="ph">See <a class="xref" href="impala_drop_database.html#drop_database">DROP DATABASE Statement</a> for details.</span>
          </p>

        </li>


        <li class="li">
          <p class="p">
            The <code class="ph codeph">DROP TABLE</code> and <code class="ph codeph">ALTER TABLE DROP PARTITION</code> statements have a new optional keyword, <code class="ph codeph">PURGE</code>.
            This keyword causes Impala to immediately remove the relevant HDFS data files rather than sending them to the HDFS trashcan.
            This feature can help to avoid out-of-space errors on storage devices, and to avoid files being left behind in case of
            a problem with the HDFS trashcan, such as the trashcan not being configured or being in a different HDFS encryption zone
            than the data files.
            <span class="ph">See <a class="xref" href="impala_drop_table.html#drop_table">DROP TABLE Statement</a> and <a class="xref" href="impala_alter_table.html#alter_table">ALTER TABLE Statement</a> for syntax.</span>
          </p>

        </li>


        <li class="li" id="new_features_230__IMPALA-80">
          <p class="p">
            The <span class="keyword cmdname">impala-shell</span> command has a new feature for live progress reporting. This feature
            is enabled through the <code class="ph codeph">--live_progress</code> and <code class="ph codeph">--live_summary</code>
            command-line options, or during a session through the <code class="ph codeph">LIVE_SUMMARY</code> and
            <code class="ph codeph">LIVE_PROGRESS</code> query options.
            <span class="ph">See <a class="xref" href="impala_live_progress.html#live_progress">LIVE_PROGRESS Query Option (Impala 2.3 or higher only)</a> and <a class="xref" href="impala_live_summary.html#live_summary">LIVE_SUMMARY Query Option (Impala 2.3 or higher only)</a> for details.</span>
          </p>

        </li>


        <li class="li">
          <p class="p">
            The <span class="keyword cmdname">impala-shell</span> command also now displays a random <span class="q">"tip of the day"</span> when it starts.
          </p>

        </li>


        <li class="li" id="new_features_230__IMPALA-1413">
          <p class="p">
            The <span class="keyword cmdname">impala-shell</span> option <code class="ph codeph">-f</code> now recognizes a special filename
            <code class="ph codeph">-</code> to accept input from stdin.
            <span class="ph">See <a class="xref" href="impala_shell_options.html#shell_options">impala-shell Configuration Options</a> for details about the options for running <span class="keyword cmdname">impala-shell</span> in non-interactive mode.</span>
          </p>

        </li>


        <li class="li" id="new_features_230__IMPALA-1963">
          <p class="p">
            Format strings for the <code class="ph codeph">unix_timestamp()</code> function can now include numeric timezone offsets.
            <span class="ph">See <a class="xref" href="impala_datetime_functions.html#datetime_functions">Impala Date and Time Functions</a> for details.</span>
          </p>

        </li>


        <li class="li">
          <p class="p">
            Impala can now run a specified command to obtain the password to decrypt a private-key PEM file,
            rather than having the private-key file be unencrypted on disk.
            <span class="ph">See <a class="xref" href="impala_ssl.html#ssl">Configuring TLS/SSL for Impala</a> for details.</span>
          </p>

        </li>


        <li class="li" id="new_features_230__IMPALA-859">
          <p class="p">
            Impala components now can use SSL for more of their internal communication. SSL is used for
            communication between all three Impala-related daemons when the configuration option
            <code class="ph codeph">ssl_server_certificate</code> is enabled. SSL is used for communication with client
            applications when the configuration option <code class="ph codeph">ssl_client_ca_certificate</code> is enabled.
            <span class="ph">See <a class="xref" href="impala_ssl.html#ssl">Configuring TLS/SSL for Impala</a> for details.</span>
          </p>

          <p class="p">
            Currently, you can only use one of server-to-server TLS/SSL encryption or Kerberos authentication.
            This limitation is tracked by the issue
            <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-2598" target="_blank">IMPALA-2598</a>.
          </p>

        </li>


        <li class="li" id="new_features_230__IMPALA-1829">
          <p class="p">
            Improved flexibility for intermediate data types in user-defined aggregate functions (UDAFs).
            <span class="ph">See <a class="xref" href="impala_udf.html#udafs">Writing User-Defined Aggregate Functions (UDAFs)</a> for details.</span>
          </p>

        </li>


      </ul>


      <p class="p">
        In <span class="keyword">Impala 2.3.2</span>, the bug fix for <a class="xref" href="https://issues.apache.org/jira/browse/IMPALA-2598" target="_blank">IMPALA-2598</a>
        removes the restriction on using both Kerberos and SSL for internal communication between Impala components.
      </p>




    </div>


  </div>




  <div class="topic concept nested1" aria-labelledby="ariaid-title14" id="new_features_220">

    <h2 class="title topictitle2" id="ariaid-title14">New Features in <span class="keyword">Impala 2.8</span></h2>


    <div class="body conbody">

      <p class="p">
        The following are the major new features in <span class="keyword">Impala 2.2</span>. This release
        contains improvements to performance, manageability, security, and SQL syntax.
      </p>


      <ul class="ul">
        <li class="li">
          <p class="p">
            Several improvements to date and time features enable higher interoperability with Hive and other
            database systems, provide more flexibility for handling time zones, and future-proof the handling of
            <code class="ph codeph">TIMESTAMP</code> values:
          </p>

          <ul class="ul">
            <li class="li">
              <p class="p">
                The <code class="ph codeph">WITH REPLICATION</code> clause for the <code class="ph codeph">CREATE TABLE</code> and
                <code class="ph codeph">ALTER TABLE</code> statements lets you control the replication factor for
                HDFS caching for a specific table or partition. By default, each cached block is
                only present on a single host, which can lead to CPU contention if the same host
                processes each cached block. Increasing the replication factor lets Impala choose
                different hosts to process different cached blocks, to better distribute the CPU load.
              </p>

            </li>

            <li class="li">
              <p class="p">
                Startup flags for the <span class="keyword cmdname">impalad</span> daemon enable a higher level of compatibility with
                <code class="ph codeph">TIMESTAMP</code> values written by Hive, and more flexibility for working with date and
                time data using the local time zone instead of UTC. To enable these features, set the
                <span class="keyword cmdname">impalad</span> startup flags
                <code class="ph codeph">-use_local_tz_for_unix_timestamp_conversions=true</code> and
                <code class="ph codeph">-convert_legacy_hive_parquet_utc_timestamps=true</code>.
              </p>


              <p class="p">
                The <code class="ph codeph">-use_local_tz_for_unix_timestamp_conversions</code> setting controls how the
                <code class="ph codeph">unix_timestamp()</code>, <code class="ph codeph">from_unixtime()</code>, and <code class="ph codeph">now()</code>
                functions handle time zones. By default (when this setting is turned off), Impala considers all
                <code class="ph codeph">TIMESTAMP</code> values to be in the UTC time zone when converting to or from Unix time
                values. When this setting is enabled, Impala treats <code class="ph codeph">TIMESTAMP</code> values passed to or
                returned from these functions to be in the local time zone. When this setting is enabled, take
                particular care that all hosts in the cluster have the same timezone settings, to avoid
                inconsistent results depending on which host reads or writes <code class="ph codeph">TIMESTAMP</code> data.
              </p>


              <p class="p">
                The <code class="ph codeph">-convert_legacy_hive_parquet_utc_timestamps</code> setting causes Impala to convert
                <code class="ph codeph">TIMESTAMP</code> values to the local time zone when it reads them from Parquet files
                written by Hive. This setting only applies to data using the Parquet file format, where Impala can
                use metadata in the files to reliably determine that the files were written by Hive. If in the
                future Hive changes the way it writes <code class="ph codeph">TIMESTAMP</code> data in Parquet, Impala will
                automatically handle that new <code class="ph codeph">TIMESTAMP</code> encoding.
              </p>


              <p class="p">
                See <a class="xref" href="impala_timestamp.html#timestamp">TIMESTAMP Data Type</a> for details about time zone handling and the
                configuration options for Impala / Hive compatibility with Parquet format.
              </p>

            </li>


            <li class="li">
              <p class="p"> In Impala 2.2.0 and higher, built-in functions
        that accept or return integers representing <code class="ph codeph">TIMESTAMP</code>
        values use the <code class="ph codeph">BIGINT</code> type for parameters and return
        values, rather than <code class="ph codeph">INT</code>. This change lets the date and
        time functions avoid an overflow error that would otherwise occur on
        January 19th, 2038 (known as the <a class="xref" href="http://en.wikipedia.org/wiki/Year_2038_problem" target="_blank"><span class="q">"Year 2038 problem"</span> or <span class="q">"Y2K38
        problem"</span></a>). This change affects the
          <code class="ph codeph">FROM_UNIXTIME()</code> and <code class="ph codeph">UNIX_TIMESTAMP()</code>
        functions. You might need to change application code that interacts with
        these functions, change the types of columns that store the return
        values, or add <code class="ph codeph">CAST()</code> calls to SQL statements that call
        these functions. </p>


              <p class="p">
                See <a class="xref" href="impala_datetime_functions.html#datetime_functions">Impala Date and Time Functions</a> for the current function
                signatures.
              </p>

            </li>

          </ul>

        </li>


        <li class="li">
          <p class="p">
            The <code class="ph codeph">SHOW FILES</code> statement lets you view the names and sizes of the files that make up
            an entire table or a specific partition. See <a class="xref" href="impala_show.html#show_files">SHOW FILES Statement</a> for details.
          </p>

        </li>


        <li class="li">
          <p class="p">
            Impala can now run queries against Parquet data containing columns with complex or nested types, as
            long as the query only refers to columns with scalar types.
          </p>

        </li>


        <li class="li">
          <p class="p">
            Performance improvements for queries that include <code class="ph codeph">IN()</code> operators and involve
            partitioned tables.
          </p>

        </li>


        <li class="li">

          <p class="p">
            The new <code class="ph codeph">-max_log_files</code> configuration option specifies how many log files to keep at
            each severity level. The default value is 10, meaning that Impala preserves the latest 10 log files for
            each severity level (<code class="ph codeph">INFO</code>, <code class="ph codeph">WARNING</code>, and <code class="ph codeph">ERROR</code>) for
            each Impala-related daemon (<span class="keyword cmdname">impalad</span>, <span class="keyword cmdname">statestored</span>, and
            <span class="keyword cmdname">catalogd</span>). Impala checks to see if any old logs need to be removed based on the
            interval specified in the <code class="ph codeph">logbufsecs</code> setting, every 5 seconds by default. See
            <a class="xref" href="impala_logging.html#logs_rotate">Rotating Impala Logs</a> for details.
          </p>

        </li>


        <li class="li">
          <p class="p">
            Redaction of sensitive data from Impala log files. This feature protects details such as credit card
            numbers or tax IDs from administrators who see the text of SQL statements in the course of monitoring
            and troubleshooting a Hadoop cluster. See <a class="xref" href="impala_logging.html#redaction">Redacting Sensitive Information from Impala Log Files</a> for background
            information for Impala users, and <span class="xref">the documentation for your Apache Hadoop distribution</span> for usage details.
          </p>

        </li>


        <li class="li">
          <p class="p">
            Lineage information is available for data created or queried by Impala. This feature lets you track who
            has accessed data through Impala SQL statements, down to the level of specific columns, and how data
            has been propagated between tables. See <a class="xref" href="impala_lineage.html#lineage">Viewing Lineage Information for Impala Data</a> for background
            information for Impala users, <span class="xref">the documentation for your Apache Hadoop distribution</span> for usage details and
            how to interpret the lineage information.
          </p>

        </li>


        <li class="li">
          <p class="p">
            Impala tables and partitions can now be located on the Amazon Simple Storage Service (S3) filesystem,
            for convenience in cases where data is already located in S3 and you prefer to query it in-place.
            Queries might have lower performance than when the data files reside on HDFS, because Impala uses some
            HDFS-specific optimizations. Impala can query data in S3, but cannot write to S3. Therefore, statements
            such as <code class="ph codeph">INSERT</code> and <code class="ph codeph">LOAD DATA</code> are not available when the destination
            table or partition is in S3. See <a class="xref" href="impala_s3.html#s3">Using Impala with the Amazon S3 Filesystem</a> for details.
          </p>


          <div class="note important"><span class="importanttitle">Important:</span>
        <p class="p">
          Impala query support for Amazon S3 is included in <span class="keyword">Impala 2.2</span>, but is
          not supported or recommended for production use in this version.
        </p>

      </div>

        </li>


        <li class="li">
        
          <p class="p">
            Improved support for HDFS encryption. The <code class="ph codeph">LOAD DATA</code> statement now works when the
            source directory and destination table are in different encryption zones. See
            <span class="xref">the documentation for your Apache Hadoop distribution</span> for details about using HDFS encryption with
            Impala.
          </p>

        </li>


        <li class="li">
          <p class="p">
            Additional arithmetic function <code class="ph codeph">mod()</code>. See
            <a class="xref" href="impala_math_functions.html#math_functions">Impala Mathematical Functions</a> for details.
          </p>

        </li>


        <li class="li">
          <p class="p">
            Flexibility to interpret <code class="ph codeph">TIMESTAMP</code> values using the UTC time zone (the traditional
            Impala behavior) or using the local time zone (for compatibility with <code class="ph codeph">TIMESTAMP</code> values
            produced by Hive).
          </p>

        </li>


        <li class="li">
          <p class="p">
            Enhanced support for ETL using tools such as Flume. Impala ignores temporary files typically produced
            by these tools (filenames with suffixes <code class="ph codeph">.copying</code> and <code class="ph codeph">.tmp</code>).
          </p>

        </li>


        <li class="li">
          <p class="p">
            The CPU requirement for Impala, which had become more restrictive in Impala 2.0.x and 2.1.x, has now
            been relaxed.
          </p>


          <p class="p">
        The prerequisite for CPU architecture has been relaxed in Impala 2.2.0 and higher. From this release
        onward, Impala works on CPUs that have the SSSE3 instruction set. The SSE4 instruction set is no longer
        required. This relaxed requirement simplifies the upgrade planning from Impala 1.x releases, which also
        worked on SSSE3-enabled processors.
      </p>

        </li>


        <li class="li">
          <p class="p">
            Enhanced support for <code class="ph codeph">CHAR</code> and <code class="ph codeph">VARCHAR</code> types in the <code class="ph codeph">COMPUTE
            STATS</code> statement.
          </p>

        </li>


        <li class="li">
          <p class="p">
            The amount of memory required during setup for <span class="q">"spill to disk"</span> operations is greatly reduced. This
            enhancement reduces the chance of a memory-intensive join or aggregation query failing with an
            out-of-memory error.
          </p>

        </li>


        <li class="li">
          <p class="p">
            Several new conditional functions provide enhanced compatibility when porting code that uses industry
            extensions. The new functions are: <code class="ph codeph">isfalse()</code>, <code class="ph codeph">isnotfalse()</code>,
            <code class="ph codeph">isnottrue()</code>, <code class="ph codeph">istrue()</code>, <code class="ph codeph">nonnullvalue()</code>, and
            <code class="ph codeph">nullvalue()</code>. See <a class="xref" href="impala_conditional_functions.html#conditional_functions">Impala Conditional Functions</a>
            for details.
          </p>

        </li>


        <li class="li">
          <p class="p">
            The Impala debug web UI now can display a visual representation of the query plan. On the
            <span class="ph uicontrol">/queries</span> tab, select <span class="ph uicontrol">Details</span> for a particular query. The
            <span class="ph uicontrol">Details</span> page includes a <span class="ph uicontrol">Plan</span> tab with a plan diagram that
            you can zoom in or out (using scroll gestures through mouse wheel or trackpad).
          </p>

        </li>

      </ul>




    </div>


  </div>




  <div class="topic concept nested1" aria-labelledby="ariaid-title15" id="new_features_210">

    <h2 class="title topictitle2" id="ariaid-title15">New Features in <span class="keyword">Impala 2.1</span></h2>


    <div class="body conbody">

      <p class="p">
        This release contains the following enhancements to query performance and system scalability:
      </p>


      <ul class="ul">
        <li class="li">
          <p class="p">
            Impala can now collect statistics for individual partitions in a partitioned table, rather than
            processing the entire table for each <code class="ph codeph">COMPUTE STATS</code> statement. This feature is known as
            incremental statistics, and is controlled by the <code class="ph codeph">COMPUTE INCREMENTAL STATS</code> syntax.
            (You can still use the original <code class="ph codeph">COMPUTE STATS</code> statement for nonpartitioned tables or
            partitioned tables that are unchanging or whose contents are entirely replaced all at once.) See
            <a class="xref" href="impala_compute_stats.html#compute_stats">COMPUTE STATS Statement</a> and
            <a class="xref" href="impala_perf_stats.html#perf_stats">Table and Column Statistics</a> for details.
          </p>

        </li>


        <li class="li">
          <p class="p">
            Optimization for small queries lets Impala process queries that process very few rows without the
            unnecessary overhead of parallelizing and generating native code. Reducing this overhead lets Impala
            clear small queries quickly, keeping YARN resources and admission control slots available for
            data-intensive queries. The number of rows considered to be a <span class="q">"small"</span> query is controlled by the
            <code class="ph codeph">EXEC_SINGLE_NODE_ROWS_THRESHOLD</code> query option. See
            <a class="xref" href="impala_exec_single_node_rows_threshold.html#exec_single_node_rows_threshold">EXEC_SINGLE_NODE_ROWS_THRESHOLD Query Option (Impala 2.1 or higher only)</a> for details.
          </p>

        </li>


        <li class="li">
          <p class="p">
            An enhancement to the statestore component lets it transmit heartbeat information independently of
            broadcasting metadata updates. This optimization improves reliability of health checking on large
            clusters with many tables and partitions.
          </p>

        </li>


        <li class="li">
          <p class="p">
            The memory requirement for querying gzip-compressed text is reduced. Now Impala decompresses the data
            as it is read, rather than reading the entire gzipped file and decompressing it in memory.
          </p>

        </li>

      </ul>


    </div>


  </div>




  <div class="topic concept nested1" aria-labelledby="ariaid-title16" id="new_features_200">

    <h2 class="title topictitle2" id="ariaid-title16">New Features in <span class="keyword">Impala 2.0</span></h2>


    <div class="body conbody">

      <p class="p">
        The following are the major new features in <span class="keyword">Impala 2.0</span>. This major release
        contains improvements to performance, scalability, security, and SQL syntax.
      </p>


      <ul class="ul">
        <li class="li">
          <p class="p">
            Queries with joins or aggregation functions involving high volumes of data can now use temporary work
            areas on disk, reducing the chance of failure due to out-of-memory errors. When the required memory for
            the intermediate result set exceeds the amount available on a particular node, the query automatically
            uses a temporary work area on disk. This <span class="q">"spill to disk"</span> mechanism is similar to the <code class="ph codeph">ORDER
            BY</code> improvement from Impala 1.4. For details, see
            <a class="xref" href="impala_scalability.html#spill_to_disk">SQL Operations that Spill to Disk</a>.
          </p>

        </li>


        <li class="li">
          <div class="p">
            Subquery enhancements:
            <ul class="ul">
              <li class="li">
                Subqueries are now allowed in the <code class="ph codeph">WHERE</code> clause, for example with the
                <code class="ph codeph">IN</code> operator.
              </li>


              <li class="li">
                The <code class="ph codeph">EXISTS</code> and <code class="ph codeph">NOT EXISTS</code> operators are available. They are
                always used in conjunction with subqueries.
              </li>


              <li class="li">
                The <code class="ph codeph">IN</code> and <code class="ph codeph">NOT IN</code> queries can now operate on the result set from
                a subquery, not just a hardcoded list of values.
              </li>


              <li class="li">
                Uncorrelated subqueries let you compare against one or more values for equality,
                <code class="ph codeph">IN</code>, and <code class="ph codeph">EXISTS</code> comparisons. For example, you might use
                <code class="ph codeph">WHERE</code> clauses such as <code class="ph codeph">WHERE <var class="keyword varname">column</var> = (SELECT
                MAX(<var class="keyword varname">some_other_column</var> FROM <var class="keyword varname">table</var>)</code> or <code class="ph codeph">WHERE
                <var class="keyword varname">column</var> IN (SELECT <var class="keyword varname">some_other_column</var> FROM
                <var class="keyword varname">table</var> WHERE <var class="keyword varname">conditions</var>)</code>.
              </li>


              <li class="li">
                Correlated subqueries let you cross-reference values from the outer query block and the subquery.
              </li>


              <li class="li">
                Scalar subqueries let you substitute the result of single-value aggregate functions such as
                <code class="ph codeph">MAX()</code>, <code class="ph codeph">MIN()</code>, <code class="ph codeph">COUNT()</code>, or
                <code class="ph codeph">AVG()</code>, where you would normally use a numeric value in a <code class="ph codeph">WHERE</code>
                clause.
              </li>

            </ul>

          </div>


          <p class="p">
            For details about subqueries, see <a class="xref" href="impala_subqueries.html#subqueries">Subqueries in Impala SELECT Statements</a> For information about
            new and improved operators, see <a class="xref" href="impala_operators.html#exists">EXISTS Operator</a> and
            <a class="xref" href="impala_operators.html#in">IN Operator</a>.
          </p>

        </li>


        <li class="li">
          <p class="p">
            Analytic functions such as <code class="ph codeph">RANK()</code>, <code class="ph codeph">LAG()</code>, <code class="ph codeph">LEAD()</code>,
            and <code class="ph codeph">FIRST_VALUE()</code> let you analyze sequences of rows with flexible ordering and
            grouping. Existing aggregate functions such as <code class="ph codeph">MAX()</code>, <code class="ph codeph">SUM()</code>, and
            <code class="ph codeph">COUNT()</code> can also be used in an analytic context. See
            <a class="xref" href="impala_analytic_functions.html#analytic_functions">Impala Analytic Functions</a> for details. See
            <a class="xref" href="impala_aggregate_functions.html#aggregate_functions">Impala Aggregate Functions</a> for enhancements to existing
            aggregate functions.
          </p>

        </li>


        <li class="li">
          <p class="p">
            New data types provide greater compatibility with source code from traditional database systems:
          </p>

          <ul class="ul">
            <li class="li">
              <code class="ph codeph">VARCHAR</code> is like the <code class="ph codeph">STRING</code> data type, but with a maximum length.
              See <a class="xref" href="impala_varchar.html#varchar">VARCHAR Data Type (Impala 2.0 or higher only)</a> for details.
            </li>


            <li class="li">
              <code class="ph codeph">CHAR</code> is like the <code class="ph codeph">STRING</code> data type, but with a precise length. Short
              values are padded with spaces on the right. See <a class="xref" href="impala_char.html#char">CHAR Data Type (Impala 2.0 or higher only)</a> for details.
            </li>


            
          </ul>

        </li>


        <li class="li">
          <div class="p">
            Security enhancements:
            <ul class="ul">
              <li class="li">
                Formerly, Impala was restricted to using either Kerberos or LDAP / Active Directory authentication
                within a cluster. Now, Impala can freely accept either kind of authentication request, allowing you
                to set up some hosts with Kerberos authentication and others with LDAP or Active Directory. See
                <a class="xref" href="impala_mixed_security.html#mixed_security">Using Multiple Authentication Methods with Impala</a> for details.
              </li>


              <li class="li">
                <code class="ph codeph">GRANT</code> statement. See <a class="xref" href="impala_grant.html#grant">GRANT Statement (Impala 2.0 or higher only)</a> for details.
              </li>


              <li class="li">
                <code class="ph codeph">REVOKE</code> statement. See <a class="xref" href="impala_revoke.html#revoke">REVOKE Statement (Impala 2.0 or higher only)</a> for details.
              </li>


              <li class="li">
                <code class="ph codeph">CREATE ROLE</code> statement. See <a class="xref" href="impala_create_role.html#create_role">CREATE ROLE Statement (Impala 2.0 or higher only)</a> for
                details.
              </li>


              <li class="li">
                <code class="ph codeph">DROP ROLE</code> statement. See <a class="xref" href="impala_drop_role.html#drop_role">DROP ROLE Statement (Impala 2.0 or higher only)</a> for
                details.
              </li>


              <li class="li">
                <code class="ph codeph">SHOW ROLES</code> and <code class="ph codeph">SHOW ROLE GRANT</code> statements. See
                <a class="xref" href="impala_show.html#show">SHOW Statement</a> for details.
              </li>


              <li class="li">
                <p class="p">
                  To complement the HDFS encryption feature, a new Impala configuration option,
                  <code class="ph codeph">--disk_spill_encryption</code> secures sensitive data from being observed or tampered
                  with when temporarily stored on disk.
                </p>

              </li>

            </ul>

          </div>


          <p class="p">
            The new security-related SQL statements work along with the Sentry authorization framework. See
            <a class="xref" href="impala_authorization.html">Enabling Sentry Authorization for Impala</a> for details.
          </p>

        </li>


        <li class="li">
          <p class="p">
            Impala can now read compressed text files compressed by gzip, bzip, or Snappy. These files do not
            require any special table settings to work in an Impala text table. Impala recognizes the compression
            type automatically based on file extensions of <code class="ph codeph">.gz</code>, <code class="ph codeph">.bz2</code>, and
            <code class="ph codeph">.snappy</code> respectively. These types of compressed text files are intended for
            convenience with existing ETL pipelines. Their non-splittable nature means they are not optimal for
            high-performance parallel queries. See <a class="xref" href="impala_txtfile.html#gzip">Using gzip, bzip2, or Snappy-Compressed Text Files</a> for details.
          </p>

        </li>


        <li class="li">
          <p class="p">
            Query hints can now use comment notation, <code class="ph codeph">/* +<var class="keyword varname">hint_name</var> */</code> or
            <code class="ph codeph">-- +<var class="keyword varname">hint_name</var></code>, at the same places in the query where the hints
            enclosed by <code class="ph codeph">[ ]</code> are recognized. This enhancement makes it easier to reuse Impala
            queries on other database systems. See <a class="xref" href="impala_hints.html#hints">Optimizer Hints</a> for details.
          </p>

        </li>


        <li class="li">
          <p class="p">
            A new query option, <code class="ph codeph">QUERY_TIMEOUT_S</code>, lets you specify a timeout period in seconds for
            individual queries.
          </p>


          <p class="p">
            The working of the <code class="ph codeph">--idle_query_timeout</code> configuration option is extended. If no
            <code class="ph codeph">QUERY_OPTION_S</code> query option is in effect, <code class="ph codeph">--idle_query_timeout</code> works
            the same as before, setting the timeout interval. When the <code class="ph codeph">QUERY_OPTION_S</code> query option
            is specified, its maximum value is capped by the value of the <code class="ph codeph">--idle_query_timeout</code>
            option.
          </p>


          <p class="p">
            That is, the system administrator sets the default and maximum timeout through the
            <code class="ph codeph">--idle_query_timeout</code> startup option, and then individual users or applications can set
            a lower timeout value if desired through the <code class="ph codeph">QUERY_TIMEOUT_S</code> query option. See
            <a class="xref" href="impala_timeouts.html#timeouts">Setting Timeout Periods for Daemons, Queries, and Sessions</a> and
            <a class="xref" href="impala_query_timeout_s.html#query_timeout_s">QUERY_TIMEOUT_S Query Option (Impala 2.0 or higher only)</a> for details.
          </p>

        </li>


        <li class="li">
          <p class="p">
            New functions <code class="ph codeph">VAR_SAMP()</code> and <code class="ph codeph">VAR_POP()</code> are aliases for the existing
            <code class="ph codeph">VARIANCE_SAMP()</code> and <code class="ph codeph">VARIANCE_POP()</code> functions.
          </p>

        </li>


        <li class="li">
          <p class="p">
            A new date and time function, <code class="ph codeph">DATE_PART()</code>, provides similar functionality to
            <code class="ph codeph">EXTRACT()</code>. You can also call the <code class="ph codeph">EXTRACT()</code> function using the SQL-99
            syntax, <code class="ph codeph">EXTRACT(<var class="keyword varname">unit</var> FROM <var class="keyword varname">timestamp</var>)</code>. These
            enhancements simplify the porting process for date-related code from other systems. See
            <a class="xref" href="impala_datetime_functions.html#datetime_functions">Impala Date and Time Functions</a> for details.
          </p>

        </li>


        <li class="li">
          <p class="p">
            New approximation features provide a fast way to get results when absolute precision is not required:
          </p>

          <ul class="ul">
            <li class="li">
              The <code class="ph codeph">APPX_COUNT_DISTINCT</code> query option lets Impala rewrite
              <code class="ph codeph">COUNT(DISTINCT)</code> calls to use <code class="ph codeph">NDV()</code> instead, which speeds up the
              operation and allows multiple <code class="ph codeph">COUNT(DISTINCT)</code> operations in a single query. See
              <a class="xref" href="impala_appx_count_distinct.html#appx_count_distinct">APPX_COUNT_DISTINCT Query Option (Impala 2.0 or higher only)</a> for details.
            </li>

          </ul>

          The <code class="ph codeph">APPX_MEDIAN()</code> aggregate function produces an estimate for the median value of a
          column by using sampling. See <a class="xref" href="impala_appx_median.html#appx_median">APPX_MEDIAN Function</a> for details.
        </li>


        <li class="li">
          <p class="p">
            Impala now supports a <code class="ph codeph">DECODE()</code> function. This function works as a shorthand for a
            <code class="ph codeph">CASE()</code> expression, and improves compatibility with SQL code containing vendor
            extensions. See <a class="xref" href="impala_conditional_functions.html#conditional_functions">Impala Conditional Functions</a> for details.
          </p>

        </li>


        <li class="li">
          <p class="p">
            The <code class="ph codeph">STDDEV()</code>, <code class="ph codeph">STDDEV_POP()</code>, <code class="ph codeph">STDDEV_SAMP()</code>,
            <code class="ph codeph">VARIANCE()</code>, <code class="ph codeph">VARIANCE_POP()</code>, <code class="ph codeph">VARIANCE_SAMP()</code>, and
            <code class="ph codeph">NDV()</code> aggregate functions now all return <code class="ph codeph">DOUBLE</code> results rather than
            <code class="ph codeph">STRING</code>. Formerly, you were required to <code class="ph codeph">CAST()</code> the result to a numeric
            type before using it in arithmetic operations.
          </p>

        </li>


        <li class="li" id="new_features_200__parquet_block_size">
          <p class="p">
            The default settings for Parquet block size, and the associated <code class="ph codeph">PARQUET_FILE_SIZE</code>
            query option, are changed. Now, Impala writes Parquet files with a size of 256 MB and an HDFS block
            size of 256 MB. Previously, Impala attempted to write Parquet files with a size of 1 GB and an HDFS
            block size of 1 GB. In practice, Impala used a conservative estimate of the disk space needed for each
            Parquet block, leading to files that were typically 512 MB anyway. Thus, this change will make the file
            size more accurate if you specify a value for the <code class="ph codeph">PARQUET_FILE_SIZE</code> query option. It
            also reduces the amount of memory reserved during <code class="ph codeph">INSERT</code> into Parquet tables,
            potentially avoiding out-of-memory errors and improving scalability when inserting data into Parquet
            tables.
          </p>

        </li>


        <li class="li">
          <p class="p">
            Anti-joins are now supported, expressed using the <code class="ph codeph">LEFT ANTI JOIN</code> and <code class="ph codeph">RIGHT
            ANTI JOIN</code> clauses.


            These clauses returns results from one table that have no match in the other table. You might use this
            type of join in the same sorts of use cases as the <code class="ph codeph">NOT EXISTS</code> and <code class="ph codeph">NOT
            IN</code> operators. See <a class="xref" href="impala_joins.html#joins">Joins in Impala SELECT Statements</a> for details.
          </p>

        </li>


        

        <li class="li">
          <p class="p">
            The <code class="ph codeph">SET</code> command in <span class="keyword cmdname">impala-shell</span> has been promoted to a real SQL
            statement. You can now set query options such as <code class="ph codeph">PARQUET_FILE_SIZE</code>,
            <code class="ph codeph">MEM_LIMIT</code>, and <code class="ph codeph">SYNC_DDL</code> within JDBC, ODBC, or any other kind of
            application that submits SQL without going through the <span class="keyword cmdname">impala-shell</span> interpreter. See
            <a class="xref" href="impala_set.html#set">SET Statement</a> for details.
          </p>

        </li>


        <li class="li">
          <p class="p">
            The <span class="keyword cmdname">impala-shell</span> interpreter now reads settings from an optional configuration file,
            named <span class="ph filepath">$HOME/.impalarc</span> by default. See
            <a class="xref" href="impala_shell_options.html#shell_config_file">impala-shell Configuration File</a> for details.
          </p>

        </li>


        

        <li class="li">
          <p class="p">
            The library used for regular expression parsing has changed from Boost to Google RE2. This
            implementation change adds support for non-greedy matches using the <code class="ph codeph">.*?</code> notation. This
            and other changes in the way regular expressions are interpreted means you might need to re-test
            queries that use functions such as <code class="ph codeph">regexp_extract()</code> or
            <code class="ph codeph">regexp_replace()</code>, or operators such as <code class="ph codeph">REGEXP</code> or
            <code class="ph codeph">RLIKE</code>. See <a class="xref" href="impala_incompatible_changes.html#incompatible_changes">Incompatible Changes and Limitations in Apache Impala</a> for
            those details.
          </p>

        </li>

      </ul>


    </div>


  </div>


  <div class="topic concept nested1" aria-labelledby="ariaid-title17" id="new_features_140">

    <h2 class="title topictitle2" id="ariaid-title17">New Features in <span class="keyword">Impala 1.4</span></h2>


    <div class="body conbody">

      <p class="p">
        The following are the major new features in <span class="keyword">Impala 1.4</span>:
      </p>


      <ul class="ul">
        <li class="li">
          <p class="p">
            The <code class="ph codeph">DECIMAL</code> data type lets you store fixed-precision values, for working with currency
            or other fractional values where it is important to represent values exactly and avoid rounding errors.
            This feature includes enhancements to built-in functions, numeric literals, and arithmetic expressions.
            <span class="ph">See <a class="xref" href="impala_decimal.html#decimal">DECIMAL Data Type (Impala 3.0 or higher only)</a> for details.</span>
          </p>

        </li>


        <li class="li">
          <p class="p">
            Where the underlying HDFS support exists, Impala can take advantage of the HDFS caching feature to <span class="q">"pin"</span> entire tables or
            individual partitions in memory, to speed up queries on frequently accessed data and reduce the CPU
            overhead of memory-to-memory copying. When HDFS files are cached in memory, Impala can read the cached
            data without any disk reads, and without making an additional copy of the data in memory. Other Hadoop
            components that read the same data files also experience a performance benefit.
          </p>


          <p class="p">
            For background information about HDFS caching, see
            <span class="xref">the documentation for your Apache Hadoop distribution</span>. For performance information about using this feature with Impala, see
            <a class="xref" href="impala_perf_hdfs_caching.html#hdfs_caching">Using HDFS Caching with Impala (Impala 2.1 or higher only)</a>. For the <code class="ph codeph">SET CACHED</code> and
            <code class="ph codeph">SET UNCACHED</code> clauses that let you control cached table data through DDL statements,
            see <a class="xref" href="impala_create_table.html#create_table">CREATE TABLE Statement</a> and
            <a class="xref" href="impala_alter_table.html#alter_table">ALTER TABLE Statement</a>.
          </p>

        </li>


        <li class="li">
          <p class="p">
            Impala can now use Sentry-based authorization based either on the original policy file, or on rules
            defined by <code class="ph codeph">GRANT</code> and <code class="ph codeph">REVOKE</code> statements issued through Hive.
            See <a class="xref" href="impala_authorization.html">Enabling Sentry Authorization for Impala</a> for details.
          </p>

        </li>


        <li class="li">
          <p class="p">
            For interoperability with Parquet files created through other Hadoop components, such as Pig or
            MapReduce jobs, you can create an Impala table that automatically sets up the column definitions based
            on the layout of an existing Parquet data file. <span class="ph">See
            <a class="xref" href="impala_create_table.html#create_table">CREATE TABLE Statement</a> for the syntax, and
            <a class="xref" href="impala_parquet.html#parquet_ddl">Creating Parquet Tables in Impala</a> for usage information.</span>
          </p>

        </li>


        <li class="li">
          <p class="p">
            <code class="ph codeph">ORDER BY</code> queries no longer require a <code class="ph codeph">LIMIT</code> clause. If the size of the
            result set to be sorted exceeds the memory available to Impala, Impala uses a temporary work space on
            disk to perform the sort operation. <span class="ph">See <a class="xref" href="impala_order_by.html#order_by">ORDER BY Clause</a>
            for details.</span>
          </p>

        </li>


        <li class="li">
          <p class="p">
            LDAP connections can be secured through either SSL or TLS. <span class="ph">See
            <a class="xref" href="impala_ldap.html#ldap">Enabling LDAP Authentication for Impala</a> for details.</span>
          </p>

        </li>


        <li class="li">
          <p class="p">
            The following new built-in scalar and aggregate functions are available:
          </p>

          <ul class="ul">
            <li class="li">
              <p class="p">
                A new built-in function, <code class="ph codeph">EXTRACT()</code>, returns one date or time field from a
                <code class="ph codeph">TIMESTAMP</code> value. <span class="ph">See
                <a class="xref" href="impala_datetime_functions.html#datetime_functions">Impala Date and Time Functions</a> for details.</span>
              </p>

            </li>


            <li class="li">
              <p class="p">
                A new built-in function, <code class="ph codeph">TRUNC()</code>, truncates date/time values to a particular
                granularity, such as year, month, day, hour, and so on. <span class="ph">See
                <a class="xref" href="impala_datetime_functions.html#datetime_functions">Impala Date and Time Functions</a> for details.</span>
              </p>

            </li>


            <li class="li">
              <p class="p">
                <code class="ph codeph">ADD_MONTHS()</code> built-in function, an alias for the existing
                <code class="ph codeph">MONTHS_ADD()</code> function. <span class="ph">See
                <a class="xref" href="impala_datetime_functions.html#datetime_functions">Impala Date and Time Functions</a> for details.</span>
              </p>

            </li>


            <li class="li">
              <p class="p">
                A new built-in function, <code class="ph codeph">ROUND()</code>, rounds <code class="ph codeph">DECIMAL</code> values to a
                specified number of fractional digits. <span class="ph">See
                <a class="xref" href="impala_math_functions.html#math_functions">Impala Mathematical Functions</a> for details.</span>
              </p>

            </li>


            <li class="li">
              <p class="p">
                Several built-in aggregate functions for computing properties for statistical distributions:
                <code class="ph codeph">STDDEV()</code>, <code class="ph codeph">STDDEV_SAMP()</code>, <code class="ph codeph">STDDEV_POP()</code>,
                <code class="ph codeph">VARIANCE()</code>, <code class="ph codeph">VARIANCE_SAMP()</code>, and <code class="ph codeph">VARIANCE_POP()</code>.
                <span class="ph">See <a class="xref" href="impala_stddev.html#stddev">STDDEV, STDDEV_SAMP, STDDEV_POP Functions</a> and
                <a class="xref" href="impala_variance.html#variance">VARIANCE, VARIANCE_SAMP, VARIANCE_POP, VAR_SAMP, VAR_POP Functions</a> for details.</span>
              </p>

            </li>


            <li class="li">
              <p class="p">
                Several new built-in functions, such as <code class="ph codeph">MAX_INT()</code>,
                <code class="ph codeph">MIN_SMALLINT()</code>, and so on, let you conveniently check whether data values are in
                an expected range. You might be able to switch a column to a smaller type, saving memory during
                processing. <span class="ph">See <a class="xref" href="impala_math_functions.html#math_functions">Impala Mathematical Functions</a> for
                details.</span>
              </p>

            </li>


            <li class="li">
              <p class="p">
                New built-in functions, <code class="ph codeph">IS_INF()</code> and <code class="ph codeph">IS_NAN()</code>, check for the
                special values infinity and <span class="q">"not a number"</span>. These values could be specified as
                <code class="ph codeph">inf</code> or <code class="ph codeph">nan</code> in text data files, or be produced by certain
                arithmetic expressions. <span class="ph">See
                <a class="xref" href="impala_math_functions.html#math_functions">Impala Mathematical Functions</a> for details.</span>
              </p>

            </li>

          </ul>

        </li>


        <li class="li">
          <p class="p">
            The <code class="ph codeph">SHOW PARTITIONS</code> statement displays information about the structure of a
            partitioned table. <span class="ph">See <a class="xref" href="impala_show.html#show">SHOW Statement</a> for details.</span>
          </p>

        </li>


        

        <li class="li">
          <p class="p">
            New configuration options for the <span class="keyword cmdname">impalad</span> daemon let you specify initial memory
            usage for all queries. The initial resource requests handled by Llama and YARN can be expanded later if
            needed, avoiding unnecessary over-allocation and reducing the chance of out-of-memory conditions.
            <span class="ph">See <a class="xref" href="impala_resource_management.html#resource_management">Resource Management for Impala</a> for
            details.</span>
          </p>

        </li>


        <li class="li">
          The Impala <code class="ph codeph">CREATE TABLE</code> statement now has a <code class="ph codeph">STORED AS AVRO</code> clause,
          allowing you to create Avro tables through Impala. <span class="ph">See
          <a class="xref" href="impala_avro.html#avro">Using the Avro File Format with Impala Tables</a> for details and examples.</span>
        </li>


        <li class="li">
          <p class="p">
            New <span class="keyword cmdname">impalad</span> configuration options let you fine-tune the calculations Impala makes to
            estimate resource requirements for each query. These options can help avoid problems due to
            overconsumption due to too-low estimates, or underutilization due to too-high estimates.
            <span class="ph">See <a class="xref" href="impala_resource_management.html#resource_management">Resource Management for Impala</a> for
            details.</span>
          </p>

        </li>


        <li class="li">
          <p class="p">
            A new <code class="ph codeph">SUMMARY</code> command in the <span class="keyword cmdname">impala-shell</span> interpreter provides a
            high-level summary of the work performed at each stage of the explain plan. The summary is also
            included in output from the <code class="ph codeph">PROFILE</code> command. <span class="ph">See
            <a class="xref" href="impala_shell_commands.html#shell_commands">impala-shell Command Reference</a> and
            <a class="xref" href="impala_explain_plan.html#perf_summary">Using the SUMMARY Report for Performance Tuning</a> for details.</span>
          </p>

        </li>


        <li class="li">
          <p class="p">
            Performance improvements for the <code class="ph codeph">COMPUTE STATS</code> statement:
          </p>

          <ul class="ul">


            

            <li class="li">
              The <code class="ph codeph">NDV</code> function is speeded up through native code generation.
            </li>


            <li class="li">
              Because the <code class="ph codeph">NULL</code> count is not currently used by the Impala query planner, in Impala
              1.4.0 and higher, <code class="ph codeph">COMPUTE STATS</code> does not count the <code class="ph codeph">NULL</code> values for
              each column. (The <code class="ph codeph">#Nulls</code> field of the stats table is left as -1, signifying that the
              value is unknown.)
            </li>

          </ul>

          <p class="p">
            See <a class="xref" href="impala_compute_stats.html#compute_stats">COMPUTE STATS Statement</a> for general details about the <code class="ph codeph">COMPUTE
            STATS</code> statement, and <a class="xref" href="impala_perf_stats.html#perf_stats">Table and Column Statistics</a> for how to use the
            statistics to improve query performance.
          </p>

        </li>


        <li class="li">
          <p class="p">
            Performance improvements for partition pruning. This feature reduces the time spent in query planning,
            for partitioned tables with thousands of partitions. Previously, Impala typically queried tables with
            up to approximately 3000 partitions. With the performance improvement in partition pruning, now Impala
            can comfortably handle tables with tens of thousands of partitions. <span class="ph">See
            <a class="xref" href="impala_partitioning.html#partition_pruning">Partition Pruning for Queries</a> for information about partition pruning.</span>
          </p>

        </li>


        <li class="li">
          <p class="p">
            The documentation provides additional guidance for planning tasks. <span class="ph">See
            <a class="xref" href="impala_planning.html#planning">Planning for Impala Deployment</a>.</span>
          </p>

        </li>


        <li class="li">
          <p class="p">
            The <span class="keyword cmdname">impala-shell</span> interpreter now supports UTF-8 characters for input and output. You
            can control whether <span class="keyword cmdname">impala-shell</span> ignores invalid Unicode code points through the
            <code class="ph codeph">--strict_unicode</code> option. (Although this option is removed in Impala 2.0.)
          </p>

        </li>

      </ul>


    </div>


  </div>


  <div class="topic concept nested1" aria-labelledby="ariaid-title18" id="new_features_132">

    <h2 class="title topictitle2" id="ariaid-title18">New Features in <span class="keyword">Impala 1.3.2</span></h2>


    <div class="body conbody">

      <p class="p">
        No new features. This point release is exclusively a bug fix release for the IMPALA-1019 issue related to
        HDFS caching.
      </p>


    </div>


  </div>


  <div class="topic concept nested1" aria-labelledby="ariaid-title19" id="new_features_131">

    <h2 class="title topictitle2" id="ariaid-title19">New Features in Impala 1.3.1</h2>


    <div class="body conbody">

      <p class="p">
        This point release is primarily a vehicle to deliver bug fixes. Any new features are minor changes
        resulting from fixes for performance, reliability, or usability issues.
      </p>


      <ul class="ul">
        <li class="li">
          <p class="p">
            A new <span class="keyword cmdname">impalad</span> startup option, <code class="ph codeph">--insert_inherit_permissions</code>, causes
            Impala <code class="ph codeph">INSERT</code> statements to create each new partition with the same HDFS permissions
            as its parent directory. By default, <code class="ph codeph">INSERT</code> statements create directories for new
            partitions using default HDFS permissions. See <a class="xref" href="impala_insert.html#insert">INSERT Statement</a> for examples of
            <code class="ph codeph">INSERT</code> statements for partitioned tables.
          </p>

        </li>


        <li class="li">
          <p class="p">
            The <code class="ph codeph">SHOW FUNCTIONS</code> statement now displays the return type of each function, in
            addition to the types of its arguments. See <a class="xref" href="impala_show.html#show">SHOW Statement</a> for examples.
          </p>

        </li>


        <li class="li">
          <p class="p">
            You can now specify the clause <code class="ph codeph">FIELDS TERMINATED BY '\0'</code> with a <code class="ph codeph">CREATE
            TABLE</code> statement to use text data files that use ASCII 0 (<code class="ph codeph">nul</code>) characters as a
            delimiter. See <a class="xref" href="impala_txtfile.html#txtfile">Using Text Data Files with Impala Tables</a> for details.
          </p>

        </li>


        <li class="li">
          <p class="p">
        In Impala 1.3.1 and higher, the <code class="ph codeph">REGEXP</code> and <code class="ph codeph">RLIKE</code> operators now match a
        regular expression string that occurs anywhere inside the target string, the same as if the regular
        expression was enclosed on each side by <code class="ph codeph">.*</code>. See
        <a class="xref" href="../shared/../topics/impala_operators.html#regexp">REGEXP Operator</a> for examples. Previously, these operators only
        succeeded when the regular expression matched the entire target string. This change improves compatibility
        with the regular expression support for popular database systems. There is no change to the behavior of the
        <code class="ph codeph">regexp_extract()</code> and <code class="ph codeph">regexp_replace()</code> built-in functions.
      </p>

        </li>

      </ul>


    </div>


  </div>


  <div class="topic concept nested1" aria-labelledby="ariaid-title20" id="new_features_130">

    <h2 class="title topictitle2" id="ariaid-title20">New Features in <span class="keyword">Impala 1.3</span></h2>


    <div class="body conbody">

      <ul class="ul">
        <li class="li">
          <p class="p">
            The admission control feature lets you control and prioritize the volume and resource consumption of
            concurrent queries. This mechanism reduces spikes in resource usage, helping Impala to run alongside
            other kinds of workloads on a busy cluster. It also provides more user-friendly conflict resolution
            when multiple memory-intensive queries are submitted concurrently, avoiding resource contention that
            formerly resulted in out-of-memory errors. See <a class="xref" href="impala_admission.html#admission_control">Admission Control and Query Queuing</a>
            for details.
          </p>

        </li>


        <li class="li">
          <p class="p">
            Enhanced <code class="ph codeph">EXPLAIN</code> plans provide more detail in an easier-to-read format. Now there are
            four levels of verbosity: the <code class="ph codeph">EXPLAIN_LEVEL</code> option can be set from 0 (most concise) to
            3 (most verbose). See <a class="xref" href="impala_explain.html#explain">EXPLAIN Statement</a> for syntax and
            <a class="xref" href="impala_explain_plan.html#explain_plan">Understanding Impala Query Performance - EXPLAIN Plans and Query Profiles</a> for usage information.
          </p>

        </li>


        <li class="li">
          <p class="p">
            The <code class="ph codeph">TIMESTAMP</code> data type accepts more kinds of input string formats through the
            <code class="ph codeph">UNIX_TIMESTAMP</code> function, and produces more varieties of string formats through the
            <code class="ph codeph">FROM_UNIXTIME</code> function. The documentation now also lists more functions for date
            arithmetic, used for adding and subtracting <code class="ph codeph">INTERVAL</code> expressions from
            <code class="ph codeph">TIMESTAMP</code> values. See <a class="xref" href="impala_datetime_functions.html#datetime_functions">Impala Date and Time Functions</a>
            for details.
          </p>

        </li>


        <li class="li">
          <p class="p">
            New conditional functions, <code class="ph codeph">NULLIF()</code>, <code class="ph codeph">NULLIFZERO()</code>, and
            <code class="ph codeph">ZEROIFNULL()</code>, simplify porting SQL containing vendor extensions to Impala. See
            <a class="xref" href="impala_conditional_functions.html#conditional_functions">Impala Conditional Functions</a> for details.
          </p>

        </li>


        <li class="li">
          <p class="p">
            New utility function, <code class="ph codeph">CURRENT_DATABASE()</code>. See
            <a class="xref" href="impala_misc_functions.html#misc_functions">Impala Miscellaneous Functions</a> for details.
          </p>

        </li>


        <li class="li">
          <p class="p">
            Integration with the YARN resource management framework. This
            feature makes use of the underlying YARN service, plus an additional service (Llama) that coordinates
            requests to YARN for Impala resources, so that the Impala query only proceeds when all requested
            resources are available. See <a class="xref" href="impala_resource_management.html#resource_management">Resource Management for Impala</a> for full
            details.
          </p>


          <p class="p">
            On the Impala side, this feature involves some new startup options for the <span class="keyword cmdname">impalad</span>
            daemon:
          </p>

          <ul class="ul">
            <li class="li">
              <code class="ph codeph">-enable_rm</code>
            </li>


            <li class="li">
              <code class="ph codeph">-llama_host</code>
            </li>


            <li class="li">
              <code class="ph codeph">-llama_port</code>
            </li>


            <li class="li">
              <code class="ph codeph">-llama_callback_port</code>
            </li>


            <li class="li">
              <code class="ph codeph">-cgroup_hierarchy_path</code>
            </li>

          </ul>

          <p class="p">
            For details of these startup options, see <a class="xref" href="impala_config_options.html#config_options">Modifying Impala Startup Options</a>.
          </p>


          <p class="p">
            This feature also involves several new or changed query options that you can set through the
            <span class="keyword cmdname">impala-shell</span> interpreter and apply within a specific session:
          </p>

          <ul class="ul">
            <li class="li">
              <code class="ph codeph">MEM_LIMIT</code>: the function of this existing option changes when Impala resource
              management is enabled.
            </li>


            <li class="li">
              <code class="ph codeph">REQUEST_POOL</code>: a new option. (Renamed to <code class="ph codeph">RESOURCE_POOL</code> in Impala
              1.3.0.)
            </li>


            <li class="li">
              <code class="ph codeph">V_CPU_CORES</code>: a new option.
            </li>


            <li class="li">
              <code class="ph codeph">RESERVATION_REQUEST_TIMEOUT</code>: a new option.
            </li>

          </ul>

          <p class="p">
            For details of these query options, see <a class="xref" href="impala_resource_management.html#rm_query_options">impala-shell Query Options for Resource Management</a>.
          </p>

        </li>

      </ul>


    </div>


  </div>


  <div class="topic concept nested1" aria-labelledby="ariaid-title21" id="new_features_124">

    <h2 class="title topictitle2" id="ariaid-title21">New Features in Impala 1.2.4</h2>


    <div class="body conbody">

      <div class="note note"><span class="notetitle">Note:</span>
        Impala 1.2.4 is primarily a bug fix release for Impala 1.2.3, plus some performance
        enhancements for the catalog server to minimize startup and DDL wait times for Impala deployments with
        large numbers of databases, tables, and partitions.
      </div>


      <ul class="ul">
        <li class="li">
          <p class="p">
            On Impala startup, the metadata loading and synchronization mechanism has been improved and optimized,
            to give more responsiveness when starting Impala on a system with a large number of databases, tables,
            or partitions. The initial metadata loading happens in the background, allowing queries to be run
            before the entire process is finished. When a query refers to a table whose metadata is not yet loaded,
            the query waits until the metadata for that table is loaded, and the load operation for that table is
            prioritized to happen first.
          </p>

        </li>


        <li class="li">
          <p class="p">
            Formerly, if you created a new table in Hive, you had to issue the <code class="ph codeph">INVALIDATE METADATA</code>
            statement (with no table name) which was an expensive operation that reloaded metadata for all tables.
            Impala did not recognize the name of the Hive-created table, so you could not do <code class="ph codeph">INVALIDATE
            METADATA <var class="keyword varname">new_table</var></code> to get the metadata for just that one table. Now, when
            you issue <code class="ph codeph">INVALIDATE METADATA <var class="keyword varname">table_name</var></code>, Impala checks to see if
            that name represents a table created in Hive, and if so recognizes the new table and loads the metadata
            for it. Additionally, if the new table is in a database that was newly created in Hive, Impala also
            recognizes the new database.
          </p>

        </li>


        <li class="li">
          <p class="p">
            If you issue <code class="ph codeph">INVALIDATE METADATA <var class="keyword varname">table_name</var></code> and the table has been
            dropped through Hive, Impala will recognize that the table no longer exists.
          </p>

        </li>


        <li class="li">
          <p class="p">
            New startup options let you control the parallelism of the metadata loading during startup for the
            <span class="keyword cmdname">catalogd</span> daemon:
          </p>

          <ul class="ul">
            <li class="li">
              <p class="p">
                <code class="ph codeph">--load_catalog_in_background</code> makes Impala load and cache metadata using background
                threads after startup. It is <code class="ph codeph">true</code> by default. Previously, a system with a large
                number of databases, tables, or partitions could be unresponsive or even time out during startup.
              </p>

            </li>


            <li class="li">
              <p class="p">
                <code class="ph codeph">--num_metadata_loading_threads</code> determines how much parallelism Impala devotes to
                loading metadata in the background. The default is 16. You might increase this value for systems
                with huge numbers of databases, tables, or partitions. You might lower this value for busy systems
                that are CPU-constrained due to jobs from components other than Impala.
              </p>

            </li>

          </ul>

        </li>

      </ul>


    </div>


  </div>


  <div class="topic concept nested1" aria-labelledby="ariaid-title22" id="new_features_123">

    <h2 class="title topictitle2" id="ariaid-title22">New Features in Impala 1.2.3</h2>


    <div class="body conbody">

      <p class="p">
        Impala 1.2.3 contains exactly the same feature set as Impala 1.2.2. Its only difference is one additional
        fix for compatibility with Parquet files generated outside of Impala by components such as Hive, Pig, or
        MapReduce. If you are upgrading from Impala 1.2.1 or earlier, see
        <a class="xref" href="impala_new_features.html#new_features_122">New Features in Impala 1.2.2</a> for the latest added features.
      </p>


    </div>


  </div>


  <div class="topic concept nested1" aria-labelledby="ariaid-title23" id="new_features_122">

    <h2 class="title topictitle2" id="ariaid-title23">New Features in Impala 1.2.2</h2>


    <div class="body conbody">

      <p class="p">
        Impala 1.2.2 includes new features for performance, security, and flexibility. The major enhancements over
        1.2.1 are performance related, primarily for join queries.
      </p>


      <p class="p">
        New user-visible features include:
      </p>


      <ul class="ul">
        <li class="li">
          <p class="p">
            Join order optimizations. This highly valuable feature automatically distributes and parallelizes the
            work for a join query to minimize disk I/O and network traffic. The automatic optimization reduces the
            need to use query hints or to rewrite join queries with the tables in a specific order based on size or
            cardinality. The new <code class="ph codeph">COMPUTE STATS</code> statement gathers statistical information about
            each table that is crucial for enabling the join optimizations. See
            <a class="xref" href="impala_perf_joins.html#perf_joins">Performance Considerations for Join Queries</a> for details.
          </p>

        </li>


        <li class="li">
          <p class="p">
            <code class="ph codeph">COMPUTE STATS</code> statement to collect both table statistics and column statistics with a
            single statement. Intended to be more comprehensive, efficient, and reliable than the corresponding
            Hive <code class="ph codeph">ANALYZE TABLE</code> statement, which collects statistics in multiple phases through
            MapReduce jobs. These statistics are important for query planning for join queries, queries on
            partitioned tables, and other types of data-intensive operations. For optimal planning of join queries,
            you need to collect statistics for each table involved in the join. See
            <a class="xref" href="impala_compute_stats.html#compute_stats">COMPUTE STATS Statement</a> for details.
          </p>

        </li>


        <li class="li">
          <p class="p">
            Reordering of tables in a join query can be overridden by the <code class="ph codeph">STRAIGHT_JOIN</code> operator,
            allowing you to fine-tune the planning of the join query if necessary, by using the original technique
            of ordering the joined tables in descending order of size. See
            <a class="xref" href="impala_perf_joins.html#straight_join">Overriding Join Reordering with STRAIGHT_JOIN</a> for details.
          </p>

        </li>


        <li class="li">
          <p class="p">
            The <code class="ph codeph">CROSS JOIN</code> clause in the
            <code class="ph codeph"><a class="xref" href="impala_select.html#select">SELECT</a></code> statement to allow Cartesian
            products in queries, that is, joins without an equality comparison between columns in both tables.
            Because such queries must be carefully checked to avoid accidental overconsumption of memory, you must
            use the <code class="ph codeph">CROSS JOIN</code> operator to explicitly select this kind of join. See
            <a class="xref" href="impala_tutorial.html#tut_cross_join">Cross Joins and Cartesian Products with the CROSS JOIN Operator</a> for examples.
          </p>

        </li>


        <li class="li">
          <p class="p">
            The <code class="ph codeph">ALTER TABLE</code> statement has new clauses that let you fine-tune table statistics. You
            can use this technique as a less-expensive way to update specific statistics, in case the statistics
            become stale, or to experiment with the effects of different data distributions on query planning.
          </p>

        </li>


        <li class="li">
          <p class="p">
            LDAP username/password authentication in JDBC/ODBC. See <a class="xref" href="impala_ldap.html#ldap">Enabling LDAP Authentication for Impala</a> for
            details.
          </p>

        </li>


        <li class="li">
          <p class="p">
            <a class="xref" href="impala_string_functions.html#string_functions__group_concat">GROUP_CONCAT()</a> aggregate
            function to concatenate column values across all rows of a result set.
          </p>

        </li>


        <li class="li">
          <p class="p">
            The <code class="ph codeph">INSERT</code> statement now accepts hints, <code class="ph codeph">[SHUFFLE]</code> and
            <code class="ph codeph">[NOSHUFFLE]</code>, to influence the way work is redistributed during
            <code class="ph codeph">INSERT...SELECT</code> operations. The hints are primarily useful for inserting into
            partitioned Parquet tables, where using the <code class="ph codeph">[SHUFFLE]</code> hint can avoid problems due to
            memory consumption and simultaneous open files in HDFS, by collecting all the new data for each
            partition on a specific node.
          </p>

        </li>


        <li class="li">
          <p class="p">
            Several built-in functions and operators are now overloaded for more numeric data types, to reduce the
            requirement to use <code class="ph codeph">CAST()</code> for type coercion in <code class="ph codeph">INSERT</code> statements. For
            example, the expression <code class="ph codeph">2+2</code> in an <code class="ph codeph">INSERT</code> statement formerly produced
            a <code class="ph codeph">BIGINT</code> result, requiring a <code class="ph codeph">CAST()</code> to be stored in an
            <code class="ph codeph">INT</code> variable. Now, addition, subtraction, and multiplication only produce a result
            that is one step <span class="q">"bigger"</span> than their arguments, and numeric and conditional functions can return
            <code class="ph codeph">SMALLINT</code>, <code class="ph codeph">FLOAT</code>, and other smaller types rather than always
            <code class="ph codeph">BIGINT</code> or <code class="ph codeph">DOUBLE</code>.
          </p>

        </li>


        <li class="li">
          <p class="p">
            New <code class="ph codeph">fnv_hash()</code> built-in function for constructing hashed values. See
            <a class="xref" href="impala_math_functions.html#math_functions">Impala Mathematical Functions</a> for details.
          </p>

        </li>


        <li class="li">
          <p class="p">
            The clause <code class="ph codeph">STORED AS PARQUET</code> is accepted as an equivalent for <code class="ph codeph">STORED AS
            PARQUETFILE</code>. This more concise form is recommended for new code.
          </p>

        </li>

      </ul>


      <p class="p">
        Because Impala 1.2.2 builds on a number of features introduced in 1.2.1, if you are upgrading from an older
        1.1.x release straight to 1.2.2, also review <a class="xref" href="impala_new_features.html#new_features_121">New Features in Impala 1.2.1</a> to see
        features such as the <code class="ph codeph">SHOW TABLE STATS</code> and <code class="ph codeph">SHOW COLUMN STATS</code> statements,
        and user-defined functions (UDFs).
      </p>


    </div>


  </div>


  <div class="topic concept nested1" aria-labelledby="ariaid-title24" id="new_features_121">

    <h2 class="title topictitle2" id="ariaid-title24">New Features in Impala 1.2.1</h2>


    <div class="body conbody">

      <div class="note note"><span class="notetitle">Note:</span>
        The Impala 1.2.1 feature set is a superset of features in the Impala 1.2.0 beta, with the
        exception of resource management, which relies on resource management infrastructure in the
        underlying Hadoop distribution.
      </div>


      <p class="p">
        Impala 1.2.1 includes new features for security, performance, and flexibility.
      </p>


      <p class="p">
        New user-visible features include:
      </p>


      <ul class="ul">
        <li class="li">
          <p class="p">
            <code class="ph codeph">SHOW TABLE STATS <var class="keyword varname">table_name</var></code> and <code class="ph codeph">SHOW COLUMN STATS
            <var class="keyword varname">table_name</var></code> statements, to verify that statistics are available and to see
            the values used during query planning.
          </p>

        </li>


        <li class="li">
          <p class="p">
            <code class="ph codeph">CREATE TABLE AS SELECT</code> syntax, to create a new table and transfer data into it in a
            single operation.
          </p>

        </li>


        <li class="li">
          <p class="p">
            <code class="ph codeph">OFFSET</code> clause, for use with the <code class="ph codeph">ORDER BY</code> and <code class="ph codeph">LIMIT</code>
            clauses to produce <span class="q">"paged"</span> result sets such as items 1-10, then 11-20, and so on.
          </p>

        </li>


        <li class="li">
          <p class="p">
            <code class="ph codeph">NULLS FIRST</code> and <code class="ph codeph">NULLS LAST</code> clauses to ensure consistent placement of
            <code class="ph codeph">NULL</code> values in <code class="ph codeph">ORDER BY</code> queries.
          </p>

        </li>


        <li class="li">
          <p class="p">
            New <a class="xref" href="impala_functions.html#builtins">built-in functions</a>: <code class="ph codeph">least()</code>,
            <code class="ph codeph">greatest()</code>, <code class="ph codeph">initcap()</code>.
          </p>

        </li>


        <li class="li">
          <p class="p">
            New aggregate function: <code class="ph codeph">ndv()</code>, a fast alternative to <code class="ph codeph">COUNT(DISTINCT
            <var class="keyword varname">col</var>)</code> returning an approximate result.
          </p>

        </li>


        <li class="li">
          <p class="p">
            The <code class="ph codeph">LIMIT</code> clause can now accept a numeric expression as an argument, rather than only
            a literal constant.
          </p>

        </li>


        <li class="li">
          <p class="p">
            The <code class="ph codeph">SHOW CREATE TABLE</code> statement displays the end result of all the <code class="ph codeph">CREATE
            TABLE</code> and <code class="ph codeph">ALTER TABLE</code> statements for a particular table. You can use the
            output to produce a simplified setup script for a schema.
          </p>

        </li>


        <li class="li">
          <p class="p">
            The <code class="ph codeph">--idle_query_timeout</code> and <code class="ph codeph">--idle_session_timeout</code> options for
            <span class="keyword cmdname">impalad</span> control the time intervals after which idle queries are cancelled, and idle
            sessions expire. See <a class="xref" href="impala_timeouts.html#timeouts">Setting Timeout Periods for Daemons, Queries, and Sessions</a> for details.
          </p>

        </li>


        <li class="li">
          <p class="p">
            User-defined functions (UDFs). This feature lets you transform data in very flexible ways, which is
            important when using Impala as part of an ETL or ELT pipeline. Prior to Impala 1.2, using UDFs required
            switching into Hive. Impala 1.2 can run scalar UDFs and user-defined aggregate functions (UDAs). Impala
            can run high-performance functions written in C++, or you can reuse existing Hive functions written in
            Java.
          </p>


          <p class="p">
            You create UDFs through the <code class="ph codeph">CREATE FUNCTION</code> statement and drop them through the
            <code class="ph codeph">DROP FUNCTION</code> statement. See <a class="xref" href="impala_udf.html#udfs">Impala User-Defined Functions (UDFs)</a> for instructions about
            coding, building, and deploying UDFs, and <a class="xref" href="impala_create_function.html#create_function">CREATE FUNCTION Statement</a> and
            <a class="xref" href="impala_drop_function.html#drop_function">DROP FUNCTION Statement</a> for related SQL syntax.
          </p>

        </li>


        <li class="li">
          <p class="p">
            A new service automatically propagates changes to table data and metadata made by one Impala node,
            sending the new or updated metadata to all the other Impala nodes. The automatic synchronization
            mechanism eliminates the need to use the <code class="ph codeph">INVALIDATE METADATA</code> and
            <code class="ph codeph">REFRESH</code> statements after issuing Impala statements such as <code class="ph codeph">CREATE
            TABLE</code>, <code class="ph codeph">ALTER TABLE</code>, <code class="ph codeph">DROP TABLE</code>, <code class="ph codeph">INSERT</code>, and
            <code class="ph codeph">LOAD DATA</code>.
          </p>


          <p class="p">
            For even more precise synchronization, you can enable the
            <code class="ph codeph"><a class="xref" href="impala_sync_ddl.html#sync_ddl">SYNC_DDL</a></code> query option before issuing
            a DDL, <code class="ph codeph">INSERT</code>, or <code class="ph codeph">LOAD DATA</code> statement. This option causes the
            statement to wait, returning only after the catalog service has broadcast the applicable changes to all
            Impala nodes in the cluster.
          </p>


          <div class="note note"><span class="notetitle">Note:</span>
            <p class="p">
              Because the catalog service only monitors operations performed through Impala, <code class="ph codeph">INVALIDATE
              METADATA</code> and <code class="ph codeph">REFRESH</code> are still needed on the Impala side after creating new
              tables or loading data through the Hive shell or by manipulating data files directly in HDFS. Because
              the catalog service broadcasts the result of the <code class="ph codeph">REFRESH</code> and <code class="ph codeph">INVALIDATE
              METADATA</code> statements to all Impala nodes, when you do need to use those statements, you can
              do so a single time rather than on every Impala node.
            </p>

          </div>


          <p class="p">
            This service is implemented by the <span class="keyword cmdname">catalogd</span> daemon. See
            <a class="xref" href="impala_components.html#intro_catalogd">The Impala Catalog Service</a> for details.
          </p>

        </li>


        <li class="li">
          <p class="p">
            The <code class="ph codeph">CREATE TABLE</code> and <code class="ph codeph">ALTER TABLE</code> statements have new clauses
            <code class="ph codeph">TBLPROPERTIES</code> and <code class="ph codeph">WITH SERDEPROPERTIES</code>. The
            <code class="ph codeph">TBLPROPERTIES</code> clause lets you associate arbitrary items of metadata with a particular
            table as key-value pairs. The <code class="ph codeph">WITH SERDEPROPERTIES</code> clause lets you specify the
            serializer/deserializer (SerDes) classes that read and write data for a table; although Impala does not
            make use of these properties, sometimes particular values are needed for Hive compatibility. See
            <a class="xref" href="impala_create_table.html#create_table">CREATE TABLE Statement</a> and
            <a class="xref" href="impala_alter_table.html#alter_table">ALTER TABLE Statement</a> for details.
          </p>

        </li>


        <li class="li">
          <p class="p">
            Delegation support lets you authorize certain OS users associated with applications (for example,
            <code class="ph codeph">hue</code>), to submit requests using the credentials of other users.
            See <a class="xref" href="impala_delegation.html#delegation">Configuring Impala Delegation for Hue and BI Tools</a> for details.
          </p>

        </li>


        <li class="li">
          <p class="p">
            Enhancements to <code class="ph codeph">EXPLAIN</code> output. In particular, when you enable the new
            <code class="ph codeph">EXPLAIN_LEVEL</code> query option, the <code class="ph codeph">EXPLAIN</code> and <code class="ph codeph">PROFILE</code>
            statements produce more verbose output showing estimated resource requirements and whether table and
            column statistics are available for the applicable tables and columns. See
            <a class="xref" href="impala_explain.html#explain">EXPLAIN Statement</a> for details.
          </p>

        </li>


        <li class="li">
          <p class="p">
            <code class="ph codeph">SHOW CREATE TABLE</code> summarizes the effects of the original <code class="ph codeph">CREATE TABLE</code>
            statement and any subsequent <code class="ph codeph">ALTER TABLE</code> statements, giving you a <code class="ph codeph">CREATE
            TABLE</code> statement that will re-create the current structure and layout for a table.
          </p>

        </li>


        <li class="li">
          <p class="p">
            The <code class="ph codeph">LIMIT</code> clause for queries now accepts an arithmetic expression, in addition to
            numeric literals.
          </p>

        </li>


      </ul>


    </div>


  </div>


  <div class="topic concept nested1" aria-labelledby="ariaid-title25" id="new_features_120">

    <h2 class="title topictitle2" id="ariaid-title25">New Features in Impala 1.2.0 (Beta)</h2>


    <div class="body conbody">

      <p class="p">
        The Impala 1.2.0 beta includes new features for security, performance, and flexibility.
      </p>


      <p class="p">
        New user-visible features include:
      </p>


      <ul class="ul">
        <li class="li">
          <p class="p">
            User-defined functions (UDFs). This feature lets you transform data in very flexible ways, which is
            important when using Impala as part of an ETL or ELT pipeline. Prior to Impala 1.2, using UDFs required
            switching into Hive. Impala 1.2 can run scalar UDFs and user-defined aggregate functions (UDAs). Impala
            can run high-performance functions written in C++, or you can reuse existing Hive functions written in
            Java.
          </p>


          <p class="p">
            You create UDFs through the <code class="ph codeph">CREATE FUNCTION</code> statement and drop them through the
            <code class="ph codeph">DROP FUNCTION</code> statement. See <a class="xref" href="impala_udf.html#udfs">Impala User-Defined Functions (UDFs)</a> for instructions about
            coding, building, and deploying UDFs, and <a class="xref" href="impala_create_function.html#create_function">CREATE FUNCTION Statement</a> and
            <a class="xref" href="impala_drop_function.html#drop_function">DROP FUNCTION Statement</a> for related SQL syntax.
          </p>

        </li>


        <li class="li">
          <p class="p">
            A new service automatically propagates changes to table data and metadata made by one Impala node,
            sending the new or updated metadata to all the other Impala nodes. The automatic synchronization
            mechanism eliminates the need to use the <code class="ph codeph">INVALIDATE METADATA</code> and
            <code class="ph codeph">REFRESH</code> statements after issuing Impala statements such as <code class="ph codeph">CREATE
            TABLE</code>, <code class="ph codeph">ALTER TABLE</code>, <code class="ph codeph">DROP TABLE</code>, <code class="ph codeph">INSERT</code>, and
            <code class="ph codeph">LOAD DATA</code>.
          </p>


          <div class="note note"><span class="notetitle">Note:</span>
            <p class="p">
              Because this service only monitors operations performed through Impala, <code class="ph codeph">INVALIDATE
              METADATA</code> and <code class="ph codeph">REFRESH</code> are still needed on the Impala side after creating new
              tables or loading data through the Hive shell or by manipulating data files directly in HDFS. Because
              the catalog service broadcasts the result of the <code class="ph codeph">REFRESH</code> and <code class="ph codeph">INVALIDATE
              METADATA</code> statements to all Impala nodes, when you do need to use those statements, you can
              do so a single time rather than on every Impala node.
            </p>

          </div>


          <p class="p">
            This service is implemented by the <span class="keyword cmdname">catalogd</span> daemon. See
            <a class="xref" href="impala_components.html#intro_catalogd">The Impala Catalog Service</a> for details.
          </p>

        </li>


        <li class="li">
          <p class="p">
            Integration with the YARN resource management framework. This
            feature makes use of the underlying YARN service, plus an additional service (Llama) that coordinates
            requests to YARN for Impala resources, so that the Impala query only proceeds when all requested
            resources are available. See <a class="xref" href="impala_resource_management.html#resource_management">Resource Management for Impala</a> for full
            details.
          </p>


          <p class="p">
            On the Impala side, this feature involves some new startup options for the <span class="keyword cmdname">impalad</span>
            daemon:
          </p>

          <ul class="ul">
            <li class="li">
              <code class="ph codeph">-enable_rm</code>
            </li>


            <li class="li">
              <code class="ph codeph">-llama_host</code>
            </li>


            <li class="li">
              <code class="ph codeph">-llama_port</code>
            </li>


            <li class="li">
              <code class="ph codeph">-llama_callback_port</code>
            </li>


            <li class="li">
              <code class="ph codeph">-cgroup_hierarchy_path</code>
            </li>

          </ul>

          <p class="p">
            For details of these startup options, see <a class="xref" href="impala_config_options.html#config_options">Modifying Impala Startup Options</a>.
          </p>


          <p class="p">
            This feature also involves several new or changed query options that you can set through the
            <span class="keyword cmdname">impala-shell</span> interpreter and apply within a specific session:
          </p>

          <ul class="ul">
            <li class="li">
              <code class="ph codeph">MEM_LIMIT</code>: the function of this existing option changes when Impala resource
              management is enabled.
            </li>


            <li class="li">
              <code class="ph codeph">YARN_POOL</code>: a new option. (Renamed to <code class="ph codeph">RESOURCE_POOL</code> in Impala
              1.3.0.)
            </li>


            <li class="li">
              <code class="ph codeph">V_CPU_CORES</code>: a new option.
            </li>


            <li class="li">
              <code class="ph codeph">RESERVATION_REQUEST_TIMEOUT</code>: a new option.
            </li>

          </ul>

          <p class="p">
            For details of these query options, see <a class="xref" href="impala_resource_management.html#rm_query_options">impala-shell Query Options for Resource Management</a>.
          </p>

        </li>


        <li class="li">
          <p class="p">
            <code class="ph codeph">CREATE TABLE ... AS SELECT</code> syntax, to create a table and copy data into it in a single
            operation. See <a class="xref" href="impala_create_table.html#create_table">CREATE TABLE Statement</a> for details.
          </p>

        </li>


        <li class="li">
          <p class="p">
            The <code class="ph codeph">CREATE TABLE</code> and <code class="ph codeph">ALTER TABLE</code> statements have a new
            <code class="ph codeph">TBLPROPERTIES</code> clause that lets you associate arbitrary items of metadata with a
            particular table as key-value pairs. See <a class="xref" href="impala_create_table.html#create_table">CREATE TABLE Statement</a> and
            <a class="xref" href="impala_alter_table.html#alter_table">ALTER TABLE Statement</a> for details.
          </p>

        </li>


        <li class="li">
          <p class="p">
            Delegation support lets you authorize certain OS users associated with applications (for example,
            <code class="ph codeph">hue</code>), to submit requests using the credentials of other users.
            See <a class="xref" href="impala_delegation.html#delegation">Configuring Impala Delegation for Hue and BI Tools</a> for details.
          </p>

        </li>


        <li class="li">
          <p class="p">
            Enhancements to <code class="ph codeph">EXPLAIN</code> output. In particular, when you enable the new
            <code class="ph codeph">EXPLAIN_LEVEL</code> query option, the <code class="ph codeph">EXPLAIN</code> and <code class="ph codeph">PROFILE</code>
            statements produce more verbose output showing estimated resource requirements and whether table and
            column statistics are available for the applicable tables and columns. See
            <a class="xref" href="impala_explain.html#explain">EXPLAIN Statement</a> for details.
          </p>

        </li>


      </ul>


    </div>


  </div>


  <div class="topic concept nested1" aria-labelledby="ariaid-title26" id="new_features_111">

    <h2 class="title topictitle2" id="ariaid-title26">New Features in Impala 1.1.1</h2>


    <div class="body conbody">

      <p class="p">
        Impala 1.1.1 includes new features for security and stability.
      </p>


      <p class="p">
        New user-visible features include:
      </p>


      <ul class="ul">
        <li class="li">
          Additional security feature: auditing. New startup options for <span class="keyword cmdname">impalad</span> let you capture
          information about Impala queries that succeed or are blocked due to insufficient privileges. For details,
          see <a class="xref" href="impala_security.html#security">Impala Security</a>.
        </li>


        <li class="li">
          Parquet data files generated by Impala 1.1.1 are now compatible with the Parquet support in Hive. See
          <a class="xref" href="impala_incompatible_changes.html#incompatible_changes">Incompatible Changes and Limitations in Apache Impala</a> for the procedure to update older
          Impala-created Parquet files to be compatible with the Hive Parquet support.
        </li>


        <li class="li">
          Additional improvements to stability and resource utilization for Impala queries.
        </li>


        <li class="li">
          Additional enhancements for compatibility with existing file formats.
        </li>

      </ul>


    </div>


  </div>


  <div class="topic concept nested1" aria-labelledby="ariaid-title27" id="new_features_11">

    <h2 class="title topictitle2" id="ariaid-title27">New Features in Impala 1.1</h2>


    <div class="body conbody">

      <p class="p">
        Impala 1.1 includes new features for security, performance, and usability.
      </p>


      <p class="p">
        New user-visible features include:
      </p>


      <ul class="ul">
        <li class="li">
          Extensive new security features, built on top of the Sentry open source project. Impala now supports
          fine-grained authorization based on roles. A policy file determines which privileges on which schema
          objects (servers, databases, tables, and HDFS paths) are available to users based on their membership in
          groups. By assigning privileges for views, you can control access to table data at the column level. For
          details, see <a class="xref" href="impala_security.html#security">Impala Security</a>.
        </li>


        <li class="li">
          Impala can now create, alter, drop, and query views. Views provide a flexible way to set up simple
          aliases for complex queries; hide query details from applications and users; and simplify maintenance as
          you rename or reorganize databases, tables, and columns. See the overview section
          <a class="xref" href="impala_views.html#views">Overview of Impala Views</a> and the statements
          <a class="xref" href="impala_create_view.html#create_view">CREATE VIEW Statement</a>, <a class="xref" href="impala_alter_view.html#alter_view">ALTER VIEW Statement</a>, and
          <a class="xref" href="impala_drop_view.html#drop_view">DROP VIEW Statement</a>.
        </li>


        <li class="li">
          Performance is improved through a number of automatic optimizations. Resource consumption is also reduced
          for Impala queries. These improvements apply broadly across all kinds of workloads and file formats. The
          major areas of performance enhancement include:
          <ul class="ul">
            <li class="li">
              Improved disk and thread scheduling, which applies to all queries.
            </li>


            <li class="li">
              Improved hash join and aggregation performance, which applies to queries with large build tables or a
              large number of groups.
            </li>


            <li class="li">
              Dictionary encoding with Parquet, which applies to Parquet tables with short string columns.
            </li>


            <li class="li">
              Improved performance on systems with SSDs, which applies to all queries and file formats.
            </li>

          </ul>

        </li>


        <li class="li">
          Some new built-in functions are implemented:
          <a class="xref" href="impala_string_functions.html#string_functions__translate">translate()</a> to substitute
          characters within strings,

          <a class="xref" href="impala_misc_functions.html#misc_functions__user">user()</a> to check the login ID of the
          connected user.

        </li>


        <li class="li">
          The new <code class="ph codeph">WITH</code> clause for <code class="ph codeph">SELECT</code> statements lets you simplify complicated
          queries in a way similar to creating a view. The effects of the <code class="ph codeph">WITH</code> clause only last
          for the duration of one query, unlike views, which are persistent schema objects that can be used by
          multiple sessions or applications. See <a class="xref" href="impala_with.html#with">WITH Clause</a>.
        </li>


        <li class="li">
          An enhancement to <code class="ph codeph">DESCRIBE</code> statement, <code class="ph codeph">DESCRIBE FORMATTED
          <var class="keyword varname">table_name</var></code>, displays more detailed information about the table. This
          information includes the file format, location, delimiter, ownership, external or internal, creation and
          access times, and partitions. The information is returned as a result set that can be interpreted and
          used by a management or monitoring application. See <a class="xref" href="impala_describe.html#describe">DESCRIBE Statement</a>.
        </li>


        <li class="li">
          You can now insert a subset of columns for a table, with other columns being left as all
          <code class="ph codeph">NULL</code> values. Or you can specify the columns in any order in the destination table,
          rather than having to match the order of the corresponding columns in the source. <code class="ph codeph">VALUES</code>
          clause. This feature is known as <span class="q">"column permutation"</span>. See <a class="xref" href="impala_insert.html#insert">INSERT Statement</a>.
        </li>


        <li class="li">
          The new <code class="ph codeph">LOAD DATA</code> statement lets you load data into a table directly from an HDFS data
          file. This technique lets you minimize the number of steps in your ETL process, and provides more
          flexibility. For example, you can bring data into an Impala table in one step. Formerly, you might have
          created an external table where the data files are not entirely under your control, or copied the data
          files to Impala data directories manually, or loaded the original data into one table and then used the
          <code class="ph codeph">INSERT</code> statement to copy it to a new table with a different file format, partitioning
          scheme, and so on. See <a class="xref" href="impala_load_data.html#load_data">LOAD DATA Statement</a>.
        </li>


        <li class="li">
          Improvements to Impala-HBase integration:
          <ul class="ul">
            <li class="li">
              New query options for HBase performance:
              <code class="ph codeph"><a class="xref" href="impala_hbase_cache_blocks.html#hbase_cache_blocks">HBASE_CACHE_BLOCKS</a></code>
              and <code class="ph codeph"><a class="xref" href="impala_hbase_caching.html#hbase_caching">HBASE_CACHING</a></code>.
            </li>


            <li class="li">
              Support for binary data types in HBase tables. See <a class="xref" href="impala_hbase.html#hbase_types">Supported Data Types for HBase Columns</a> for
              details.
            </li>

          </ul>

        </li>


        <li class="li">
          You can issue <code class="ph codeph">REFRESH</code> as a SQL statement through any of the programming interfaces that
          Impala supports. <code class="ph codeph">REFRESH</code> formerly had to be issued as a command through the
          <span class="keyword cmdname">impala-shell</span> interpreter, and was not available through a JDBC or ODBC API call. As
          part of this change, the functionality of the <code class="ph codeph">REFRESH</code> statement is divided between two
          statements. In Impala 1.1, <code class="ph codeph">REFRESH</code> requires a table name argument and immediately
          reloads the metadata; the new <code class="ph codeph">INVALIDATE METADATA</code> statement works the same as the Impala
          1.0 <code class="ph codeph">REFRESH</code> did: the table name argument is optional, and the metadata for one or all
          tables is marked as stale, but not actually reloaded until the table is queried. When you create a new
          table in the Hive shell or through a different Impala node, you must enter <code class="ph codeph">INVALIDATE
          METADATA</code> with no table parameter before you can see the new table in
          <span class="keyword cmdname">impala-shell</span>. See <a class="xref" href="impala_refresh.html#refresh">REFRESH Statement</a> and
          <a class="xref" href="impala_invalidate_metadata.html#invalidate_metadata">INVALIDATE METADATA Statement</a>.
        </li>

      </ul>


    </div>


  </div>


  <div class="topic concept nested1" aria-labelledby="ariaid-title28" id="new_features_101">

    <h2 class="title topictitle2" id="ariaid-title28">New Features in Impala 1.0.1</h2>


    <div class="body conbody">

      <p class="p">
        New user-visible features include:
      </p>


      <ul class="ul">
        <li class="li">
          The <code class="ph codeph">VALUES</code> clause lets you <code class="ph codeph">INSERT</code> one or more rows using literals,
          function return values, or other expressions. For performance and scalability, you should still use
          <code class="ph codeph">INSERT ... SELECT</code> for bringing large quantities of data into an Impala table. The
          <code class="ph codeph">VALUES</code> clause is a convenient way to set up small tables, particularly for initial
          testing of SQL features that do not require large amounts of data. See
          <a class="xref" href="impala_insert.html#values">VALUES Clause</a> for details.
        </li>


        <li class="li">
          The <code class="ph codeph">-B</code> and <code class="ph codeph">-o</code> options of the <code class="ph codeph">impala-shell</code> command can
          turn query results into delimited text files and store them in an output file. The plain text results are
          useful for using with other Hadoop components or Unix tools. In benchmark tests, it is also faster to
          produce plain rather than pretty-printed results, and write to a file rather than to the screen, giving a
          more accurate picture of the actual query time.
        </li>


        <li class="li">
          Several bug fixes. See <a class="xref" href="impala_fixed_issues.html#fixed_issues_101">Issues Fixed in the 1.0.1 Release</a> for details.
        </li>

      </ul>


    </div>


  </div>


  <div class="topic concept nested1" aria-labelledby="ariaid-title29" id="new_features_10">

    <h2 class="title topictitle2" id="ariaid-title29">New Features in Impala 1.0</h2>


    <div class="body conbody">

      <p class="p">
        This version has multiple performance improvements and adds the following functionality:
      </p>


      <ul class="ul">
        <li class="li">
          Several bug fixes. See <a class="xref" href="impala_fixed_issues.html#fixed_issues_10">Issues Fixed in the 1.0 GA Release</a>.
        </li>


        <li class="li">
          <code class="ph codeph"><a class="xref" href="impala_alter_table.html#alter_table">ALTER TABLE</a></code> statement.
        </li>


        <li class="li">
          <a class="xref" href="impala_hints.html#hints">Hints</a> to allow specifying a particular join strategy.
        </li>


        <li class="li">
          <code class="ph codeph"><a class="xref" href="impala_refresh.html#refresh">REFRESH</a></code> for a single table.
        </li>


        <li class="li">
          Dynamic resource management, allowing high concurrency for Impala queries.
        </li>

      </ul>


    </div>


  </div>


  <div class="topic concept nested1" aria-labelledby="ariaid-title30" id="new_features_07">

    <h2 class="title topictitle2" id="ariaid-title30">New Features in Version 0.7 of the Impala Beta Release</h2>


    <div class="body conbody">

      <p class="p">
        This version has multiple performance improvements and adds the following functionality:
      </p>


      <ul class="ul">
        <li class="li">
          Several bug fixes. See <a class="xref" href="impala_fixed_issues.html#fixed_issues_07">Issues Fixed in Version 0.7 of the Beta Release</a>.
        </li>


        <li class="li">
          Support for the Parquet file format. For more information on file formats, see
          <a class="xref" href="impala_file_formats.html#file_formats">How Impala Works with Hadoop File Formats</a>.
        </li>


        <li class="li">
          Added support for Avro.
        </li>


        <li class="li">
          Support for the memory limits. For more information, see the example on modifying memory limits in
          <a class="xref" href="impala_config_options.html#config_options">Modifying Impala Startup Options</a>.
        </li>


        <li class="li">
          Bigger and faster joins through the addition of partitioned joins to the already supported broadcast
          joins.
        </li>


        <li class="li">
          Fully distributed aggregations.
        </li>


        <li class="li">
          Fully distributed top-n computation.
        </li>


        <li class="li">
          Support for creating and altering tables.
        </li>


        <li class="li">
          Support for GROUP BY with floats and doubles.
        </li>

      </ul>


    </div>


  </div>


  <div class="topic concept nested1" aria-labelledby="ariaid-title31" id="new_features_06">

    <h2 class="title topictitle2" id="ariaid-title31">New Features in Version 0.6 of the Impala Beta Release</h2>


    <div class="body conbody">

      <ul class="ul">
        <li class="li">
          Several bug fixes. See <a class="xref" href="impala_fixed_issues.html#fixed_issues_06">Issues Fixed in Version 0.6 of the Beta Release</a>.
        </li>


        <li class="li">
          Added support for Impala on SUSE and Debian/Ubuntu. Impala is now supported on:
          <ul class="ul">
            <li class="li">
              RHEL5.7/6.2 and Centos5.7/6.2
            </li>


            <li class="li">
              SUSE 11 with Service Pack 1 or higher
            </li>


            <li class="li">
              Ubuntu 10.04/12.04 and Debian 6.03
            </li>

          </ul>

        </li>


        <li class="li">
          Support for the RCFile file format. For more information on file formats, see
          <a class="xref" href="impala_file_formats.html#file_formats">Understanding File Formats</a>.
        </li>

      </ul>


    </div>


  </div>


  <div class="topic concept nested1" aria-labelledby="ariaid-title32" id="new_features_05">

    <h2 class="title topictitle2" id="ariaid-title32">New Features in Version 0.5 of the Impala Beta Release</h2>


    <div class="body conbody">

      <ul class="ul">
        <li class="li">
          Several bug fixes. See <a class="xref" href="impala_fixed_issues.html#fixed_issues_05">Issues Fixed in Version 0.5 of the Beta Release</a>.
        </li>


        <li class="li">
          Added support for a JDBC driver that allows you to access Impala from a Java client. To use this feature,
          follow the instructions in <a class="xref" href="impala_jdbc.html#impala_jdbc">Configuring Impala to Work with JDBC</a> to install the JDBC
          driver JARs on the client machine and modify the <code class="ph codeph">CLASSPATH</code> on the client to include the
          JARs.
        </li>

      </ul>


    </div>


  </div>


  <div class="topic concept nested1" aria-labelledby="ariaid-title33" id="new_features_04">

    <h2 class="title topictitle2" id="ariaid-title33">New Features in Version 0.4 of the Impala Beta Release</h2>


    <div class="body conbody">

      <ul class="ul">
        <li class="li">
          Several bug fixes. See <a class="xref" href="impala_fixed_issues.html#fixed_issues_04">Issues Fixed in Version 0.4 of the Beta Release</a>.
        </li>


        <li class="li">
          Added support for Impala on RHEL5.7/Centos5.7. Impala is now supported on RHEL5.7/6.2 and Centos5.7/6.2.
        </li>


        <li class="li">
          The Impala debug webserver now has the ability to serve static files from
          <code class="ph codeph">${IMPALA_HOME}/www</code>. This can be disabled by setting
          <code class="ph codeph">--enable_webserver_doc_root=false</code> on the command line. As a result, Impala now uses the
          Twitter Bootstrap library to style its debug webpages, and the <code class="ph codeph">/queries</code> page now tracks
          the last 25 queries run by each Impala daemon.
        </li>


        <li class="li">
          Additional metrics available on the Impala Debug Webpage.
        </li>

      </ul>


    </div>


  </div>


  <div class="topic concept nested1" aria-labelledby="ariaid-title34" id="new_features_03">

    <h2 class="title topictitle2" id="ariaid-title34">New Features in Version 0.3 of the Impala Beta Release</h2>


    <div class="body conbody">

      <ul class="ul">
        <li class="li">
          Several bug fixes. See <a class="xref" href="impala_fixed_issues.html#fixed_issues_03">Issues Fixed in Version 0.3 of the Beta Release</a>.
        </li>


        <li class="li">
          The <code class="ph codeph">state-store-service binary</code> has been renamed <code class="ph codeph">statestored</code>.
        </li>


        <li class="li">
          The location of the Impala configuration files has changed from the <code class="ph codeph">/usr/lib/impala/conf</code>
          directory to the <code class="ph codeph">/etc/impala/conf</code> directory.
        </li>

      </ul>


    </div>


  </div>


  <div class="topic concept nested1" aria-labelledby="ariaid-title35" id="new_features_02">

    <h2 class="title topictitle2" id="ariaid-title35">New Features in Version 0.2 of the Impala Beta Release</h2>


    <div class="body conbody">

      <ul class="ul">
        <li class="li">
          Several bug fixes. See <a class="xref" href="impala_fixed_issues.html#fixed_issues_02">Issues Fixed in Version 0.2 of the Beta Release</a>.
        </li>


        <li class="li">
          <strong class="ph b">Added Default Query Options</strong> Default query options override all default QueryOption values when
          starting <code class="ph codeph">impalad</code>. The format is:
<pre class="pre codeblock"><code>-default_query_options='key=value;key=value'</code></pre>
        </li>

      </ul>


    </div>


  </div>


</body>
</html>