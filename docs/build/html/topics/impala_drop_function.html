<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta name="copyright" content="(C) Copyright 2018" />
<meta name="DC.rights.owner" content="(C) Copyright 2018" />
<meta name="DC.Type" content="concept" />
<meta name="DC.Title" content="DROP FUNCTION Statement" />
<meta name="DC.Relation" scheme="URI" content="../topics/impala_langref_sql.html" />
<meta name="prodname" content="Impala" />
<meta name="prodname" content="Impala" />
<meta name="version" content="Impala 3.0.x" />
<meta name="version" content="Impala 3.0.x" />
<meta name="DC.Format" content="XHTML" />
<meta name="DC.Identifier" content="drop_function" />
<link rel="stylesheet" type="text/css" href="../commonltr.css" />
<title>DROP FUNCTION Statement</title>
</head>
<body id="drop_function">


  <h1 class="title topictitle1" id="ariaid-title1">DROP FUNCTION Statement</h1>

  
  

  <div class="body conbody">

    <p class="p">
      
      Removes a user-defined function (UDF), so that it is not available for execution during Impala
      <code class="ph codeph">SELECT</code> or <code class="ph codeph">INSERT</code> operations.
    </p>


    <p class="p">
        <strong class="ph b">Syntax:</strong>
      </p>


    <p class="p">
      To drop C++ UDFs and UDAs:
    </p>


<pre class="pre codeblock"><code>DROP [AGGREGATE] FUNCTION [IF EXISTS] [<var class="keyword varname">db_name</var>.]<var class="keyword varname">function_name</var>(<var class="keyword varname">type</var>[, <var class="keyword varname">type</var>...])</code></pre>

    <div class="note note"><span class="notetitle">Note:</span>
      <p class="p">
        The preceding syntax, which includes the function signature, also applies to Java UDFs that were created
        using the corresponding <code class="ph codeph">CREATE FUNCTION</code> syntax that includes the argument and return types.
        After upgrading to <span class="keyword">Impala 2.5</span> or higher, consider re-creating all Java UDFs with the
        <code class="ph codeph">CREATE FUNCTION</code> syntax that does not include the function signature. Java UDFs created this
        way are now persisted in the metastore database and do not need to be re-created after an Impala restart.
      </p>

    </div>


    <p class="p">
      To drop Java UDFs (created using the <code class="ph codeph">CREATE FUNCTION</code> syntax with no function signature):
    </p>


<pre class="pre codeblock"><code>DROP FUNCTION [IF EXISTS] [<var class="keyword varname">db_name</var>.]<var class="keyword varname">function_name</var></code></pre>



    <p class="p">
        <strong class="ph b">Statement type:</strong> DDL
      </p>


    <p class="p">
        <strong class="ph b">Usage notes:</strong>
      </p>


    <p class="p">
      Because the same function name could be overloaded with different argument signatures, you specify the
      argument types to identify the exact function to drop.
    </p>


    <p class="p">
        <strong class="ph b">Restrictions:</strong>
      </p>


    <p class="p">
        In <span class="keyword">Impala 2.5</span> and higher, Impala UDFs and UDAs written in C++ are persisted in the metastore database.
        Java UDFs are also persisted, if they were created with the new <code class="ph codeph">CREATE FUNCTION</code> syntax for Java UDFs,
        where the Java function argument and return types are omitted.
        Java-based UDFs created with the old <code class="ph codeph">CREATE FUNCTION</code> syntax do not persist across restarts
        because they are held in the memory of the <span class="keyword cmdname">catalogd</span> daemon.
        Until you re-create such Java UDFs using the new <code class="ph codeph">CREATE FUNCTION</code> syntax,
        you must reload those Java-based UDFs by running the original <code class="ph codeph">CREATE FUNCTION</code> statements again each time
        you restart the <span class="keyword cmdname">catalogd</span> daemon.
        Prior to <span class="keyword">Impala 2.5</span> the requirement to reload functions after a restart applied to both C++ and Java functions.
      </p>


    <p class="p">
        <strong class="ph b">Cancellation:</strong> Cannot be cancelled.
      </p>


    <p class="p">
        <strong class="ph b">HDFS permissions:</strong>
      </p>

    <p class="p">
      The user ID that the <span class="keyword cmdname">impalad</span> daemon runs under,
      typically the <code class="ph codeph">impala</code> user, does not need any
      particular HDFS permissions to perform this statement.
      All read and write operations are on the metastore database,
      not HDFS files and directories.
    </p>


    <p class="p">
        <strong class="ph b">Examples:</strong>
      </p>

    <p class="p">
      The following example shows how to drop Java functions created with the signatureless
      <code class="ph codeph">CREATE FUNCTION</code> syntax in <span class="keyword">Impala 2.5</span> and higher.
      Issuing <code class="ph codeph">DROP FUNCTION <var class="keyword varname">function_name</var></code> removes all the
      overloaded functions under that name.
      (See <a class="xref" href="impala_create_function.html#create_function">CREATE FUNCTION Statement</a> for a longer example
      showing how to set up such functions in the first place.)
    </p>

<pre class="pre codeblock"><code>
create function my_func location '/user/impala/udfs/udf-examples.jar'
  symbol='org.apache.impala.TestUdf';

show functions;
+-------------+---------------------------------------+-------------+---------------+
| return type | signature                             | binary type | is persistent |
+-------------+---------------------------------------+-------------+---------------+
| BIGINT      | my_func(BIGINT)                       | JAVA        | true          |
| BOOLEAN     | my_func(BOOLEAN)                      | JAVA        | true          |
| BOOLEAN     | my_func(BOOLEAN, BOOLEAN)             | JAVA        | true          |
...
| BIGINT      | testudf(BIGINT)                       | JAVA        | true          |
| BOOLEAN     | testudf(BOOLEAN)                      | JAVA        | true          |
| BOOLEAN     | testudf(BOOLEAN, BOOLEAN)             | JAVA        | true          |
...

drop function my_func;
show functions;
+-------------+---------------------------------------+-------------+---------------+
| return type | signature                             | binary type | is persistent |
+-------------+---------------------------------------+-------------+---------------+
| BIGINT      | testudf(BIGINT)                       | JAVA        | true          |
| BOOLEAN     | testudf(BOOLEAN)                      | JAVA        | true          |
| BOOLEAN     | testudf(BOOLEAN, BOOLEAN)             | JAVA        | true          |
...
</code></pre>

    <p class="p">
        <strong class="ph b">Related information:</strong>
      </p>


    <p class="p">
      <a class="xref" href="impala_udf.html#udfs">Impala User-Defined Functions (UDFs)</a>, <a class="xref" href="impala_create_function.html#create_function">CREATE FUNCTION Statement</a>
    </p>

  </div>

<div class="related-links">
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a class="link" href="../topics/impala_langref_sql.html">Impala SQL Statements</a></div>
</div>
</div></body>
</html>